import"./DsnmJJEf.js";import{aC as A,p as E,f as H,a as V,e as j,t as z}from"./D0CSSuTl.js";import{d as D}from"./C8vxa4mj.js";import{c as F,a as b,f as G}from"./Bd1JH_Ov.js";import{i as J}from"./D8NIUdeB.js";import{a as K}from"./IOA7-Wrn.js";import{r as M,q as O,p as Q,s as U}from"./D-UYCH9y.js";import{b as X}from"./DU5vAHPb.js";import{p as o,a as Y,s as Z}from"./zonMEKN6.js";import{i as $}from"./DFvk55M8.js";import{m as C,a as ee}from"./0qPXRVhz.js";import{S as ae}from"./C0GZEybY.js";import{h as te}from"./DLePdI2u.js";import{$ as T}from"./DWQ0JXRY.js";import{T as re}from"./BP6NvnZ7.js";const oe=(s,e,n,d)=>s.includes(" ")?e.filter(c=>c.name.toLowerCase().startsWith(s.toLowerCase())).slice(0,n):e.filter(c=>c.name.split(" ").some(u=>u.toLowerCase().startsWith(s.toLowerCase()))).slice(0,n),Le=A(T,s=>(e,n)=>s("person_hidden",{values:{name:e,hidden:n}}));var se=G('<input type="text"/>');function we(s,e){E(e,!0);const n=()=>Y(T,"$t",d),[d,c]=Z();let m=[],u,l=null,i=null;const _=()=>{v(oe(t(),m,x()))},g=()=>{v([]),P(),L()()},P=()=>{l&&(l.abort(),l=null),i&&(clearTimeout(i),i=null)};let t=o(e,"searchName",15),v=o(e,"searchedPeopleLocal",15),x=o(e,"numberPeopleToSearch",3,C),y=o(e,"inputClass",3,"w-full gap-2"),f=o(e,"showLoadingSpinner",15,!1),S=o(e,"placeholder",19,()=>n()("name_or_nickname")),L=o(e,"onReset",3,()=>{}),R=o(e,"onSearch",3,()=>{});const W=()=>{g(),L()()};async function h(r,a){if(t(a??t()),R()(),t()===""){g();return}if(!r&&m.length<C&&t().startsWith(u)){_();return}P(),l=new AbortController,i=setTimeout(()=>f(!0),ee);try{m=await re({name:t()},{signal:l?.signal}),u=t()}catch(p){te(p,n()("errors.cant_search_people"))}finally{clearTimeout(i),i=null,l=null,f(!1),_()}}var N={searchPeople:h},w=F(),B=H(w);{var k=r=>{ae(r,{get showLoadingSpinner(){return f()},get placeholder(){return S()},onReset:W,onSearch:({force:a})=>h(a??!1),get name(){return t()},set name(a){t(a)}})},q=r=>{var a=se();M(a),a.__input=()=>h(!1),j(()=>X(a,t)),K(a,p=>$?.(p)),z(()=>{O(a,1,Q(y())),U(a,"placeholder",S())}),b(r,a)};J(B,r=>{e.type==="searchBar"?r(k):r(q,!1)})}b(s,w);var I=V(N);return c(),I}D(["input"]);export{we as P,Le as g};
