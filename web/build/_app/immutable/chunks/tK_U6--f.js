import"./DsnmJJEf.js";import{p as Q,c as h,n as Ae,t as E,r as p,a as X,h as Ee,i as Le,j as $e,g as e,f as P,s as l,b as me,u as C,al as a}from"./D0CSSuTl.js";import{s as q,o as ke}from"./C8vxa4mj.js";import{s as re}from"./CMI33r64.js";import{i as A}from"./D8NIUdeB.js";import{h as Ne,e as we,i as Ue}from"./DLePdI2u.js";import{t as Ie,a as $,f as M,c as fe}from"./Bd1JH_Ov.js";import{a as ge}from"./IOA7-Wrn.js";import{n as We,T as Be,p as De,i as Fe,q as ae,s as ie,ac as He,cO as Pe,cM as Re,cP as je,cQ as qe,ai as Ge,az as Qe,cR as Xe,cS as Ye,cT as Ke,ax as Ve,cU as Je,a9 as Ze,u as et,cV as tt,be as rt,cW as at,aU as it,X as nt,F as st,G as ot,av as lt,cX as dt,K as ut,bg as ct,aS as vt,cY as mt,B as ft}from"./D-UYCH9y.js";import{p as U,a as G,s as he,d as gt,m as ht}from"./zonMEKN6.js";import{m as pt,N as x,B as bt,c as _t}from"./DMMOBWd8.js";import"./69_IOA4Y.js";import{i as $t}from"./9chJ2bcr.js";import{R as _}from"./gegweU97.js";import{b as ce,p as yt}from"./CJGyQpNN.js";import{y as xt,ae as ye}from"./DUXNbmIP.js";import{a2 as At}from"./BP6NvnZ7.js";import{$ as pe}from"./DWQ0JXRY.js";import{c as kt}from"./jZIyHVjf.js";import{f as wt}from"./dsDpGkcL.js";import{m as xe}from"./DW5CvR3c.js";import{s as te}from"./DT9-1pIm.js";import{f as ve}from"./oXVv5nIS.js";import{o as It}from"./WQ1yKytR.js";import{H as Ot}from"./BHTYC334.js";import{C as Mt}from"./DCkJo5DD.js";var Tt=M("<div><!></div>");function St(k,i){Q(i,!0);let n=U(i,"size",3,"small");const r=We({base:"ps-6 transition-all duration-200",variants:{variant:{compact:"py-4",default:"py-6"}}});var c=Tt(),s=h(c);Be(s,{get color(){return i.color},get size(){return n()},get fontWeight(){return i.fontWeight},children:(u,O)=>{Ae();var g=Ie();E(()=>q(g,i.title)),$(u,g)},$$slots:{default:!0}}),p(c),E(u=>ae(c,1,u),[()=>De(Fe(r({variant:i.variant??"default"}),i.class))]),$(k,c),X()}function zt(k,i){const n=[];if(i)for(const r of i){const c=Array.isArray(r)?r[0]:r;Array.isArray(r)&&r.length>1?n.push(c(k,r[1])):n.push(c(k))}return{update(r){if((r?.length||0)!=n.length)throw new Error("You must not change the length of an actions array.");if(r){for(const[c,s]of n.entries())if(s&&s.update){const u=r[c];Array.isArray(u)&&u.length>1?s.update(u[1]):s.update()}}},destroy(){for(const r of n)r?.destroy?.()}}}var Ct=M('<a class="flex w-full place-items-center justify-between gap-4 rounded-e-full py-3 transition-[padding] delay-100 duration-100 hover:cursor-pointer hover:bg-subtle hover:text-immich-primary dark:text-immich-dark-fg dark:hover:bg-immich-dark-gray dark:hover:text-immich-dark-primary ps-10 group-hover:sm:px-10 md:px-10"><div><div class="h-6 w-6 bg-cover rounded bg-gray-200 dark:bg-gray-600"></div></div> <div class="grow text-sm font-medium truncate"> </div></a>');function Et(k,i){Q(i,!0);const n=()=>G(pe,"$t",r),[r,c]=he();let s=Ee(Le([]));ke(async()=>{if(ce.recentAlbums){$e(s,ce.recentAlbums,!0);return}try{const g=await At({});$e(s,g.sort((y,v)=>y.updatedAt>v.updatedAt?-1:1).slice(0,3),!0),ce.recentAlbums=e(s)}catch(g){Ne(g,n()("failed_to_load_assets"))}});var u=fe(),O=P(u);we(O,17,()=>e(s),g=>g.id,(g,y)=>{var v=Ct(),T=h(v),W=h(T);p(T);var B=l(T,2),L=h(B,!0);p(B),p(v),E((N,D)=>{ie(v,"href",N),ie(v,"title",e(y).albumName),He(W,D),q(L,e(y).albumName)},[()=>_.viewAlbum(e(y)),()=>e(y).albumThumbnailAssetId?`background-image:url('${xt({id:e(y).albumThumbnailAssetId})}')`:""]),$(g,v)}),$(k,u),X(),c()}var Lt=M('<nav id="sidebar" tabindex="-1" data-testid="sidebar-parent"><div class="pe-6 flex flex-col gap-1 h-max min-h-full"><!></div></nav>');function Nt(k,i){Q(i,!0);const n=C(()=>!te.isOpen&&!xe.isFullSidebar),r=C(()=>te.isOpen&&!xe.isFullSidebar);ke(()=>{c()});const c=()=>{e(r)&&(te.reset(),e(n)&&document.querySelector(`#${pt}`)?.focus())};var s=Lt();let u;var O=h(s),g=h(O);re(g,()=>i.children??me),p(O),p(s),ge(s,(y,v)=>kt?.(y,v),()=>({onOutclick:c,onEscape:c})),ge(s,(y,v)=>wt?.(y,v),()=>({active:e(r)})),E(()=>{ie(s,"aria-label",i.ariaLabel),u=ae(s,1,"immich-scrollbar relative z-1 w-0 sidebar:w-64 overflow-y-auto overflow-x-hidden pt-8 transition-all duration-200 bg-light",null,u,{"shadow-2xl":e(r),"dark:border-e-immich-dark-gray":e(r),"border-r":e(r),"w-[min(100vw,16rem)]":te.isOpen}),s.inert=e(n)}),$(k,s),X()}var Ut=M('<span class="hidden md:block"><!></span>'),Wt=M("<!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!>",1);function Bt(k,i){Q(i,!1);const n=()=>G(pe,"$t",s),r=()=>G(yt,"$preferences",s),c=()=>G(ye,"$recentAlbumsDropdown",s),[s,u]=he();$t();{let O=a(()=>n()("primary"));Nt(k,{get ariaLabel(){return e(O)},children:(g,y)=>{var v=Wt(),T=P(v);{let t=a(()=>n()("photos")),o=a(()=>_.photos());x(T,{get title(){return e(t)},get href(){return e(o)},get icon(){return Re},get activeIcon(){return Pe}})}var W=l(T,2);{var B=t=>{{let o=a(()=>n()("explore")),m=a(()=>_.explore());x(t,{get title(){return e(o)},get href(){return e(m)},get icon(){return et}})}};A(W,t=>{ve.value.search&&t(B)})}var L=l(W,2);{var N=t=>{{let o=a(()=>n()("map")),m=a(()=>_.map());x(t,{get title(){return e(o)},get href(){return e(m)},get icon(){return rt},get activeIcon(){return tt}})}};A(L,t=>{ve.value.map&&t(N)})}var D=l(L,2);{var ne=t=>{{let o=a(()=>n()("people")),m=a(()=>_.people());x(t,{get title(){return e(o)},get href(){return e(m)},get icon(){return it},get activeIcon(){return at}})}};A(D,t=>{r().people.enabled&&r().people.sidebarWeb&&t(ne)})}var F=l(D,2);{var Y=t=>{{let o=a(()=>n()("shared_links")),m=a(()=>_.sharedLinks());x(t,{get title(){return e(o)},get href(){return e(m)},get icon(){return nt}})}};A(F,t=>{r().sharedLinks.enabled&&r().sharedLinks.sidebarWeb&&t(Y)})}var K=l(F,2);{let t=a(()=>n()("sharing")),o=a(()=>_.sharing());x(K,{get title(){return e(t)},get href(){return e(o)},get icon(){return qe},get activeIcon(){return je}})}var V=l(K,2);{let t=a(()=>n()("library"));St(V,{get title(){return e(t)},size:"tiny"})}var R=l(V,2);{let t=a(()=>n()("favorites")),o=a(()=>_.favorites());x(R,{get title(){return e(t)},get href(){return e(o)},get icon(){return Qe},get activeIcon(){return Ge}})}var S=l(R,2);{const t=b=>{var w=Ut(),de=h(w);Et(de,{}),p(w),st(1,w,()=>ot,()=>({y:-20})),$(b,w)};let o=a(()=>n()("albums")),m=a(()=>_.albums()),f=a(()=>({icon:lt,flipped:!0}));x(S,{get title(){return e(o)},get href(){return e(m)},get icon(){return e(f)},get expanded(){return ht(),c()},set expanded(b){gt(ye,b)},items:t,$$slots:{items:!0},$$legacy:!0})}var J=l(S,2);{var se=t=>{{let o=a(()=>n()("tags")),m=a(()=>_.tags()),f=a(()=>({icon:ct,flipped:!0}));x(t,{get title(){return e(o)},get href(){return e(m)},get icon(){return e(f)}})}};A(J,t=>{r().tags.enabled&&r().tags.sidebarWeb&&t(se)})}var Z=l(J,2);{var d=t=>{{let o=a(()=>n()("folders")),m=a(()=>_.folders()),f=a(()=>({icon:vt,flipped:!0}));x(t,{get title(){return e(o)},get href(){return e(m)},get icon(){return e(f)}})}};A(Z,t=>{r().folders.enabled&&r().folders.sidebarWeb&&t(d)})}var I=l(Z,2);{let t=a(()=>n()("utilities")),o=a(()=>_.utilities());x(I,{get title(){return e(t)},get href(){return e(o)},get icon(){return Ye},get activeIcon(){return Xe}})}var z=l(I,2);{let t=a(()=>n()("archive")),o=a(()=>_.archive());x(z,{get title(){return e(t)},get href(){return e(o)},get icon(){return Ve},get activeIcon(){return Ke}})}var j=l(z,2);{let t=a(()=>n()("locked_folder")),o=a(()=>_.locked());x(j,{get title(){return e(t)},get href(){return e(o)},get icon(){return Ze},get activeIcon(){return Je}})}var ee=l(j,2);{var oe=t=>{{let o=a(()=>n()("trash")),m=a(()=>_.trash());x(t,{get title(){return e(o)},get href(){return e(m)},get icon(){return ut},get activeIcon(){return dt}})}};A(ee,t=>{ve.value.trash&&t(oe)})}var le=l(ee,2);bt(le),$(g,v)},$$slots:{default:!0}})}X(),u()}const Dt="user-page-header";var Ft=M('<div class="outline-none pe-8" tabindex="-1"> </div>'),Ht=M('<p class="text-sm text-gray-400 dark:text-gray-600"> </p>'),Pt=M('<div class="hidden md:block"><!></div> <!>',1),Rt=M('<div class="absolute flex h-16 w-full place-items-center justify-between border-b p-2 text-dark"><div class="flex gap-2 items-center"><!> <!></div> <!> <!></div>'),jt=M('<header><!></header> <div tabindex="-1"><!> <main class="relative"><div><!></div> <!></main></div>',1);function _r(k,i){Q(i,!0);const n=()=>G(pe,"$t",r),[r,c]=he();let s=U(i,"hideNavbar",3,!1),u=U(i,"title",3,void 0),O=U(i,"description",3,void 0),g=U(i,"scrollbar",3,!0),y=U(i,"use",19,()=>[]),v=U(i,"actions",19,()=>[]);const T=C(()=>v().filter(d=>!mt(d)).filter(d=>d.$if?.()??!0));let W=C(()=>g()?"immich-scrollbar":"scrollbar-hidden"),B=C(()=>u()?"top-16 h-[calc(100%-(--spacing(16)))]":"top-0 h-full");var L=jt(),N=P(L),D=h(N);{var ne=d=>{_t(d,{onUploadClick:()=>It()})};A(D,d=>{s()||d(ne)})}p(N);var F=l(N,2),Y=h(F);{var K=d=>{var I=fe(),z=P(I);re(z,()=>i.sidebar),$(d,I)},V=d=>{Bt(d,{})};A(Y,d=>{i.sidebar?d(K):d(V,!1)})}var R=l(Y,2),S=h(R),J=h(S);re(J,()=>i.children??me),p(S),ge(S,(d,I)=>zt?.(d,I),y);var se=l(S,2);{var Z=d=>{var I=Rt(),z=h(I),j=h(z);{var ee=f=>{var b=Ft();ie(b,"id",Dt);var w=h(b,!0);p(b),E(()=>q(w,u())),$(f,b)};A(j,f=>{u()&&f(ee)})}var oe=l(j,2);{var le=f=>{var b=Ht(),w=h(b,!0);p(b),E(()=>q(w,O())),$(f,b)};A(oe,f=>{O()&&f(le)})}p(z);var t=l(z,2);re(t,()=>i.buttons??me);var o=l(t,2);{var m=f=>{var b=Pt(),w=P(b),de=h(w);Ot(de,{gap:0,children:(ue,qt)=>{var be=fe(),Me=P(be);we(Me,17,()=>e(T),Ue,(Te,H)=>{{let Se=C(()=>e(H).color??"secondary"),ze=C(()=>e(H).data?.title);ft(Te,{variant:"ghost",size:"small",get color(){return e(Se)},get leadingIcon(){return e(H).icon},onclick:()=>e(H).onAction(e(H)),get title(){return e(ze)},children:(Ce,Gt)=>{Ae();var _e=Ie();E(()=>q(_e,e(H).title)),$(Ce,_e)},$$slots:{default:!0}})}}),$(ue,be)},$$slots:{default:!0}}),p(w);var Oe=l(w,2);{let ue=C(()=>n()("open"));Mt(Oe,{get"aria-label"(){return e(ue)},get items(){return v()},class:"md:hidden"})}$(f,b)};A(o,f=>{e(T).length>0&&f(m)})}p(I),$(d,I)};A(se,d=>{(u()||i.buttons)&&d(Z)})}p(R),p(F),E(()=>{ae(F,1,`relative z-0 grid grid-cols-[--spacing(0)_auto] overflow-hidden sidebar:grid-cols-[--spacing(64)_auto]
    ${s()?"h-dvh":"h-[calc(100dvh-var(--navbar-height))] max-md:h-[calc(100dvh-var(--navbar-height-md))]"}
    ${s()?"pt-(--navbar-height)":""}
    ${s()?"max-md:pt-(--navbar-height-md)":""}`),ae(S,1,`${e(W)??""} absolute ${e(B)??""} w-full overflow-y-auto p-2`)}),$(k,L),X(),c()}export{Nt as S,_r as U,Dt as h};
