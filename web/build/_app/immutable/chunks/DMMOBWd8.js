import"./DsnmJJEf.js";import{p as te,t as T,g as i,a as re,s,u as h,c as r,r as t,f as J,aA as Ct,n as Q,j as V,h as ie,b as Ge,d as Mt,W as tt,al as dt,i as vt,V as ut,aD as Lt}from"./D0CSSuTl.js";import{s as b,d as we,o as Ne,e as ye}from"./C8vxa4mj.js";import{s as mt}from"./CMI33r64.js";import{i as W}from"./D8NIUdeB.js";import{e as We,i as Tt,t as ft,h as Ue}from"./DLePdI2u.js";import{a as o,f as j,c as ve,t as Y}from"./Bd1JH_Ov.js";import{n as gt,a as ee,l as Ye,s as he,i as Je,q as ze,a0 as Rt,bR as Dt,p as _t,L as je,T as pe,I as ke,ab as Ae,eB as Ot,av as jt,eC as Ft,ch as Ht,eu as Nt,B as ne,eD as Wt,en as pt,d3 as Et,F as Be,ad as Ce,eE as Vt,eF as rt,eG as qt,eH as Kt,br as Gt,c6 as Yt,eI as Jt,c$ as Qt,d5 as Xt,eJ as Zt,u as er,cx as at,eK as tr,d as rr,cW as ar,D as Pe,d0 as ir,v as ht,r as sr,w as or,eL as nr,cB as lr,ac as cr}from"./D-UYCH9y.js";import{p as ue,b as it,a as K,s as se,d as dr,f as vr}from"./zonMEKN6.js";import{p as Qe}from"./CG4KAGH3.js";import{L as bt}from"./CTSOIQJr.js";import{a as Fe}from"./IOA7-Wrn.js";import{a as ur}from"./Cc6nBHMJ.js";import{c as st}from"./jZIyHVjf.js";import{U as Xe,A as mr,g as fr}from"./CIJfCxLq.js";import{g as xt}from"./gvLJu3l0.js";import{f as yt}from"./dsDpGkcL.js";import{bR as _e,bS as fe,bT as gr,bU as _r,X as pr,aP as kt,bl as $t,bV as hr,bW as br,bX as xr}from"./BP6NvnZ7.js";import{D as Me,u as Ie,b as le,p as Se,l as yr,c as wt,g as kr,r as Pt}from"./CJGyQpNN.js";import{S as Oe,H as $r}from"./Tw41aoDi.js";import{ao as $e,l as It,w as wr,ap as ot,v as De}from"./DUXNbmIP.js";import{$ as oe}from"./DWQ0JXRY.js";import{f as Pr,S as Ir}from"./D3ODmHbk.js";import{S as Sr}from"./DjfA5PU5.js";import{a as zr}from"./eS1Q_jdJ.js";import{g as Ur,P as Ar}from"./BRztk81V.js";import{a as Br}from"./DxRnQWdm.js";import{f as nt}from"./oXVv5nIS.js";import{R as Le}from"./gegweU97.js";import{m as Cr}from"./DW5CvR3c.js";import{s as lt}from"./DT9-1pIm.js";import{T as Mr}from"./CdYsFlcU.js";import{M as Ee,a as Ve,m as He}from"./BHTYC334.js";import"./69_IOA4Y.js";import{I as St,O as Lr}from"./0qPXRVhz.js";import{S as Tr}from"./Dm18XTJp.js";import{b as Rr,L as zt}from"./DU5vAHPb.js";import{s as Dr}from"./D1613R3V.js";import{i as Ut}from"./9chJ2bcr.js";import{e as Or}from"./BpCm29KX.js";import{A as jr}from"./B2XNhc0s.js";var Fr=j('<button type="button" class="hover:bg-subtle hover:text-primary absolute me-2 hidden h-full rounded-lg px-0.5 md:block"><!></button>'),Hr=j('<div><!> <span class="truncate text-sm font-medium"> </span></div>'),Nr=j("<div><!></div>"),Wr=j('<div><div class="relative flex items-center"><!> <!></div> <!></div>');function Er(A,e){te(e,!0);const a=()=>Qe.url.pathname.startsWith(e.href);let g=ue(e,"expanded",15,!1);const P=h(()=>e.isActive??a);let x=h(()=>e.active??i(P)());const I=h(()=>typeof e.icon=="string"?{icon:e.icon}:e.icon),c=h(()=>typeof e.activeIcon=="string"?{icon:e.activeIcon}:e.activeIcon),_=gt({base:"hover:bg-subtle hover:text-primary flex w-full place-items-center gap-4 rounded-e-full ps-5 transition-[padding] delay-100 duration-100",variants:{active:{true:"bg-primary/10 text-primary",false:""},variant:{default:"py-3",compact:"py-2"}}});var O=Wr(),v=r(O),m=r(v);{var p=z=>{var B=Fr();B.__click=()=>g(!g());var H=r(B);{let N=h(()=>g()?Rt:Dt);ee(H,{get icon(){return i(N)},size:"1em",class:"shrink-0 delay-100 duration-100 ","aria-hidden":!0})}t(B),T(N=>he(B,"aria-label",N),[()=>g()?Ye("collapse"):Ye("expand")]),o(z,B)};W(m,z=>{e.items&&z(p)})}var d=s(m,2);{let z=h(()=>i(x)?"page":void 0),B=h(()=>Je(_({active:i(x),variant:e.variant??"default"}),e.class));bt(d,{get href(){return e.href},get"aria-current"(){return i(z)},underline:!1,get class(){return i(B)},children:(H,N)=>{var k=Hr(),$=r(k);{var f=C=>{ee(C,it({size:"1.375em",class:"shrink-0","aria-hidden":!0},()=>i(x)&&i(c)?i(c):i(I)))};W($,C=>{i(I)&&C(f)})}var D=s($,2),w=r(D,!0);t(D),t(k),T(()=>{ze(k,1,`relative flex w-full place-items-center ${e.variant==="compact"?"gap-2":"gap-4"}`),b(w,e.title)}),o(H,k)},$$slots:{default:!0}})}t(v);var y=s(v,2);{var S=z=>{var B=Nr(),H=r(B);{var N=$=>{var f=ve(),D=J(f);We(D,17,()=>e.items,Tt,(w,C,F,n)=>{let u=()=>i(C).class,M=()=>Ct(i(C),["class"]);{let U=h(()=>Je("ps-8",u()));Er(w,it({get variant(){return e.variant}},M,{get class(){return i(U)}}))}}),o($,f)},k=$=>{var f=ve(),D=J(f);{var w=C=>{var F=ve(),n=J(F);mt(n,()=>e.items),o(C,F)};W(D,C=>{e.items&&C(w)},!0)}o($,f)};W(H,$=>{Array.isArray(e.items)?$(N):$(k,!1)})}t(B),o(z,B)};W(y,z=>{g()&&z(S)})}t(O),o(A,O),re()}we(["click"]);var Vr=j("<!> <!>",1),qr=j("<div><!></div>");function Kr(A,e){te(e,!0);const a=ue(e,"effect",3,"hover"),g=ue(e,"text",19,()=>Ye("supporter")),P=ue(e,"size",3,"medium"),x={tiny:"tiny",small:"tiny",medium:"small",large:"medium",giant:"medium"},I=gt({base:"bg-secondary flex place-items-center gap-2 overflow-hidden rounded-lg transition-all",variants:{size:{tiny:"px-2 py-1",small:"px-2 py-1",medium:"px-3 py-2",large:"px-3 py-2",giant:"px-3 py-2"},effect:{hover:"supporter-effect-hover border-dark/25 border",always:"supporter-effect shadow"}}});var c=qr(),_=r(c);{var O=m=>{var p=ve(),d=J(p);mt(d,()=>e.children),o(m,p)},v=m=>{var p=Vr(),d=J(p);je(d,{get size(){return x[P()]},variant:"icon"});var y=s(d,2);pe(y,{fontWeight:"normal",color:"secondary",get size(){return P()},children:(S,z)=>{Q();var B=Y();T(()=>b(B,g())),o(S,B)},$$slots:{default:!0}}),o(m,p)};W(_,m=>{e.children?m(O):m(v,!1)})}t(c),T(m=>ze(c,1,m,"svelte-1jly82l"),[()=>_t(Je(I({effect:a(),size:P()})))]),o(A,c),re()}var Gr=j("<!> <!> <!>",1),Yr=j('<div class="w-2 h-2 rounded-full bg-primary text-right justify-self-center"></div>'),Jr=j('<button class="min-h-20 p-2 py-3 hover:bg-immich-primary/10 dark:hover:bg-immich-dark-primary/10 border-b border-gray-200 dark:border-immich-dark-gray w-full" type="button"><div class="grid grid-cols-[56px_1fr_32px] items-center gap-2"><div class="flex place-items-center place-content-center"><!></div> <!> <!></div></button>');function Qr(A,e){te(e,!0);const a=d=>{switch(d){case fe.Error:return"danger";case fe.Warning:return"warning";case fe.Info:return"primary";case fe.Success:return"success";default:return"primary"}},g=d=>{switch(d){case fe.Error:return"bg-red-500 dark:bg-red-300 dark:hover:bg-red-200";case fe.Warning:return"bg-amber-500 dark:bg-amber-200 dark:hover:bg-amber-200";case fe.Info:return"bg-blue-500 dark:bg-blue-200 dark:hover:bg-blue-200";case fe.Success:return"bg-green-500 dark:bg-green-200 dark:hover:bg-green-200"}},P=d=>{switch(d){case _e.BackupFailed:return Nt;case _e.JobFailed:return Ht;case _e.SystemMessage:return Ft;case _e.Custom:return Ae;case _e.AlbumInvite:return jt;case _e.AlbumUpdate:return Ot;default:return Ae}},x=d=>{try{const y=Me.fromISO(d);return y.isValid&&y.setLocale("en").toRelative()||d}catch(y){return console.error("Error formatting relative time:",y),d}};var I=Jr();I.__click=()=>e.onclick(e.notification);var c=r(I),_=r(c),O=r(_);{let d=h(()=>P(e.notification.type)),y=h(()=>a(e.notification.level)),S=h(()=>g(e.notification.level));ke(O,{get icon(){return i(d)},get color(){return i(y)},get"aria-label"(){return e.notification.title},shape:"round",get class(){return i(S)},size:"small"})}t(_);var v=s(_,2);Oe(v,{class:"text-left",gap:1,children:(d,y)=>{var S=Gr(),z=J(S);pe(z,{size:"tiny",class:"text-black dark:text-white text-base",fontWeight:"semi-bold",children:(k,$)=>{Q();var f=Y();T(()=>b(f,e.notification.title)),o(k,f)},$$slots:{default:!0}});var B=s(z,2);{var H=k=>{pe(k,{class:"overflow-hidden text-gray-600 dark:text-gray-300",children:($,f)=>{Q();var D=Y();T(()=>b(D,e.notification.description)),o($,D)},$$slots:{default:!0}})};W(B,k=>{e.notification.description&&k(H)})}var N=s(B,2);pe(N,{size:"tiny",color:"muted",children:(k,$)=>{Q();var f=Y();T(D=>b(f,D),[()=>x(e.notification.createdAt)]),o(k,f)},$$slots:{default:!0}}),o(d,S)},$$slots:{default:!0}});var m=s(v,2);{var p=d=>{var y=Yr();o(d,y)};W(m,d=>{e.notification.readAt||d(p)})}t(c),t(I),T(()=>he(I,"title",e.notification.createdAt)),o(A,I),re()}we(["click"]);var Xr=j("<!> <!>",1),Zr=j("<div><!></div>"),ea=j('<div class="flex justify-between items-center mt-4 mx-4"><!> <div><!></div></div> <hr class="dark:border-black"/> <!>',1),ta=j('<div id="notification-panel" class="absolute right-6 top-17.5 z-1 w-[min(360px,100vw-50px)] rounded-3xl bg-gray-100 border border-gray-200 shadow-lg dark:border dark:border-light dark:bg-immich-dark-gray text-light"><!></div>');function ra(A,e){te(e,!0);const a=()=>K(oe,"$t",g),[g,P]=se(),x=h(()=>$e.notifications.length===0),I=async p=>{try{await $e.markAsRead(p)}catch(d){Ue(d,a()("errors.failed_to_update_notification_status"))}},c=async()=>{try{await $e.markAllAsRead(),ft.info(a()("marked_all_as_read"))}catch(p){Ue(p,a()("errors.failed_to_update_notification_status"))}},_=async p=>{switch(p.type){case _e.AlbumInvite:case _e.AlbumUpdate:{if(!p.data||typeof p.data!="string")return;const d=JSON.parse(p.data);d?.albumId&&await xt(`/albums/${d.albumId}`);break}}},O=async p=>{await I(p.id),await _(p)};var v=ta(),m=r(v);Oe(m,{class:"max-h-125",children:(p,d)=>{var y=ea(),S=J(y),z=r(S);pe(z,{size:"medium",color:"secondary",fontWeight:"semi-bold",children:(f,D)=>{Q();var w=Y();T(C=>b(w,C),[()=>a()("notifications")]),o(f,w)},$$slots:{default:!0}});var B=s(z,2),H=r(B);ne(H,{variant:"ghost",get disabled(){return i(x)},get leadingIcon(){return Wt},size:"small",color:"primary",onclick:()=>c(),children:(f,D)=>{Q();var w=Y();T(C=>b(w,C),[()=>a()("mark_all_as_read")]),o(f,w)},$$slots:{default:!0}}),t(B),t(S);var N=s(S,4);{var k=f=>{Oe(f,{class:"py-12 flex flex-col place-items-center place-content-center text-gray-700 dark:text-gray-300",gap:1,children:(D,w)=>{var C=Xr(),F=J(C);ee(F,{get icon(){return pt},size:"20"});var n=s(F,2);pe(n,{children:(u,M)=>{Q();var U=Y();T(l=>b(U,l),[()=>a()("no_notifications")]),o(u,U)},$$slots:{default:!0}}),o(D,C)},$$slots:{default:!0}})},$=f=>{Sr(f,{class:"pb-6",children:(D,w)=>{Oe(D,{gap:0,children:(C,F)=>{var n=ve(),u=J(n);We(u,25,()=>$e.notifications,M=>M.id,(M,U)=>{var l=Zr(),R=r(l);Qr(R,{get notification(){return i(U)},onclick:O}),t(l),Et(l,()=>Pr,()=>({duration:400})),o(M,l)}),o(C,n)},$$slots:{default:!0}})},$$slots:{default:!0}})};W(N,f=>{i(x)?f(k):f($,!1)})}o(p,y)},$$slots:{default:!0}}),t(v),Fe(v,p=>yt?.(p)),Be(1,v,()=>Ce,()=>({duration:100})),Be(2,v,()=>Ce,()=>({duration:100})),o(A,v),re(),P()}var aa=j("<div><!></div>");function ia(A,e){te(e,!0);const a=()=>K(oe,"$t",g),[g,P]=se();let x=ue(e,"target",3,"main"),I=ue(e,"text",19,()=>a()("skip_to_content")),c=ie(!1);const _=()=>{const p=document.querySelector(x());if(p){const d=Ur(p)[0];d&&d.focus()}},O=()=>{if(!e.breakpoint)return"";switch(e.breakpoint){case"sm":return"hidden sm:block";case"md":return"hidden md:block";case"lg":return"hidden lg:block";case"xl":return"hidden xl:block";case"2xl":return"hidden 2xl:block"}};var v=aa(),m=r(v);{let p=h(O);ne(m,{size:"small",onclick:_,get class(){return i(p)},onfocus:()=>V(c,!0),onblur:()=>V(c,!1),children:(d,y)=>{Q();var S=Y();T(()=>b(S,I())),o(d,S)},$$slots:{default:!0}})}t(v),T(()=>ze(v,1,`absolute top-2 start-2 transition-transform ${i(c)?"translate-y-0":"-translate-y-10 sr-only"}`)),o(A,v),re(),P()}var sa=j('<button type="button"><!></button>'),oa=j('<div class="grid grid-cols-2 sm:grid-cols-5 gap-4 place-items-center"></div>');function na(A,e){te(e,!0);const a=()=>K(Ie,"$user",P),g=()=>K(oe,"$t",P),[P,x]=se(),I=Object.values(gr),c=async _=>{try{a().profileImagePath!==""&&await _r(),ft.success(g()("saved_profile")),dr(Ie,await pr({userUpdateMeDto:{avatarColor:_}})),e.onClose()}catch(O){Ue(O,g()("errors.unable_to_save_profile"))}};{let _=h(()=>g()("select_avatar_color"));Ee(A,{get title(){return i(_)},size:"small",get onClose(){return e.onClose},children:(O,v)=>{Ve(O,{children:(m,p)=>{var d=oa();We(d,20,()=>I,y=>y,(y,S)=>{var z=sa();z.__click=()=>c(S);var B=r(z);{let H=h(()=>({...a(),profileImagePath:"",avatarColor:S}));Xe(B,{get label(){return S},get user(){return i(H)},size:"xl"})}t(z),o(y,z)}),t(d),o(m,d)},$$slots:{default:!0}})},$$slots:{default:!0}})}re(),x()}we(["click"]);const la='<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>',ca='</title><path d="',da='"/></svg>',va={title:"Discord",slug:"discord",get svg(){return la+"Discord"+ca+this.path+da},path:"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z",source:"https://discord.com/branding",hex:"5865F2",guidelines:"https://discord.com/branding"},ge=(A,e=Ge,a=Ge,g=Ge)=>{var P=ua(),x=r(P),I=r(x);ee(I,{get icon(){return a()},size:"1.5em",class:"inline-block"});var c=s(I,2),_=r(c,!0);t(c),t(x),t(P),T(()=>{he(x,"href",e()),b(_,g())}),o(A,P)};var ua=j('<div><a target="_blank" rel="noreferrer"><!> <p class="font-medium text-primary text-sm underline inline-block"> </p></a></div>'),ma=j('<p class="mt-5"> </p> <p class="text-sm mt-1"> </p> <div class="flex flex-col gap-2 mt-5"><!> <!> <!> <!></div>',1),fa=j('<p> </p> <div class="flex flex-col gap-2 mt-5"><!> <!> <!> <!></div> <!>',1);function ga(A,e){te(e,!0);const a=()=>K(oe,"$t",g),[g,P]=se();{let x=h(()=>a()("support_and_feedback"));Ee(A,{get title(){return i(x)},get onClose(){return e.onClose},size:"small",children:(I,c)=>{Ve(I,{children:(_,O)=>{var v=fa(),m=J(v),p=r(m,!0);t(m);var d=s(m,2),y=r(d);{let k=h(()=>a()("documentation"));ge(y,()=>`https://docs.${e.info.version}.archive.immich.app/overview/introduction`,()=>Ae,()=>i(k))}var S=s(y,2);{let k=h(()=>a()("source"));ge(S,()=>"https://github.com/immich-app/immich/",()=>Vt,()=>i(k))}var z=s(S,2);{let k=h(()=>a()("discord"));ge(z,()=>"https://discord.immich.app",()=>va,()=>i(k))}var B=s(z,2);{let k=h(()=>a()("bugs_and_feature_requests"));ge(B,()=>"https://github.com/immich-app/immich/issues/new/choose",()=>rt,()=>i(k))}t(d);var H=s(d,2);{var N=k=>{var $=ma(),f=J($),D=r(f,!0);t(f);var w=s(f,2),C=r(w,!0);t(w);var F=s(w,2),n=r(F);{var u=E=>{{let ae=h(()=>a()("documentation"));ge(E,()=>e.info.thirdPartyDocumentationUrl,()=>Ae,()=>i(ae))}};W(n,E=>{e.info.thirdPartyDocumentationUrl&&E(u)})}var M=s(n,2);{var U=E=>{{let ae=h(()=>a()("source"));ge(E,()=>e.info.thirdPartySourceUrl,()=>qt,()=>i(ae))}};W(M,E=>{e.info.thirdPartySourceUrl&&E(U)})}var l=s(M,2);{var R=E=>{{let ae=h(()=>a()("support"));ge(E,()=>e.info.thirdPartySupportUrl,()=>Kt,()=>i(ae))}};W(l,E=>{e.info.thirdPartySupportUrl&&E(R)})}var q=s(l,2);{var G=E=>{{let ae=h(()=>a()("bugs_and_feature_requests"));ge(E,()=>e.info.thirdPartyBugFeatureUrl,()=>rt,()=>i(ae))}};W(q,E=>{e.info.thirdPartyBugFeatureUrl&&E(G)})}t(F),T((E,ae)=>{b(D,E),b(C,ae)},[()=>a()("third_party_resources"),()=>a()("support_third_party_description")]),o(k,$)};W(H,k=>{(e.info.thirdPartyBugFeatureUrl||e.info.thirdPartySourceUrl||e.info.thirdPartyDocumentationUrl||e.info.thirdPartySupportUrl)&&k(N)})}T(k=>b(p,k),[()=>a()("official_immich_resources")]),o(_,v)},$$slots:{default:!0}})},$$slots:{default:!0}})}re(),P()}var _a=j('<div class="flex place-content-center place-items-center text-center gap-2 px-2"><!> </div>'),pa=j('<div class="flex place-content-center place-items-center text-center gap-2 px-2"><!> </div>'),ha=j('<div id="account-info-panel" class="absolute z-1 end-6 top-19 w-[min(360px,100vw-50px)] rounded-3xl bg-gray-200 shadow-lg dark:border dark:border-immich-dark-gray dark:bg-immich-dark-gray"><div class="mx-4 mt-4 flex flex-col items-center justify-center gap-4 rounded-t-3xl bg-white p-4 dark:bg-immich-dark-primary/10"><div class="relative"><!> <div class="absolute bottom-0 end-0 rounded-full w-6 h-6"><!></div></div> <div><p class="text-center text-lg font-medium text-primary"> </p> <p class="text-sm text-gray-500 dark:text-immich-dark-fg"> </p></div> <div class="flex flex-col gap-1"><!> <!></div></div> <div class="mb-4 flex flex-col"><!> <button type="button" class="text-center mt-4 underline text-xs text-primary"> </button></div></div>');function ba(A,e){te(e,!0);const a=()=>K(Ie,"$user",P),g=()=>K(oe,"$t",P),[P,x]=se();let I=ue(e,"onClose",3,()=>{}),c=ie(void 0);Ne(async()=>{V(c,le.aboutInfo??await kt(),!0)});var _=ha(),O=r(_),v=r(O),m=r(v);Xe(m,{get user(){return a()},size:"xl"});var p=s(m,2),d=r(p);{let n=h(()=>g()("edit_avatar"));ke(d,{color:"primary",get icon(){return Gt},get"aria-label"(){return i(n)},size:"tiny",shape:"round",onclick:async()=>{I()(),await He.show(na)}})}t(p),t(v);var y=s(v,2),S=r(y),z=r(S,!0);t(S);var B=s(S,2),H=r(B,!0);t(B),t(y);var N=s(y,2),k=r(N);{let n=h(()=>Le.userSettings());ne(k,{get href(){return i(n)},get onclick(){return I()},size:"small",color:"secondary",variant:"ghost",shape:"round",class:"border dark:border-immich-dark-gray dark:bg-gray-500 dark:hover:bg-immich-dark-primary/50 hover:bg-immich-primary/10 dark:text-white",children:(u,M)=>{var U=_a(),l=r(U);ee(l,{get icon(){return Yt},size:"18","aria-hidden":!0});var R=s(l);t(U),T(q=>b(R,` ${q??""}`),[()=>g()("account_settings")]),o(u,U)},$$slots:{default:!0}})}var $=s(k,2);{var f=n=>{{let u=h(()=>Le.systemSettings()),M=h(()=>Qe.url.pathname.includes("/admin")?"page":void 0);ne(n,{get href(){return i(u)},get onclick(){return I()},shape:"round",variant:"ghost",size:"small",color:"secondary",get"aria-current"(){return i(M)},class:"border dark:border-immich-dark-gray dark:bg-gray-500 dark:hover:bg-immich-dark-primary/50 hover:bg-immich-primary/10 dark:text-white",children:(U,l)=>{var R=pa(),q=r(R);ee(q,{get icon(){return Qt},size:"18","aria-hidden":!0});var G=s(q);t(R),T(E=>b(G,` ${E??""}`),[()=>g()("administration")]),o(U,R)},$$slots:{default:!0}})}};W($,n=>{a().isAdmin&&n(f)})}t(N),t(O);var D=s(O,2),w=r(D);ne(w,{class:"m-1 mx-4 rounded-none rounded-b-3xl bg-white p-3 dark:bg-immich-dark-primary/10",get onclick(){return e.onLogout},get leadingIcon(){return Jt},variant:"ghost",color:"secondary",children:(n,u)=>{Q();var M=Y();T(U=>b(M,U),[()=>g()("sign_out")]),o(n,M)},$$slots:{default:!0}});var C=s(w,2);C.__click=async()=>{I()(),i(c)&&await He.show(ga,{info:i(c)})};var F=r(C,!0);t(C),t(D),t(_),Fe(_,n=>yt?.(n)),T(n=>{b(z,a().name),b(H,a().email),b(F,n)},[()=>g()("support_and_feedback")]),Be(1,_,()=>Ce,()=>({duration:100})),Be(2,_,()=>Ce,()=>({duration:100})),o(A,_),re(),x()}we(["click"]);const xa="top-menu-button";var ya=j("<!> <!>",1),ka=j('<div class="pointer-events-none absolute border top-0 right-1 flex h-5 w-5 items-center justify-center rounded-full bg-primary text-[10px] font-bold text-light"> </div>'),$a=j('<nav id="dashboard-navbar" class="max-md:h-(--navbar-height-md) h-(--navbar-height) w-dvw text-sm"><!> <div><div class="flex flex-row gap-1 mx-4 items-center"><!> <a data-sveltekit-preload-data="hover"><!></a></div> <div class="flex justify-between gap-4 lg:gap-8 pe-6"><div class="hidden w-full max-w-5xl flex-1 tall:ps-0 sm:block"><!></div> <section class="flex place-items-center justify-end gap-1 md:gap-2 w-full sm:w-auto"><!> <!> <!> <div><div class="relative"><!> <!></div> <!></div> <!> <div><button type="button" class="flex ps-2"><!></button> <!></div></section></div></div></nav>');function Ji(A,e){te(e,!0);const a=()=>K(oe,"$t",P),g=()=>K(Ie,"$user",P),[P,x]=se();let I=ue(e,"noBorder",3,!1),c=ie(!1),_=ie(!1),O=ie(0);const v=h(()=>$e.notifications.length>0);Ne(async()=>{try{await $e.refresh()}catch(L){console.error("Failed to load notifications on mount",L)}});const m=h(()=>fr(a())),p=h(()=>i(m).Cast);var d=$a(),y=r(d);{let L=h(()=>a()("skip_to_content"));ia(y,{get text(){return i(L)}})}var S=s(y,2),z=r(S),B=r(z);{let L=h(()=>a()("main_menu"));ke(B,{id:xa,shape:"round",color:"secondary",variant:"ghost",size:"medium",get"aria-label"(){return i(L)},get icon(){return Zt},onclick:()=>{lt.toggle()},onmousedown:X=>{lt.isOpen&&X.stopPropagation()},class:"sidebar:hidden"})}var H=s(B,2),N=r(H);{let L=h(()=>Cr.isFullSidebar?"inline":"icon");je(N,{get variant(){return i(L)},class:"max-md:h-12"})}t(H),t(z);var k=s(z,2),$=r(k),f=r($);{var D=L=>{zr(L,{grayTheme:!0})};W(f,L=>{nt.value.search&&L(D)})}t($);var w=s($,2),C=r(w);{var F=L=>{{let X=h(()=>Le.search()),Z=h(()=>a()("go_to_search"));ke(L,{color:"secondary",shape:"round",variant:"ghost",size:"medium",get icon(){return er},get href(){return i(X)},id:"search-button",class:"sm:hidden",get"aria-label"(){return i(Z)}})}};W(C,L=>{nt.value.search&&L(F)})}var n=s(C,2);{var u=L=>{var X=ya(),Z=J(X);ne(Z,{get leadingIcon(){return at},get onclick(){return e.onUploadClick},class:"hidden lg:flex",variant:"ghost",size:"medium",color:"secondary",children:(Ke,Ze)=>{Q();var et=Y();T(Bt=>b(et,Bt),[()=>a()("upload")]),o(Ke,et)},$$slots:{default:!0}});var xe=s(Z,2);{let Ke=h(()=>a()("upload")),Ze=h(()=>a()("upload"));ke(xe,{color:"secondary",shape:"round",variant:"ghost",size:"medium",get onclick(){return e.onUploadClick},get title(){return i(Ke)},get"aria-label"(){return i(Ze)},get icon(){return at},class:"lg:hidden"})}o(L,X)};W(n,L=>{!Qe.url.pathname.includes("/admin")&&e.onUploadClick&&L(u)})}var M=s(n,2);Mr(M,{});var U=s(M,2),l=r(U),R=r(l);{let L=h(()=>i(v)?"primary":"secondary"),X=h(()=>i(v)?tr:pt),Z=h(()=>a()("notifications"));ke(R,{shape:"round",get color(){return i(L)},variant:"ghost",size:"medium",get icon(){return i(X)},onclick:()=>V(_,!i(_)),get"aria-label"(){return i(Z)}})}var q=s(R,2);{var G=L=>{var X=ka(),Z=r(X,!0);t(X),T(()=>b(Z,$e.notifications.length)),o(L,X)};W(q,L=>{i(v)&&L(G)})}t(l);var E=s(l,2);{var ae=L=>{ra(L,{})};W(E,L=>{i(_)&&L(ae)})}t(U),Fe(U,(L,X)=>st?.(L,X),()=>({onOutclick:()=>V(_,!1),onEscape:()=>V(_,!1)}));var ce=s(U,2);mr(ce,{get action(){return i(p)}});var be=s(ce,2),me=r(be);me.__click=()=>V(c,!i(c));var Te=r(me);Xt(Te,g,L=>{Xe(L,{get user(){return g()},size:"md",noTitle:!0,interactive:!0})}),t(me);var Re=s(me,2);{var qe=L=>{ba(L,{onLogout:()=>Br.logout(),onClose:()=>V(c,!1)})};W(Re,L=>{i(c)&&L(qe)})}t(be),Fe(be,(L,X)=>st?.(L,X),()=>({onOutclick:()=>V(c,!1),onEscape:()=>V(c,!1)})),t(w),t(k),t(S),t(d),T(L=>{ze(S,1,`grid h-full grid-cols-[--spacing(32)_auto] items-center py-2 sidebar:grid-cols-[--spacing(64)_auto] ${I()?"":"border-b"}`),he(H,"href",L),he(me,"title",`${g().name} (${g().email})`)},[()=>Le.photos()]),ur("innerWidth",L=>V(O,L,!0)),o(A,d),re(),x()}we(["click"]);const ct=()=>{const A=Mt(Se);if(!A)return!0;const{purchase:e}=A,a=Me.now(),g=Me.fromISO(e.hideBuyButtonUntil);return Number(a.diff(g,"days").days.toFixed(0))>0},wa=async A=>{const e=await $t({userPreferencesUpdateDto:{purchase:{showSupportBadge:A}}});Se.set(e)};var Pa=j('<div class="m-auto w-3/4 text-center flex flex-col place-content-center place-items-center my-6"><!> <p class="text-4xl mt-8 font-bold"> </p> <p class="text-lg mt-6"> </p> <div class="mb-4 w-full mt-6 border rounded-xl p-4 bg-gray-50 dark:bg-gray-900 dark:border-gray-600"><!></div> <div class="mt-6 w-full"><!></div></div>');function Ia(A,e){te(e,!0);const a=()=>K(oe,"$t",P),g=()=>K(Se,"$preferences",P),[P,x]=se();var I=Pa(),c=r(I);ee(c,{get icon(){return rr},class:"text-primary",size:"96"});var _=s(c,2),O=r(_,!0);t(_);var v=s(_,2),m=r(v,!0);t(v);var p=s(v,2),d=r(p);{let z=h(()=>a()("show_supporter_badge")),B=h(()=>a()("show_supporter_badge_description"));Tr(d,{get title(){return i(z)},get subtitle(){return i(B)},get onToggle(){return wa},get checked(){return g().purchase.showSupportBadge},set checked(H){vr(Se,tt(g).purchase.showSupportBadge=H,tt(g))}})}t(p);var y=s(p,2),S=r(y);ne(S,{fullWidth:!0,shape:"round",get onclick(){return e.onDone},children:(z,B)=>{Q();var H=Y();T(N=>b(H,N),[()=>a()("ok")]),o(z,H)},$$slots:{default:!0}}),t(y),t(I),T((z,B)=>{b(O,z),b(m,B)},[()=>a()("purchase_activated_title"),()=>a()("purchase_activated_subtitle")]),o(A,I),re(),x()}const Sa="https://buy.immich.app",za="https://pay.futo.org",Ua=async(A,e)=>{const g=(await yr())?.isAdmin&&A.search("IMSV")!==-1,P={licenseKey:A,activationKey:e};return g?hr({licenseKeyDto:P}):br({licenseKeyDto:P})},Aa=async A=>{const e=await fetch(new URL(`/api/v1/activate/${A}`,za).href);if(!e.ok)throw new Error("Failed to fetch activation key");return e.text()},At=A=>{const e=new URL("/",Sa);return e.searchParams.append("productId",A),e.searchParams.append("instanceUrl",Dr.value.externalDomain||globalThis.origin),e.href};var Ba=j('<div class="border border-gray-300 dark:border-gray-800 w-[min(375px,100%)] p-8 rounded-3xl bg-gray-100 dark:bg-gray-900"><div class="text-primary"><!> <p class="font-semibold text-lg mt-1"> </p></div> <div class="mt-4 dark:text-immich-gray"><p class="text-6xl font-bold">$25</p> <p> </p></div> <div class="flex flex-col justify-between h-50 dark:text-immich-gray"><div class="mt-6 flex flex-col gap-1"><div class="grid grid-cols-[36px_auto]"><!> <p class="self-center"> </p></div> <div class="grid grid-cols-[36px_auto]"><!> <p class="self-center"> </p></div> <div class="grid grid-cols-[36px_auto]"><!> <p class="self-center"> </p></div></div> <!></div></div>');function Ca(A,e){te(e,!1);const a=()=>K(oe,"$t",g),[g,P]=se();Ut();var x=Ba(),I=r(x),c=r(I);ee(c,{get icon(){return ar},size:"56"});var _=s(c,2),O=r(_,!0);t(_),t(I);var v=s(I,2),m=s(r(v),2),p=r(m,!0);t(m),t(v);var d=s(v,2),y=r(d),S=r(y),z=r(S);ee(z,{get icon(){return Pe},size:"24",class:"text-green-500 self-center"});var B=s(z,2),H=r(B,!0);t(B),t(S);var N=s(S,2),k=r(N);ee(k,{get icon(){return Pe},size:"24",class:"text-green-500 self-center"});var $=s(k,2),f=r($,!0);t($),t(N);var D=s(N,2),w=r(D);ee(w,{get icon(){return Pe},size:"24",class:"text-green-500 self-center"});var C=s(w,2),F=r(C,!0);t(C),t(D),t(y);var n=s(y,2);{let u=dt(()=>At(St.Client));ne(n,{shape:"round",get href(){return i(u)},fullWidth:!0,children:(M,U)=>{Q();var l=Y();T(R=>b(l,R),[()=>a()("purchase_button_select")]),o(M,l)},$$slots:{default:!0}})}t(d),t(x),T((u,M,U,l,R)=>{b(O,u),b(p,M),b(H,U),b(f,l),b(F,R)},[()=>a()("purchase_individual_title"),()=>a()("purchase_per_user"),()=>a()("purchase_individual_description_1"),()=>a()("purchase_lifetime_description"),()=>a()("purchase_individual_description_2")]),o(A,x),re(),P()}var Ma=j('<div class="border border-gray-300 dark:border-gray-800 w-[min(375px,100%)] p-8 rounded-3xl bg-gray-100 dark:bg-gray-900"><div class="text-primary"><!> <p class="font-semibold text-lg mt-1"> </p></div> <div class="mt-4 dark:text-immich-gray"><p class="text-6xl font-bold">$100</p> <p> </p></div> <div class="flex flex-col justify-between h-50 dark:text-immich-gray"><div class="mt-6 flex flex-col gap-1"><div class="grid grid-cols-[36px_auto]"><!> <p class="self-center"> </p></div> <div class="grid grid-cols-[36px_auto]"><!> <p class="self-center"> </p></div> <div class="grid grid-cols-[36px_auto]"><!> <p class="self-center"> </p></div></div> <!></div></div>');function La(A,e){te(e,!1);const a=()=>K(oe,"$t",g),[g,P]=se();Ut();var x=Ma(),I=r(x),c=r(I);ee(c,{get icon(){return ir},size:"56"});var _=s(c,2),O=r(_,!0);t(_),t(I);var v=s(I,2),m=s(r(v),2),p=r(m,!0);t(m),t(v);var d=s(v,2),y=r(d),S=r(y),z=r(S);ee(z,{get icon(){return Pe},size:"24",class:"text-green-500 self-center"});var B=s(z,2),H=r(B,!0);t(B),t(S);var N=s(S,2),k=r(N);ee(k,{get icon(){return Pe},size:"24",class:"text-green-500 self-center"});var $=s(k,2),f=r($,!0);t($),t(N);var D=s(N,2),w=r(D);ee(w,{get icon(){return Pe},size:"24",class:"text-green-500 self-center"});var C=s(w,2),F=r(C,!0);t(C),t(D),t(y);var n=s(y,2);{let u=dt(()=>At(St.Server));ne(n,{shape:"round",get href(){return i(u)},fullWidth:!0,children:(M,U)=>{Q();var l=Y();T(R=>b(l,R),[()=>a()("purchase_button_select")]),o(M,l)},$$slots:{default:!0}})}t(d),t(x),T((u,M,U,l,R)=>{b(O,u),b(p,M),b(H,U),b(f,l),b(F,R)},[()=>a()("purchase_server_title"),()=>a()("purchase_per_server"),()=>a()("purchase_server_description_1"),()=>a()("purchase_lifetime_description"),()=>a()("purchase_server_description_2")]),o(A,x),re(),P()}var Ta=j('<div class="mt-2"><p> </p> <br/> <p> </p> <div></div></div>'),Ra=j('<section><!> <!> <div class="flex flex-col sm:flex-row gap-6 mt-4 justify-between"><!> <!></div> <div class="mt-6"><p class="dark:text-immich-gray"> </p> <form class="mt-2 flex gap-2"><input class="immich-form-input w-full" id="purchaseKey" type="text" required placeholder="IMCL-0KEY-0CAN-00BE-FOUD-FROM-YOUR-EMAIL-INBX"/> <!></form></div></section>');function Da(A,e){te(e,!0);const a=()=>K(oe,"$t",g),[g,P]=se();let x=ue(e,"showTitle",3,!0),I=ue(e,"showMessage",3,!0),c=ie(""),_=ie(!1);const O=async()=>{try{V(c,i(c).trim(),!0),V(_,!0);const w=await Aa(i(c));await Ua(i(c),w),e.onActivate(),wt.setPurchaseStatus(!0)}catch(w){Ue(w,a()("purchase_failed_activation"))}finally{V(_,!1)}};var v=Ra(),m=r(v);{var p=w=>{$r(w,{color:"primary",tag:"h1",class:"text-4xl font-bold tracking-wider",children:(C,F)=>{Q();var n=Y();T(u=>b(n,u),[()=>a()("purchase_option_title")]),o(C,n)},$$slots:{default:!0}})};W(m,w=>{x()&&w(p)})}var d=s(m,2);{var y=w=>{var C=Ta(),F=r(C),n=r(F,!0);t(F);var u=s(F,4),M=r(u,!0);t(u),Q(2),t(C),T((U,l)=>{b(n,U),b(M,l)},[()=>a()("purchase_panel_info_1"),()=>a()("purchase_panel_info_2")]),o(w,C)};W(d,w=>{I()&&w(y)})}var S=s(d,2),z=r(S);La(z,{});var B=s(z,2);Ca(B,{}),t(S);var H=s(S,2),N=r(H),k=r(N,!0);t(N);var $=s(N,2),f=r($);sr(f);var D=s(f,2);ne(D,{type:"submit",children:(w,C)=>{var F=ve(),n=J(F);{var u=U=>{ht(U,{})},M=U=>{var l=Y();T(R=>b(l,R),[()=>a()("purchase_button_activate")]),o(U,l)};W(n,U=>{i(_)?U(u):U(M,!1)})}o(w,F)},$$slots:{default:!0}}),t($),t(H),t(v),T(w=>{b(k,w),f.disabled=i(_)},[()=>a()("purchase_input_suggestion")]),ye("submit",$,O),Rr(f,()=>i(c),w=>V(c,w)),o(A,v),re(),P()}function Oa(A,e){let a=ie(!1);Ee(A,{title:" ",get onClose(){return e.onClose},size:"large",children:(g,P)=>{Ve(g,{children:(x,I)=>{var c=ve(),_=J(c);{var O=m=>{Ia(m,{get onDone(){return e.onClose}})},v=m=>{Da(m,{onActivate:()=>{V(a,!0)},showMessage:!1})};W(_,m=>{i(a)?m(O):m(v,!1)})}o(x,c)},$$slots:{default:!0}})},$$slots:{default:!0}})}var ja=j('<button class="w-full mt-2" type="button"><!></button>'),Fa=j('<button type="button" class="p-2 flex justify-between place-items-center place-content-center border border-immich-primary/20 dark:border-immich-dark-primary/10 mt-2 rounded-lg shadow-md dark:bg-immich-dark-primary/10 min-w-52 w-full"><div class="flex justify-between w-full place-items-center place-content-center"><div class="flex place-items-center place-content-center gap-1"><!> <p class="flex text-primary font-medium"> </p></div> <div><!></div></div></button>'),Ha=j('<dialog open class="hidden sidebar:block w-125 absolute bottom-19 start-64 bg-gray-50 dark:border-gray-800 border border-gray-200 dark:bg-immich-dark-gray dark:text-white text-black rounded-3xl shadow-2xl px-8 py-6 svelte-4dkbrh"><div class="flex justify-between place-items-center"><div class="h-10 w-10"><!></div> <!></div> <h1 class="text-lg font-medium my-3 text-primary"> </h1> <div class="text-gray-800 dark:text-white my-4"><p> </p> <br/> <p> </p></div> <!> <div class="mt-3 flex gap-4"><!> <!></div></dialog>'),Na=j('<div class="license-status ps-4 text-sm"><!></div> <!>',1);function Wa(A,e){te(e,!0);const a=()=>K(oe,"$t",x),g=()=>K(m,"$isPurchased",x),P=()=>K(Se,"$preferences",x),[x,I]=se();let c=ie(!1),_=ie(!1),O=ie(!1),v=ie(vt(ct()));const{isPurchased:m}=wt,p=async()=>{await He.show(Oa),V(c,!1)},d=()=>{V(c,!0),V(O,!0)},y=async $=>{const f=new Ir;$?f.setFullYear(2124):f.setDate(f.getDate()+30);try{const D=await $t({userPreferencesUpdateDto:{purchase:{hideBuyButtonUntil:f.toISOString()}}});Se.set(D),V(v,ct(),!0),V(c,!1)}catch(D){Ue(D,a()("errors.error_hiding_buy_button"))}};ut(()=>{i(c)&&!i(_)&&!i(O)&&setTimeout(()=>{!i(_)&&!i(O)&&V(c,!1)},300)});var S=Na(),z=J(S),B=r(z);{var H=$=>{var f=ja();f.__click=()=>xt(Le.userSettings({isOpen:Lr.PURCHASE_SETTINGS}));var D=r(f);Kr(D,{size:"small",effect:"always"}),t(f),o($,f)},N=$=>{var f=ve(),D=J(f);{var w=C=>{var F=Fa();F.__click=p,F.__mouseover=d;var n=r(F),u=r(n),M=r(u);je(M,{variant:"icon",size:"tiny"});var U=s(M,2),l=r(U,!0);t(U),t(u);var R=s(u,2),q=r(R);ee(q,{get icon(){return Ae},class:"hidden sidebar:flex text-primary font-medium",size:"18"}),t(R),t(n),t(F),T(G=>b(l,G),[()=>a()("purchase_button_buy_immich")]),ye("mouseleave",F,()=>V(O,!1)),ye("focus",F,d),ye("blur",F,()=>V(O,!1)),o(C,F)};W(D,C=>{!g()&&i(v)&&kr()>14&&C(w)},!0)}o($,f)};W(B,$=>{g()&&P().purchase.showSupportBadge?$(H):$(N,!1)})}t(z);var k=s(z,2);Ar(k,{target:"body",children:($,f)=>{var D=ve(),w=J(D);{var C=F=>{var n=Ha();n.__mouseover=()=>V(_,!0);var u=r(n),M=r(u),U=r(M);je(U,{variant:"icon",size:"small"}),t(M);var l=s(M,2);{let L=h(()=>a()("close"));ke(l,{shape:"round",color:"secondary",variant:"ghost",get icon(){return or},onclick:()=>{V(c,!1)},get"aria-label"(){return i(L)},size:"medium",class:"text-immich-dark-gray/85 dark:text-immich-gray"})}t(u);var R=s(u,2),q=r(R,!0);t(R);var G=s(R,2),E=r(G),ae=r(E,!0);t(E);var ce=s(E,4),be=r(ce,!0);t(ce),t(G);var me=s(G,2);ne(me,{shape:"round",class:"mt-2",fullWidth:!0,onclick:p,children:(L,X)=>{Q();var Z=Y();T(xe=>b(Z,xe),[()=>a()("purchase_button_buy_immich")]),o(L,Z)},$$slots:{default:!0}});var Te=s(me,2),Re=r(Te);ne(Re,{shape:"round",size:"small",fullWidth:!0,color:"secondary",variant:"ghost",onclick:()=>y(!0),children:(L,X)=>{Q();var Z=Y();T(xe=>b(Z,xe),[()=>a()("purchase_button_never_show_again")]),o(L,Z)},$$slots:{default:!0}});var qe=s(Re,2);ne(qe,{shape:"round",size:"small",fullWidth:!0,color:"secondary",variant:"ghost",onclick:()=>y(!1),children:(L,X)=>{Q();var Z=Y();T(xe=>b(Z,xe),[()=>a()("purchase_button_reminder")]),o(L,Z)},$$slots:{default:!0}}),t(Te),t(n),T((L,X,Z)=>{b(q,L),b(ae,X),b(be,Z)},[()=>a()("purchase_panel_title"),()=>a()("purchase_panel_info_1"),()=>a()("purchase_panel_info_2")]),ye("mouseleave",n,()=>V(_,!1)),ye("focus",n,()=>V(_,!0)),ye("blur",n,()=>V(_,!1)),Be(3,n,()=>Ce,()=>({duration:150})),o(F,n)};W(w,F=>{i(c)&&F(C)})}o($,D)},$$slots:{default:!0}}),o(A,S),re(),I()}we(["click","mouseover"]);class Ea{#e=ie();get value(){return i(this.#e)}set value(e){V(this.#e,e,!0)}constructor(){Or.on({ReleaseEvent:e=>this.value=e})}}const Va=new Ea;var qa=j("<div><!> <!></div>");function de(A,e){var a=qa(),g=r(a);zt(g,{size:"small",color:"primary",get for(){return e.id},children:(x,I)=>{Q();var c=Y();T(()=>b(c,e.title)),o(x,c)},$$slots:{default:!0}});var P=s(g,2);pe(P,{size:"small",color:"muted",get id(){return e.id},children:(x,I)=>{var c=ve(),_=J(c);{var O=m=>{bt(m,{get href(){return e.versionHref},children:(p,d)=>{Q();var y=Y();T(()=>b(y,e.version)),o(p,y)},$$slots:{default:!0}})},v=m=>{var p=Y();T(()=>b(p,e.version)),o(m,p)};W(_,m=>{e.versionHref?m(O):m(v,!1)})}o(x,c)},$$slots:{default:!0}}),t(a),T(()=>ze(a,1,_t(e.class))),o(A,a)}var Ka=j('<li><span class="immich-form-label pb-2 text-xs" id="version-history"> </span></li>'),Ga=j('<div class="flex flex-col sm:grid sm:grid-cols-2 gap-4"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <div class="col-span-full"><!> <ul id="version-history" class="list-none"></ul></div></div>');function Ya(A,e){te(e,!0);const a=()=>K(oe,"$t",P),g=()=>K(It,"$locale",P),[P,x]=se();{let I=h(()=>a()("about"));Ee(A,{get title(){return i(I)},get onClose(){return e.onClose},children:(c,_)=>{Ve(c,{children:(O,v)=>{var m=Ga(),p=r(m);{var d=l=>{{let R=h(()=>a()("main_branch_warning"));jr(l,{color:"warning",get title(){return i(R)},class:"col-span-full",size:"small"})}};W(p,l=>{e.info.sourceRef==="main"&&e.info.repository==="immich-app/immich"&&l(d)})}var y=s(p,2);de(y,{id:"immich",title:"Immich",get version(){return e.info.version},get versionHref(){return e.info.versionUrl}});var S=s(y,2);de(S,{id:"exif",title:"ExifTool",get version(){return e.info.exiftool}});var z=s(S,2);de(z,{id:"nodejs",title:"Node.js",get version(){return e.info.nodejs}});var B=s(z,2);de(B,{id:"libvips",title:"Libvips",get version(){return e.info.libvips}});var H=s(B,2);{let l=h(()=>(e.info.imagemagick?.length||0)>10?"col-span-2":"");de(H,{id:"imagemagick",title:"ImageMagick",get version(){return e.info.imagemagick},get class(){return i(l)}})}var N=s(H,2);{let l=h(()=>(e.info.ffmpeg?.length||0)>10?"col-span-2":"");de(N,{id:"ffmpeg",title:"FFmpeg",get version(){return e.info.ffmpeg},get class(){return i(l)}})}var k=s(N,2);{var $=l=>{{let R=h(()=>a()("repository"));de(l,{id:"repository",get title(){return i(R)},get version(){return e.info.repository},get versionHref(){return e.info.repositoryUrl}})}};W(k,l=>{e.info.repository&&e.info.repositoryUrl&&l($)})}var f=s(k,2);{var D=l=>{{let R=h(()=>a()("source")),q=h(()=>e.info.sourceRef),G=h(()=>e.info.sourceCommit.slice(0,9));de(l,{id:"source",get title(){return i(R)},get version(){return`${i(q)??""}@${i(G)??""}`},get versionHref(){return e.info.sourceUrl}})}};W(f,l=>{e.info.sourceRef&&e.info.sourceCommit&&e.info.sourceUrl&&l(D)})}var w=s(f,2);{var C=l=>{{let R=h(()=>a()("build"));de(l,{id:"build",get title(){return i(R)},get version(){return e.info.build},get versionHref(){return e.info.buildUrl}})}};W(w,l=>{e.info.build&&e.info.buildUrl&&l(C)})}var F=s(w,2);{var n=l=>{{let R=h(()=>a()("build_image"));de(l,{id:"build-image",get title(){return i(R)},get version(){return e.info.buildImage},get versionHref(){return e.info.buildImageUrl}})}};W(F,l=>{e.info.buildImage&&e.info.buildImage&&l(n)})}var u=s(F,2),M=r(u);zt(M,{size:"small",color:"primary",for:"version-history",children:(l,R)=>{Q();var q=Y();T(G=>b(q,G),[()=>a()("version_history")]),o(l,q)},$$slots:{default:!0}});var U=s(M,2);We(U,21,()=>e.versions.slice(0,5),l=>l.id,(l,R)=>{const q=h(()=>Me.fromISO(i(R).createdAt));var G=Ka(),E=r(G),ae=r(E,!0);t(E),t(G),T((ce,be)=>{he(E,"title",ce),b(ae,be)},[()=>i(q).toLocaleString(Me.DATETIME_SHORT_WITH_SECONDS,{locale:g()}),()=>a()("version_history_item",{values:{version:i(R).version,date:i(q).toLocaleString({month:"short",day:"numeric",year:"numeric"},{locale:g()})}})]),o(l,G)}),t(U),t(u),t(m),o(O,m)},$$slots:{default:!0}})},$$slots:{default:!0}})}re(),x()}var Ja=j('<div class="flex gap-2 place-items-center place-content-center"><div class="w-1.75 h-1.75 bg-green-500 rounded-full"></div> <p class="dark:text-immich-gray"> </p></div>'),Qa=j('<div class="flex gap-2 place-items-center place-content-center"><div class="w-1.75 h-1.75 bg-red-500 rounded-full"></div> <p class="text-red-500"> </p></div>'),Xa=j("<!> ",1),Za=j('<button type="button" class="dark:text-immich-gray flex gap-1 place-items-center place-content-center"><!></button>'),ei=j('<p class="text-red-500"> </p>'),ti=j('<a target="_blank" rel="noopener noreferrer" class="mt-3 p-2.5 ms-4 rounded-lg text-sm min-w-52 border border-gray-200/50 dark:border-gray-700/50 bg-white/50 dark:bg-gray-800/50 hover:border-immich-primary/40 dark:hover:border-immich-dark-primary/40 hover:bg-immich-primary/5 dark:hover:bg-immich-dark-primary/5 transition-all duration-200 group block"><div class="flex items-center justify-between gap-2"><div class="flex items-center gap-2"><!> <!></div> <span class="text-[11px] text-gray-500 dark:text-gray-400 group-hover:text-immich-primary dark:group-hover:text-immich-dark-primary transition-colors opacity-70 group-hover:opacity-100"> </span></div></a>'),ri=j('<div class="text-sm flex md:flex ps-5 pe-1 place-items-center place-content-center justify-between min-w-52 overflow-hidden dark:text-immich-dark-fg"><!> <div class="flex justify-between justify-items-center"><!></div></div> <!>',1);function ai(A,e){te(e,!0);const a=()=>K(_,"$serverVersion",I),g=()=>K(Ie,"$user",I),P=()=>K(O,"$connected",I),x=()=>K(oe,"$t",I),[I,c]=se(),{serverVersion:_,connected:O}=wr;let v=ie(void 0),m=ie(vt([]));Ne(async()=>{if(le.aboutInfo&&le.versions&&a()){V(v,le.aboutInfo,!0),V(m,le.versions,!0);return}await Pt(),await(async n=>{var u=Lt(n,2);V(v,u[0],!0),V(m,u[1],!0)})(await Promise.all([kt(),xr()])),le.aboutInfo=i(v),le.versions=i(m)});let p=h(()=>i(v)?.sourceRef==="main"&&i(v).repository==="immich-app/immich"),d=h(()=>a()?`v${a().major}.${a().minor}.${a().patch}`:null);const y=n=>{if(!n||!n?.isAvailable||!g().isAdmin)return;const u=ot(n.releaseVersion);if(ot(n.serverVersion)!==u)return{availableVersion:u,releaseUrl:`https://github.com/immich-app/immich/releases/tag/${u}`}},S=h(()=>y(Va.value));var z=ri(),B=J(z),H=r(B);{var N=n=>{var u=Ja(),M=s(r(u),2),U=r(M,!0);t(M),t(u),T(l=>b(U,l),[()=>x()("server_online")]),o(n,u)},k=n=>{var u=Qa(),M=s(r(u),2),U=r(M,!0);t(M),t(u),T(l=>b(U,l),[()=>x()("server_offline")]),o(n,u)};W(H,n=>{P()?n(N):n(k,!1)})}var $=s(H,2),f=r($);{var D=n=>{var u=Za();u.__click=()=>i(v)&&He.show(Ya,{versions:i(m),info:i(v)});var M=r(u);{var U=R=>{var q=Xa(),G=J(q);ee(G,{get icon(){return lr},size:"1.5em",color:"#ffcc4d"});var E=s(G);T(()=>b(E,` ${i(v)?.sourceRef??""}`)),o(R,q)},l=R=>{var q=Y();T(()=>b(q,i(d))),o(R,q)};W(M,R=>{i(p)?R(U):R(l,!1)})}t(u),o(n,u)},w=n=>{var u=ei(),M=r(u,!0);t(u),T(U=>b(M,U),[()=>x()("unknown")]),o(n,u)};W(f,n=>{P()&&i(d)?n(D):n(w,!1)})}t($),t(B);var C=s(B,2);{var F=n=>{var u=ti(),M=r(u),U=r(M),l=r(U);ee(l,{get icon(){return nr},size:"16",class:"text-immich-primary dark:text-immich-dark-primary opacity-80"});var R=s(l,2);pe(R,{size:"tiny",fontWeight:"medium",class:"text-gray-700 dark:text-gray-300",children:(E,ae)=>{Q();var ce=Y();T(()=>b(ce,i(S).availableVersion)),o(E,ce)},$$slots:{default:!0}}),t(U);var q=s(U,2),G=r(q);t(q),t(M),t(u),T(E=>{he(u,"href",i(S).releaseUrl),b(G,`${E??""}!`)},[()=>x()("new_update")]),o(n,u)};W(C,n=>{i(S)&&n(F)})}o(A,z),re(),c()}we(["click"]);var ii=j('<p class="text-gray-500 dark:text-gray-300"> </p> <div class="mt-4 h-1.75 w-full rounded-full bg-gray-200 dark:bg-gray-700"><div></div></div>',1),si=j('<div class="mt-2"><!></div>'),oi=j('<div class="storage-status p-4 bg-gray-100 dark:bg-immich-dark-primary/10 ms-4 rounded-lg text-sm min-w-52"><p class="font-medium text-immich-dark-gray dark:text-white mb-2"> </p> <!></div>');function ni(A,e){te(e,!0);const a=()=>K(Ie,"$user",x),g=()=>K(oe,"$t",x),P=()=>K(It,"$locale",x),[x,I]=se();let c=ie(""),_=h(()=>a()?.quotaSizeInBytes!==null),O=h(()=>(i(_)?a()?.quotaSizeInBytes:le.serverInfo?.diskSizeRaw)||0),v=h(()=>(i(_)?a()?.quotaUsageInBytes:le.serverInfo?.diskUseRaw)||0),m=h(()=>Math.min(Math.round(i(v)/i(O)*100),100));const p=()=>{V(c,d(),!0)},d=()=>i(m)>=95?"bg-red-500":i(m)>80?"bg-yellow-500":"bg-primary";ut(()=>{a()&&p()}),Ne(async()=>{le.serverInfo&&a()||await Pt()});var y=oi(),S=r(y),z=r(S,!0);t(S);var B=s(S,2);{var H=k=>{var $=ii(),f=J($),D=r(f,!0);t(f);var w=s(f,2),C=r(w);t(w),T(F=>{b(D,F),ze(C,1,`h-1.75 rounded-full ${i(c)??""}`),cr(C,`width: ${i(m)??""}%`)},[()=>g()("storage_usage",{values:{used:De(i(v),P()),available:De(i(O),P())}})]),o(k,$)},N=k=>{var $=si(),f=r($);ht(f,{}),t($),o(k,$)};W(B,k=>{le.serverInfo?k(H):k(N,!1)})}t(y),T((k,$)=>{he(y,"title",k),b(z,$)},[()=>g()("storage_usage",{values:{used:De(i(v),P(),3),available:De(i(O),P(),3)}}),()=>g()("storage")]),o(A,y),re(),I()}var li=j('<div class="mt-auto"><!></div> <!> <div class="mb-6 mt-2"><!></div>',1);function Qi(A){var e=li(),a=J(e),g=r(a);ni(g,{}),t(a);var P=s(a,2);Wa(P,{});var x=s(P,2),I=r(x);ai(I,{}),t(x),o(A,e)}export{Qi as B,Er as N,Ia as P,ia as S,Ua as a,Da as b,Ji as c,Aa as g,xa as m,wa as s};
