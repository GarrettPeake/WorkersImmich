import"./DsnmJJEf.js";import{p as tt,h as m,i as et,V as nt,g as t,ae as ot,$ as rt,c as b,r as C,s as it,a as at,j as u,f as st,b as ct,u as M}from"./D0CSSuTl.js";import{e as w}from"./C8vxa4mj.js";import{a as x,c as ut,f as O}from"./Bd1JH_Ov.js";import{s as lt}from"./CMI33r64.js";import{i as dt}from"./D8NIUdeB.js";import{a as E}from"./IOA7-Wrn.js";import{h as ft,I as gt}from"./D-UYCH9y.js";import{p as a,d as y,c as mt,s as vt,a as ht,r as pt}from"./zonMEKN6.js";import{g as _t,C as bt,l as Ct,a as xt,c as yt}from"./BitKOkE8.js";import{s as kt}from"./BVZhy_zG.js";import{o as It,s as k}from"./B2VKg7zy.js";import{g as zt}from"./DcdhlkRn.js";var Bt=O("<div><!></div>"),St=O("<div><div><!></div> <!></div>");function Nt(R,n){tt(n,!0);const I=()=>ht(k,"$selectedIdStore",A),[A,F]=vt();let s=a(n,"align",3,"top-left"),T=a(n,"direction",3,"right"),V=a(n,"color",3,"secondary"),j=a(n,"size",3,void 0),q=a(n,"variant",3,"ghost"),L=a(n,"buttonClass",3,void 0),N=a(n,"hideContent",3,!1),G=pt(n,["$$slots","$$events","$$legacy","icon","title","align","direction","color","size","variant","buttonClass","hideContent","children","offset"]),o=m(!1),d=m(et({x:0,y:0})),f=m(void 0),c=m(void 0);const z=zt(),v=`context-menu-button-${z}`,B=`context-menu-${z}`,S=e=>{let r=s();Ct.rtl&&(s().includes("left")?r=s().replace("left","right"):s().includes("right")&&(r=s().replace("right","left"))),u(d,xt(e,r),!0),u(o,!0),t(f)?.focus()},H=e=>{if(t(o)){i();return}S(e)},J=e=>{t(o)&&e.stopPropagation(),i()},D=()=>{!t(o)||!t(c)||u(d,_t(t(c).getBoundingClientRect(),s()),!0)},i=()=>{t(o)&&(U(),u(o,!1),y(k,void 0))},K=()=>{i()},Q=e=>{if(!t(o))return;const r=e.target;t(c)?.contains(r)||i()},U=()=>{t(c)?.querySelector(`#${v}`)?.focus()};nt(()=>{t(o)&&y(It,K)});var l=St();w("resize",ot,D),w("click",rt,Q),ft(l,()=>({onresize:D,...G}));var g=b(l),W=b(g);gt(W,{get color(){return V()},get icon(){return n.icon},get size(){return j()},shape:"round",get variant(){return q()},get"aria-label"(){return n.title},get"aria-controls"(){return B},get"aria-expanded"(){return t(o)},"aria-haspopup":!0,get class(){return L()},get id(){return v},onclick:H}),C(g),mt(g,e=>u(c,e),()=>t(c));var X=it(g,2);{var Y=e=>{var r=Bt(),Z=b(r);{let h=M(()=>t(d).x-(n.offset?.x??0)),p=M(()=>t(d).y+(n.offset?.y??0));bt(Z,{get direction(){return T()},get ariaActiveDescendant(){return I()},get ariaLabelledBy(){return v},get id(){return B},get isVisible(){return t(o)},get x(){return t(h)},get y(){return t(p)},get menuElement(){return t(f)},set menuElement(_){u(f,_,!0)},children:(_,Dt)=>{var P=ut(),$=st(P);lt($,()=>n.children??ct),x(_,P)},$$slots:{default:!0}})}C(r),E(r,(h,p)=>kt?.(h,p),()=>[{shortcut:{key:"Tab"},onShortcut:i,preventDefault:!1},{shortcut:{key:"Tab",shift:!0},onShortcut:i,preventDefault:!1}]),x(e,r)};dt(X,e=>{(t(o)||!N())&&e(Y)})}C(l),E(l,(e,r)=>yt?.(e,r),()=>({closeDropdown:i,container:t(f),isOpen:t(o),onEscape:J,openDropdown:S,selectedId:I(),selectionChanged:e=>y(k,e)})),x(R,l),at(),F()}export{Nt as B};
