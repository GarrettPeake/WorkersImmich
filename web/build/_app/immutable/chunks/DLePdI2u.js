import"./BP6NvnZ7.js";import{i as xe}from"./7tRQeUtl.js";import{J as Z,w as Ee,g as p,a5 as ie,D as Te,K as re,N as Se,bh as ge,al as Ie,bi as De,a9 as oe,bj as Ae,bk as Ne,v as ze,x as F,B as j,S as Oe,y as He,m as Me,b7 as se,z as Fe,H as Pe,A as le,C as $,O as W,Q as Re,bc as Ke,bl as I,F as he,I as me,bm as ee,a4 as Be,bn as Je,bb as Le,G as Ve,R as We,p as Q,f as x,b as V,a as U,c as R,r as H,s as q,u as G,t as qe,h as Ge,i as Ye}from"./D0CSSuTl.js";import{s as Qe,m as Ue,u as Xe}from"./C8vxa4mj.js";import"./DsnmJJEf.js";import{c as S,a as y,f as X,t as Ze}from"./Bd1JH_Ov.js";import{i as z}from"./D8NIUdeB.js";import{p as T,e as be,r as te,b as Y}from"./zonMEKN6.js";import{dI as je,bJ as P,n as ae,o as _e,h as pe,i as ye,F as de,ad as $e,G as er,a as rr,T as fe,x as ar,y as nr,W as sr,cB as tr,dJ as ir,dK as or,dL as ce,H as lr,l as B,cJ as dr}from"./D-UYCH9y.js";import{s as K}from"./CMI33r64.js";function Kr(r,e){return e}function fr(r,e,a){for(var o=[],u=e.length,d,s=e.length,i=0;i<u;i++){let m=e[i];me(m,()=>{if(d){if(d.pending.delete(m),d.done.add(m),d.pending.size===0){var g=r.outrogroups;ne(se(d.done)),g.delete(d),g.size===0&&(r.outrogroups=null)}}else s-=1},!1)}if(s===0){var t=o.length===0&&a!==null;if(t){var f=a,l=f.parentNode;Le(l),l.append(f),r.items.clear()}ne(e,!t)}else d={pending:new Set(e),done:new Set},(r.outrogroups??=new Set).add(d)}function ne(r,e=!0){for(var a=0;a<r.length;a++)Ve(r[a],e)}var ue;function cr(r,e,a,o,u,d=null){var s=r,i=new Map,t=(e&ge)!==0;if(t){var f=r;s=F?j(Oe(f)):f.appendChild(Z())}F&&He();var l=null,m=Ie(()=>{var c=a();return Me(c)?c:c==null?[]:se(c)}),g,v=!0;function C(){n.fallback=l,ur(n,g,s,e,o),l!==null&&(g.length===0?(l.f&I)===0?he(l):(l.f^=I,L(l,null,s)):me(l,()=>{l=null}))}var E=Ee(()=>{g=p(m);var c=g.length;let D=!1;if(F){var A=Fe(s)===Pe;A!==(c===0)&&(s=le(),j(s),$(!1),D=!0)}for(var h=new Set,b=Te,k=Se(),w=0;w<c;w+=1){F&&W.nodeType===Re&&W.data===Ke&&(s=W,D=!0,$(!1));var O=g[w],M=o(O,w),_=v?null:i.get(M);_?(_.v&&ie(_.v,O),_.i&&ie(_.i,w),k&&b.skipped_effects.delete(_.e)):(_=vr(i,v?s:ue??=Z(),O,M,w,u,e,a),v||(_.e.f|=I),i.set(M,_)),h.add(M)}if(c===0&&d&&!l&&(v?l=re(()=>d(s)):(l=re(()=>d(ue??=Z())),l.f|=I)),F&&c>0&&j(le()),!v)if(k){for(const[Ce,ke]of i)h.has(Ce)||b.skipped_effects.add(ke.e);b.oncommit(C),b.ondiscard(()=>{})}else C();D&&$(!0),p(m)}),n={effect:E,items:i,outrogroups:null,fallback:l};v=!1,F&&(s=W)}function ur(r,e,a,o,u){var d=(o&Je)!==0,s=e.length,i=r.items,t=r.effect.first,f,l=null,m,g=[],v=[],C,E,n,c;if(d)for(c=0;c<s;c+=1)C=e[c],E=u(C,c),n=i.get(E).e,(n.f&I)===0&&(n.nodes?.a?.measure(),(m??=new Set).add(n));for(c=0;c<s;c+=1){if(C=e[c],E=u(C,c),n=i.get(E).e,r.outrogroups!==null)for(const _ of r.outrogroups)_.pending.delete(n),_.done.delete(n);if((n.f&I)!==0)if(n.f^=I,n===t)L(n,null,a);else{var D=l?l.next:t;n===r.effect.last&&(r.effect.last=n.prev),n.prev&&(n.prev.next=n.next),n.next&&(n.next.prev=n.prev),N(r,l,n),N(r,n,D),L(n,D,a),l=n,g=[],v=[],t=l.next;continue}if((n.f&ee)!==0&&(he(n),d&&(n.nodes?.a?.unfix(),(m??=new Set).delete(n))),n!==t){if(f!==void 0&&f.has(n)){if(g.length<v.length){var A=v[0],h;l=A.prev;var b=g[0],k=g[g.length-1];for(h=0;h<g.length;h+=1)L(g[h],A,a);for(h=0;h<v.length;h+=1)f.delete(v[h]);N(r,b.prev,k.next),N(r,l,b),N(r,k,A),t=A,l=k,c-=1,g=[],v=[]}else f.delete(n),L(n,t,a),N(r,n.prev,n.next),N(r,n,l===null?r.effect.first:l.next),N(r,l,n),l=n;continue}for(g=[],v=[];t!==null&&t!==n;)(f??=new Set).add(t),v.push(t),t=t.next;if(t===null)continue}(n.f&I)===0&&g.push(n),l=n,t=n.next}if(r.outrogroups!==null){for(const _ of r.outrogroups)_.pending.size===0&&(ne(se(_.done)),r.outrogroups?.delete(_));r.outrogroups.size===0&&(r.outrogroups=null)}if(t!==null||f!==void 0){var w=[];if(f!==void 0)for(n of f)(n.f&ee)===0&&w.push(n);for(;t!==null;)(t.f&ee)===0&&t!==r.fallback&&w.push(t),t=t.next;var O=w.length;if(O>0){var M=(o&ge)!==0&&s===0?a:null;if(d){for(c=0;c<O;c+=1)w[c].nodes?.a?.measure();for(c=0;c<O;c+=1)w[c].nodes?.a?.fix()}fr(r,w,M)}}d&&Be(()=>{if(m!==void 0)for(n of m)n.nodes?.a?.apply()})}function vr(r,e,a,o,u,d,s,i){var t=(s&Ae)!==0?(s&Ne)===0?ze(a,!1,!1):oe(a):null,f=(s&De)!==0?oe(u):null;return{v:t,i:f,e:re(()=>(d(e,t??a,f??u,i),()=>{r.delete(o)}))}}function L(r,e,a){if(r.nodes)for(var o=r.nodes.start,u=r.nodes.end,d=e&&(e.f&I)===0?e.nodes.start:a;o!==null;){var s=We(o);if(d.before(o),o===u)return;o=s}}function N(r,e,a){e===null?r.effect.first=a:e.next=a,a===null?r.effect.last=e:a.prev=e}function gr(r,e){Q(e,!0);let a=T(e,"delayDuration",3,700),o=T(e,"disableCloseOnTriggerClick",3,!1),u=T(e,"disableHoverableContent",3,!1),d=T(e,"disabled",3,!1),s=T(e,"ignoreNonKeyboardFocus",3,!1),i=T(e,"skipDelayDuration",3,300);je.create({delayDuration:P(()=>a()),disableCloseOnTriggerClick:P(()=>o()),disableHoverableContent:P(()=>u()),disabled:P(()=>d()),ignoreNonKeyboardFocus:P(()=>s()),skipDelayDuration:P(()=>i())});var t=S(),f=x(t);K(f,()=>e.children??V),y(r,t),U()}function hr(r,e){var a=S(),o=x(a);be(o,()=>gr,(u,d)=>{d(u,{disableCloseOnTriggerClick:!0,ignoreNonKeyboardFocus:!0,get delayDuration(){return e.delayDuration},children:(s,i)=>{var t=S(),f=x(t);K(f,()=>e.children??V),y(s,t)},$$slots:{default:!0}})}),y(r,a)}var mr=X("<div><!></div>");function br(r,e){Q(e,!0);let a=T(e,"color",3,"primary"),o=T(e,"shape",3,"semi-round"),u=T(e,"size",3,"medium"),d=te(e,["$$slots","$$events","$$legacy","color","shape","size","class","children"]);const s=ae({base:"bg-light text-dark overflow-hidden border py-1.5 shadow-xs transition-all",variants:{color:{primary:"border-primary-100 bg-primary-50 dark:bg-primary-100 dark:border-primary-200",secondary:"border-light-200 bg-light-100 dark:bg-light-200 dark:border-light-300",success:"border-success-100 bg-success-50 dark:bg-success-100 dark:border-success-200",info:"border-info-100 bg-info-50 dark:bg-info-100 dark:border-info-200",warning:"border-warning-100 bg-warning-50 dark:bg-warning-100 dark:border-warning-200",danger:"border-danger-100 bg-danger-50 dark:bg-danger-100 dark:border-danger-200"},shape:_e.shape,size:{tiny:"w-64",small:"w-72",medium:"w-xs",large:"w-sm",giant:"w-lg",full:"w-full"},roundedSize:{tiny:"rounded-lg",small:"rounded-lg",medium:"rounded-xl",large:"rounded-xl",giant:"rounded-2xl"}}});var i=mr();pe(i,f=>({class:f,...d}),[()=>ye(s({shape:o(),size:u(),color:a(),roundedSize:o()==="semi-round"?"medium":void 0}),e.class)]);var t=R(i);K(t,()=>e.children??V),H(i),de(6,i,()=>$e,()=>({duration:100})),de(5,i,()=>er,()=>({y:200,duration:250})),y(r,i),U()}const ve=(r,e=V)=>{var a=S(),o=x(a);{var u=s=>{var i=Ze();qe(()=>Qe(i,e())),y(s,i)},d=s=>{var i=S(),t=x(i);K(t,e),y(s,i)};z(o,s=>{typeof e()=="string"?s(u):s(d,!1)})}y(r,a)};var _r=X('<div class="flex items-center"><!></div>'),pr=X('<div class="flex items-center px-3"><div class="flex items-center"><!></div> <div class="ms-1 flex grow justify-between"><div class="flex flex-col p-2"><!> <!></div> <!></div></div> <!>',1);function yr(r,e){Q(e,!0);let a=T(e,"color",3,"primary");const o=G(()=>nr({icons:{primary:ce,danger:or,info:ir,warning:tr,success:sr},color:a(),override:e.icon,fallback:ce})),u=ae({base:"h-8 w-8 shrink-0 rounded-xl py-1.75 text-white",variants:{color:{primary:"bg-primary dark:bg-primary-200",secondary:"bg-dark dark:bg-light-300",success:"bg-success dark:bg-success-200",info:"bg-info dark:text-info-50",warning:"bg-warning dark:text-warning-50",danger:"bg-danger dark:text-danger-50"}}}),d=ae({variants:{color:_e.textColor}});var s=pr(),i=x(s),t=R(i),f=R(t);{var l=h=>{{let b=G(()=>u({color:a()}));rr(h,{get icon(){return p(o)},get class(){return p(b)},size:"18"})}};z(f,h=>{p(o)&&h(l)})}H(t);var m=q(t,2),g=R(m),v=R(g);{var C=h=>{{let b=G(()=>d({color:a()}));fe(h,{fontWeight:"semi-bold",get class(){return p(b)},children:(k,w)=>{ve(k,()=>e.title)},$$slots:{default:!0}})}};z(v,h=>{e.title&&h(C)})}var E=q(v,2);{var n=h=>{fe(h,{size:"small",children:(b,k)=>{ve(b,()=>e.description)},$$slots:{default:!0}})};z(E,h=>{e.description&&h(n)})}H(g);var c=q(g,2);{var D=h=>{var b=_r(),k=R(b);ar(k,{color:"secondary",variant:"ghost",get onclick(){return e.onClose}}),H(b),y(h,b)};z(c,h=>{e.onClose&&h(D)})}H(m),H(i);var A=q(i,2);K(A,()=>e.children??V),y(r,s),U()}function wr(r,e){let a=te(e,["$$slots","$$events","$$legacy","children","title","description","icon","onClose"]);br(r,Y(()=>a,{children:(o,u)=>{var d=S(),s=x(d);{var i=f=>{var l=S(),m=x(l);K(m,()=>e.children),y(f,l)},t=f=>{var l=S(),m=x(l);{var g=v=>{yr(v,Y({get title(){return e.title},get description(){return e.description},get icon(){return e.icon},get onClose(){return e.onClose}},()=>a))};z(m,v=>{e.title&&v(g)},!0)}y(f,l)};z(s,f=>{e.children?f(i):f(t,!1)})}y(o,d)},$$slots:{default:!0}}))}const we=r=>!!r.component,J=r=>typeof r=="string"?{description:r}:r??{};class Cr{#r;#e=Ge(Ye({items:[]}));show(e,a){return this.open(e,a)}custom(e,a){return this.open(e,a)}setOptions(e){Object.assign(p(this.#e),e)}open(e,a){const{timeout:o=3e3,closable:u=!0,id:d=lr()}=a||{},s=e;if(s.id=d,u){const i=()=>this.remove(s);we(e)?e.props.onClose=i:e.onClose=i}p(this.#e).items.push(s),this.mount(),o&&setTimeout(()=>this.remove(s),o)}async mount(){this.#r||(this.#r=await Ue(Er,{target:document.body,props:p(this.#e)}))}async unmount(){this.#r&&await Xe(this.#r)}primary(e,a){this.show({title:B("toast_success_title"),color:"primary",...J(e)},a)}success(e,a){this.show({title:B("toast_success_title"),color:"success",...J(e)},a)}info(e,a){this.show({title:B("toast_info_title"),color:"info",...J(e)},a)}warning(e,a){this.show({title:B("toast_warning_title"),color:"warning",...J(e)},a)}danger(e,a){this.show({title:B("toast_danger_title"),color:"danger",...J(e)},a)}remove(e){p(this.#e).items=p(this.#e).items.filter(a=>a.id!==e.id)}}const kr=new Cr;var xr=X("<div></div>");function Er(r,e){Q(e,!0);const a=te(e,["$$slots","$$events","$$legacy","items","class"]),o=G(()=>e.items.length===0);hr(r,{children:(u,d)=>{var s=xr();pe(s,i=>({class:i,...a}),[()=>ye(p(o)?"hidden":"absolute top-0 right-0 flex flex-col items-end justify-end gap-2 p-4",dr.ToastPanel,e.class)]),cr(s,21,()=>e.items,i=>i.id,(i,t)=>{var f=S(),l=x(f);{var m=v=>{var C=S(),E=x(C);be(E,()=>p(t).component,(n,c)=>{c(n,Y(()=>p(t).props))}),y(v,C)},g=v=>{wr(v,Y(()=>p(t)))};z(l,v=>{we(p(t))?v(m):v(g,!1)})}y(i,f)}),H(s),y(u,s)}}),U()}function Tr(r){if(!xe(r))return;let e=r.data;if(typeof e=="string")try{e=JSON.parse(e)}catch{}return e?.message||r.message}function Sr(r){return r instanceof Error?r:new Error(String(r))}function Ir(r,e){const a=Sr(r);if(a.name!=="AbortError"){console.error(`[handleError]: ${a}`,r,a.stack);try{let o=Tr(r);o&&(o=`${String(o).slice(0,75)}
(Immich Server Error)`);const u=o||e;return kr.danger(u),u}catch(o){return console.error(o),e}}}async function Br(r,e){try{return await r()}catch(a){Ir(a,e);return}}export{hr as T,Br as a,br as b,yr as c,cr as e,Tr as g,Ir as h,Kr as i,kr as t};
