import{a3 as p,a4 as S,N as A,a5 as _}from"./DUXNbmIP.js";import{a as v,i as F}from"./CF_nq223.js";import{aV as T,d as W,h as g,i as f,g as o,j as l,u as c}from"./D0CSSuTl.js";import{u as L}from"./CJGyQpNN.js";import{n as C}from"./BP6NvnZ7.js";import{S as M}from"./BRztk81V.js";import{c as x}from"./C8vxa4mj.js";function G(t){let e;const s=x(r=>{let a=!1;const d=t.subscribe(u=>{e=u,a&&r()});return a=!0,d});function i(){return T()?(s(),e):W(t)}return"set"in t?{get current(){return i()},set current(r){t.set(r)}}:{get current(){return i()}}}let n,h=null;function y(){return(h===null||h.byteLength===0)&&(h=new Float32Array(n.memory.buffer)),h}let m=0;function O(t,e){const s=e(t.length*4,4)>>>0;return y().set(t,s/4),m=t.length,s}function H(t,e){return t=t>>>0,y().subarray(t/4,t/4+e)}function j(t,e,s,i,r){const a=O(t,n.__wbindgen_malloc),d=m,u=n.get_justified_layout(a,d,e,s,i,r);var b=H(u[0],u[1]).slice();return n.__wbindgen_free(u[0],u[1]*4,4),b}function U(){const t={};return t.wbg={},t.wbg.__wbindgen_init_externref_table=function(){const e=n.__wbindgen_export_0,s=e.grow(4);e.set(0,void 0),e.set(s+0,void 0),e.set(s+1,null),e.set(s+2,!0),e.set(s+3,!1)},t}function I(t,e){return n=t.exports,h=null,n.__wbindgen_start(),n}function R(t){if(n!==void 0)return n;typeof t<"u"&&(Object.getPrototypeOf(t)===Object.prototype?{module:t}=t:console.warn("using deprecated parameters for `initSync()`; pass a single object instead"));const e=U();t instanceof WebAssembly.Module||(t=new WebAssembly.Module(t));const s=new WebAssembly.Instance(t,e);return I(s)}class w{constructor(e,{rowHeight:s,rowWidth:i,spacing:r,heightTolerance:a}){R(p),e.length===0?this.layout=new Float32Array(4):this.layout=j(e,s,i,r,a)}get containerWidth(){return this.layout[0]}get containerHeight(){return this.layout[1]}getTop(e){return this.layout[e*4+4]}getLeft(e){return this.layout[e*4+5]}getWidth(e){return this.layout[e*4+6]}getHeight(e){return this.layout[e*4+7]}getPosition(e){return{top:this.layout[e*4+4],left:this.layout[e*4+5],width:this.layout[e*4+6],height:this.layout[e*4+7]}}}const E=S.LAYOUT.WASM;function K(t,e){return E?v(t)?P(t,e):J(t,e):V(t,e)}function P(t,e){const s=new Float32Array(t.length);for(let i=0;i<t.length;i++)s[i]=t[i].ratio;return new w(s,e)}function J(t,e){const s=new Float32Array(t.length);for(let i=0;i<t.length;i++)s[i]=A(t[i])??1;return new w(s,e)}class N{result;width;constructor(e){this.result=e,this.width=0;for(const s of this.result.boxes)if(s.top===0)this.width=s.left+s.width;else break}get containerWidth(){return this.width}get containerHeight(){return this.result.containerHeight}getTop(e){return this.result.boxes[e]?.top}getLeft(e){return this.result.boxes[e]?.left}getWidth(e){return this.result.boxes[e]?.width}getHeight(e){return this.result.boxes[e]?.height}getPosition(e){const s=this.result.boxes[e];return{top:s.top,left:s.left,width:s.width,height:s.height}}}function V(t,e){const s={targetRowHeight:e.rowHeight,containerWidth:e.rowWidth,boxSpacing:e.spacing,targetRowHeightTolerange:e.heightTolerance,containerPadding:0},i=_(t.map(r=>F(r)?r.ratio:A(r)??1),s);return new N(i)}class Q{#e=g(f([]));get selectedAssets(){return o(this.#e)}set selectedAssets(e){l(this.#e,e,!0)}hasSelectedAsset(e){return this.selectedAssets.some(s=>s.id===e)}selectedGroup=new M;#t=g(f([]));get assetSelectionCandidates(){return o(this.#t)}set assetSelectionCandidates(e){l(this.#t,e,!0)}hasSelectionCandidate(e){return this.assetSelectionCandidates.some(s=>s.id===e)}#s=g(null);get assetSelectionStart(){return o(this.#s)}set assetSelectionStart(e){l(this.#s,e,!0)}#i=c(()=>this.selectedAssets.length>0);get selectionActive(){return o(this.#i)}set selectionActive(e){l(this.#i,e)}user=G(L);#r=c(()=>this.user.current?.id);get userId(){return o(this.#r)}set userId(e){l(this.#r,e)}#n=c(()=>this.selectedAssets.every(e=>e.isTrashed));get isAllTrashed(){return o(this.#n)}set isAllTrashed(e){l(this.#n,e)}#o=c(()=>this.selectedAssets.every(e=>e.visibility===C.Archive));get isAllArchived(){return o(this.#o)}set isAllArchived(e){l(this.#o,e)}#l=c(()=>this.selectedAssets.every(e=>e.isFavorite));get isAllFavorite(){return o(this.#l)}set isAllFavorite(e){l(this.#l,e)}#a=c(()=>this.selectedAssets.every(e=>e.ownerId===this.userId));get isAllUserOwned(){return o(this.#a)}set isAllUserOwned(e){l(this.#a,e)}selectAsset(e){this.hasSelectedAsset(e.id)||this.selectedAssets.push(e)}selectAssets(e){for(const s of e)this.selectAsset(s)}removeAssetFromMultiselectGroup(e){const s=this.selectedAssets.findIndex(i=>i.id==e);s!==-1&&this.selectedAssets.splice(s,1)}addGroupToMultiselectGroup(e){this.selectedGroup.add(e)}removeGroupFromMultiselectGroup(e){this.selectedGroup.delete(e)}setAssetSelectionStart(e){this.assetSelectionStart=e}setAssetSelectionCandidates(e){this.assetSelectionCandidates=e}clearAssetSelectionCandidates(){this.assetSelectionCandidates=[]}clearMultiselect(){this.selectedAssets=[],this.selectedGroup.clear(),this.assetSelectionCandidates=[],this.assetSelectionStart=null}}export{Q as A,K as g};
