import{s as F}from"./BVZhy_zG.js";import{a1 as P,h as _,g,j as E,p as R,b as N,e as V,t as z,a as T,c as L,r as A,u as D}from"./D0CSSuTl.js";import"./DsnmJJEf.js";import{e as I}from"./C8vxa4mj.js";import{a as W,f as j}from"./Bd1JH_Ov.js";import{s as U}from"./CMI33r64.js";import{F as G,ac as J,s as C,q as K,bP as Q}from"./D-UYCH9y.js";import{a as X}from"./IOA7-Wrn.js";import{b as Y}from"./Dgf_MdoC.js";import{p as c,c as Z}from"./zonMEKN6.js";import{c as $}from"./jZIyHVjf.js";import{l as tt}from"./0qPXRVhz.js";import{e as S}from"./BpCm29KX.js";import{r as et}from"./DUXNbmIP.js";import{q as nt}from"./Tw41aoDi.js";const Ct=(e,t="middle")=>{const{currentTarget:i,target:d}=e,u="x"in e?e.x:0,x="y"in e?e.y:0,h=(i||d)?.getBoundingClientRect();return h?ot(h,t):{x:u,y:x}},ot=(e,t="middle")=>{switch(t){case"middle":return{x:e.x+e.width/2,y:e.y+e.height/2};case"top-left":return{x:e.x,y:e.y};case"top-right":return{x:e.x+e.width,y:e.y};case"bottom-left":return{x:e.x,y:e.y+e.height};case"bottom-right":return{x:e.x+e.width,y:e.y+e.height}}},Et=(e,t)=>{const i=()=>{const{container:n,selectedId:o}=t;return n?.querySelector(`#${o}`)},d=()=>{const{closeDropdown:n,selectionChanged:o}=t;o(void 0),n()},u=async(n,o)=>{const{selectionChanged:l,container:f,openDropdown:y}=t;if(y&&(y(o),await P()),!f)return;const m=Array.from(f.children).filter(r=>r.tagName!=="HR");if(m.length===0)return;const p=i(),w=p?m.indexOf(p):-1,b=(n==="up"?-1:1)+(n==="up"&&w===-1?1:0),a=(w+b+m.length)%m.length,v=m[a];v?.scrollIntoView({block:"nearest"}),l(v?.id)},x=n=>{const{onEscape:o}=t;if(o){o(n);return}n.stopPropagation(),d()},h=n=>{const{selectedId:o,isOpen:l,closeDropdown:f}=t;if(l&&!o){f();return}if(!o){u("down",n);return}i()?.click()},{destroy:k}=F(e,[{shortcut:{key:"ArrowUp"},onShortcut:n=>u("up",n)},{shortcut:{key:"ArrowDown"},onShortcut:n=>u("down",n)},{shortcut:{key:"Escape"},onShortcut:n=>x(n)},{shortcut:{key:" "},onShortcut:n=>h(n)},{shortcut:{key:"Enter"},onShortcut:n=>h(n)}]);return{update(n){t=n},destroy:k}};class it{constructor(){S.on({AppInit:()=>et.subscribe(t=>this.setLanguage(t))})}#t=_(!1);get rtl(){return g(this.#t)}set rtl(t){E(this.#t,t,!0)}setLanguage(t){const i=tt.find(d=>d.code===t);i&&(this.rtl=i.rtl??!1,document.body.setAttribute("dir",i.rtl?"rtl":"ltr"),S.emit("LanguageChange",i))}}const at=new it;var rt=j('<div class="fixed min-w-50 w-max max-w-75 overflow-hidden rounded-lg shadow-lg z-1"><ul role="menu" tabindex="-1"><!></ul></div>');function kt(e,t){R(t,!0);let i=c(t,"isVisible",3,!1),d=c(t,"direction",3,"right"),u=c(t,"x",3,0),x=c(t,"y",3,0),h=c(t,"id",3,void 0),k=c(t,"ariaLabel",3,void 0),n=c(t,"ariaLabelledBy",3,void 0),o=c(t,"ariaActiveDescendant",3,void 0),l=c(t,"menuElement",15),f=c(t,"onClose",3,void 0);const y=s=>s==="left"?"right":"left",m=D(()=>at.rtl?y(d()):d()),p=D(()=>{if(!l())return{left:0,top:0};const s=l().getBoundingClientRect(),M=g(m)==="left"?s.width:0,H=Math.min(l().clientHeight,g(w))||0,O=Math.max(8,Math.min(window.innerWidth-s.width,u()-M)),q=Math.max(8,Math.min(window.innerHeight-H,x()));return{left:O,top:q}});let w=_(0),b=_(!1);var a=rt();let v;var r=L(a),B=L(r);U(B,()=>t.children??N),A(r),Z(r,s=>l(s),()=>l()),A(a),V(()=>Y(a,"clientHeight",s=>E(w,s))),X(a,(s,M)=>$?.(s,M),()=>({onOutclick:f()})),z(()=>{v=J(a,"",v,{left:`${g(p).left??""}px`,top:`${g(p).top??""}px`}),C(r,"id",h()),C(r,"aria-activedescendant",o()??""),C(r,"aria-label",k()),C(r,"aria-labelledby",n()),K(r,1,`${i()?"max-h-dvh":"max-h-0"} flex flex-col transition-all duration-250 ease-in-out outline-none ${g(b)?"overflow-auto":""}`)}),I("introend",a,()=>{E(b,!0)}),I("outrostart",a,()=>{E(b,!1)}),G(3,a,()=>Q,()=>({duration:250,easing:nt})),W(e,a),T()}export{kt as C,Ct as a,Et as c,ot as g,at as l};
