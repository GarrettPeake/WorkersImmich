import{R as e}from"./gegweU97.js";import{m as a,w as s}from"./DUXNbmIP.js";import{m as i,e as c,M as r}from"./BP6NvnZ7.js";function f(t){return new URL(e.maintenanceMode({continue:t.pathname+t.search}),t.origin).href}function w(t){return t.get("continue")??"/"}function d(t,n){return t!==n.pathname.startsWith(e.maintenanceMode())}const M=async()=>{const t=new URLSearchParams(location.search);try{const n=await i({maintenanceLoginDto:{token:t.get("token")??void 0}});a.auth.set(n)}catch{}},g=async()=>{for(;;)try{const t=await c();a.status.set(t),t.action===r.End&&s.serverRestarting.set({isMaintenanceMode:!1});break}catch(t){const n=t?.status;if(n&&n>=500&&n<600){await new Promise(o=>setTimeout(o,1e3));continue}throw t}};export{g as a,f as b,w as c,M as l,d as m};
