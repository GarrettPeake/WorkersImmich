import{h as f,aS as h,a9 as g,g as a,j as u,aT as d,d as y,p as L,a as T,b as E,c as w,r as z,a1 as O}from"./D0CSSuTl.js";import{bu as I,bv as k,bw as x}from"./D-UYCH9y.js";import{c as C}from"./0qPXRVhz.js";import{l as S,h as $}from"./DUXNbmIP.js";import{D as m,d as M}from"./CJGyQpNN.js";import"./DsnmJJEf.js";import{a as U,f as N}from"./Bd1JH_Ov.js";import{s as _}from"./CMI33r64.js";import{a as Z}from"./IOA7-Wrn.js";import{p as F}from"./zonMEKN6.js";var P=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],j=["difference","intersection","symmetricDifference","union"],v=!1;class p extends Set{#r=new Map;#e=f(0);#t=f(0);#s=h||-1;constructor(e){if(super(),e){for(var t of e)super.add(t);this.#t.v=super.size}v||this.#n()}#o(e){return h===this.#s?f(e):g(e)}#n(){v=!0;var e=p.prototype,t=Set.prototype;for(const r of P)e[r]=function(...o){return a(this.#e),t[r].apply(this,o)};for(const r of j)e[r]=function(...o){a(this.#e);var n=t[r].apply(this,o);return new p(n)}}has(e){var t=super.has(e),r=this.#r,o=r.get(e);if(o===void 0){if(!t)return a(this.#e),!1;o=this.#o(!0),r.set(e,o)}return a(o),t}add(e){return super.has(e)||(super.add(e),u(this.#t,super.size),d(this.#e)),this}delete(e){var t=super.delete(e),r=this.#r,o=r.get(e);return o!==void 0&&(r.delete(e),u(o,!1)),t&&(u(this.#t,super.size),d(this.#e)),t}clear(){if(super.size!==0){super.clear();var e=this.#r;for(var t of e.values())u(t,!1);e.clear(),u(this.#t,0),d(this.#e)}}keys(){return this.values()}values(){return a(this.#e),super.values()}entries(){return a(this.#e),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return a(this.#t)}}let q={includeContainer:!1};const ee=(s,e=!1)=>I(s,{...q,includeContainer:e}),te=(s,e)=>{const t=k(document.body,{includeContainer:!0});if(t.length===0)return;const r=document.activeElement,o=r?t.indexOf(r):-1;if(o===-1){const c=t.find(D=>s(D));c?c.focus():t[0]&&t[0].focus();return}const n=e==="next"?1:-1,i=t.length;let l=o;do{l=(l+n+i)%i;const c=t[l];if(x(c)&&s(c)){c.focus();break}}while(l!==o)};function re(s){if(!s||s==="0")return 0;const e=M.fromISOTime(s).as("seconds");return Number.isNaN(e)?0:e}function se(s){return m.fromISO(s,{zone:"UTC"}).toUTC()}const oe=(s,e)=>{const t=y(S);let r=m.fromISO(s).setZone("UTC"),o=m.fromISO(e).setZone("UTC");t&&(r=r.setLocale(t),o=o.setLocale(t));const n=o.toLocaleString({month:"short",year:"numeric"});return r.year===o.year?r.month===o.month?n:`${r.toLocaleString({month:"short"})} - ${n}`:`${r.toLocaleString({month:"short",year:"numeric"})} - ${n}`},b=s=>{if(!s)return;const e=s.replace(/Z$/,"").replace(/\+.+$/,"");return e?new Date(e).toLocaleDateString(y(S),C.album):void 0},ne=s=>{const e=b(s.startDate),t=b(s.endDate);return e&&t&&e!==t?`${e} - ${t}`:e||""},ae=s=>s.setZone("utc",{keepLocalTime:!0}).toISO();function A(s,e="body"){let t;async function r(n){if(e=n,typeof e=="string"){if(t=document.querySelector(e),t===null&&(await O(),t=document.querySelector(e)),t===null)throw new Error(`No element found matching css selector: "${e}"`)}else if(e instanceof HTMLElement)t=e;else throw new TypeError(`Unknown portal target type: ${e===null?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);t.append(s),s.hidden=!1}function o(){s.parentNode&&s.remove()}return $(r(e)),{update:r,destroy:o}}var H=N('<div hidden=""><!></div>');function ie(s,e){L(e,!0);let t=F(e,"target",3,"body");var r=H(),o=w(r);_(o,()=>e.children??E),z(r),Z(r,(n,i)=>A?.(n,i),t),U(s,r),T()}export{ie as P,p as S,ae as a,ne as b,oe as c,ee as g,te as m,se as p,re as t};
