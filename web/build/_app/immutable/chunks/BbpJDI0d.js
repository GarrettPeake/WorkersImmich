import{a0 as D,h as A,ar as x,j as h,g as w}from"./D0CSSuTl.js";import{al as k,am as O}from"./D-UYCH9y.js";import{l as P}from"./Tw41aoDi.js";function E(t){return Object.prototype.toString.call(t)==="[object Date]"}function m(t,r){if(t===r||t!==t)return()=>t;const n=typeof t;if(n!==typeof r||Array.isArray(t)!==Array.isArray(r))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const o=r.map((e,s)=>m(t[s],e));return e=>o.map(s=>s(e))}if(n==="object"){if(!t||!r)throw new Error("Object cannot be null");if(E(t)&&E(r)){const s=t.getTime(),f=r.getTime()-s;return a=>new Date(s+a*f)}const o=Object.keys(r),e={};return o.forEach(s=>{e[s]=m(t[s],r[s])}),s=>{const i={};return o.forEach(f=>{i[f]=e[f](s)}),i}}if(n==="number"){const o=r-t;return e=>t+e*o}return()=>r}function q(t,r={}){const n=D(t);let o,e=t;function s(i,f){if(e=i,t==null)return n.set(t=i),Promise.resolve();let a=o,u=!1,{delay:d=0,duration:c=400,easing:l=P,interpolate:p=m}={...r,...f};if(c===0)return a&&(a.abort(),a=null),n.set(t=e),Promise.resolve();const g=k.now()+d;let y;return o=O(b=>{if(b<g)return!0;u||(y=p(t,i),typeof c=="function"&&(c=c(t,i)),u=!0),a&&(a.abort(),a=null);const j=b-g;return j>c?(n.set(t=i),!1):(n.set(t=y(l(j/c))),!0)}),o.promise}return{set:s,update:(i,f)=>s(i(e,t),f),subscribe:n.subscribe}}class T{#t;#e;#s;#r=null;constructor(r,n={}){this.#t=A(r),this.#e=A(r),this.#s=n}static of(r,n){const o=new T(r(),n);return x(()=>{o.set(r())}),o}set(r,n){h(this.#e,r);let{delay:o=0,duration:e=400,easing:s=P,interpolate:i=m}={...this.#s,...n};if(e===0)return this.#r?.abort(),h(this.#t,r),Promise.resolve();const f=k.now()+o;let a,u=!1,d=this.#r;return this.#r=O(c=>{if(c<f)return!0;if(!u){u=!0;const p=this.#t.v;a=i(p,r),typeof e=="function"&&(e=e(p,r)),d?.abort()}const l=c-f;return l>e?(h(this.#t,r),!1):(h(this.#t,a(s(l/e))),!0)}),this.#r.promise}get current(){return w(this.#t)}get target(){return w(this.#e)}set target(r){this.set(r)}}export{T,q as t};
