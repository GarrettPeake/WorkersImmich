import"./DsnmJJEf.js";import{s as q,d as At,o as ne}from"./C8vxa4mj.js";import{p as ut,c as u,s as w,r as n,t as Z,a as dt,g as e,f as Q,u as R,n as se,W as ht,h as it,i as gt,V as qt,j as lt,b as Kt,a1 as le}from"./D0CSSuTl.js";import{a as o,c as at,f as I,t as xt}from"./Bd1JH_Ov.js";import{i as M}from"./D8NIUdeB.js";import{e as wt,i as ie}from"./DLePdI2u.js";import{s as Wt}from"./CMI33r64.js";import{p as z,s as mt,a as W,f as Mt,d as Et,b as ue}from"./zonMEKN6.js";import{s as St,I as de,ah as me,a as Bt,bR as Xt,d3 as ce,F as Ht,bP as Jt,q as ve,au as Zt,d5 as be,aL as $t,a5 as fe,a2 as ge}from"./D-UYCH9y.js";import{A as te}from"./Cfc6dgin.js";import{u as Nt,b as Pt}from"./CJGyQpNN.js";import{a as _e,C as he,c as xe}from"./BitKOkE8.js";import{c as we}from"./BRztk81V.js";import{$ as _t}from"./DWQ0JXRY.js";import{R as ee}from"./gegweU97.js";import{D as yt,S as pt,B as bt,l as ae,C as ft,E as Ft,V as Vt}from"./DUXNbmIP.js";import{j as re,t as oe,s as ye,k as pe,i as ke,g as Ce}from"./B9MV_P2E.js";import{f as Se}from"./D3ODmHbk.js";import{g as Ae}from"./gvLJu3l0.js";import{c as Oe}from"./0qPXRVhz.js";import{O as De}from"./Cq6696VF.js";import{s as zt,o as Me,M as Ot}from"./B2VKg7zy.js";import{a as Tt}from"./IOA7-Wrn.js";import{s as Ie}from"./BVZhy_zG.js";import{g as Be}from"./DcdhlkRn.js";import{d as Ne,a as Yt,h as Re,A as Ee}from"./BAR0RTAw.js";import{F as Pe}from"./BMcevgEe.js";import{F as jt}from"./BgQCgJ0_.js";import{I as Fe}from"./s_2UW97Q.js";import{T as Ve}from"./BcI9YXFA.js";import{n as It}from"./CS-10t6W.js";import{g as Gt}from"./jIGarhcu.js";import{m as Lt}from"./BHTYC334.js";var ze=I('<div class="absolute end-6 top-6 opacity-0 group-hover:opacity-100 focus-within:opacity-100" data-testid="context-button-parent"><!></div>'),Te=I('<p class="flex text-sm dark:text-immich-dark-fg capitalize"> </p>'),Ye=I("<p> </p>"),je=I("<p>•</p>"),Ge=I("<p> </p>"),Le=I("<p> </p>"),Ue=I("<p> </p>"),Qe=I("<p> </p>"),qe=I('<div class="group relative rounded-2xl border border-transparent p-5 hover:bg-gray-100 hover:border-gray-200 dark:hover:border-gray-800 dark:hover:bg-gray-900" data-testid="album-card"><!> <!> <div class="mt-4"><p class="w-full leading-6 text-lg line-clamp-2 font-semibold text-black dark:text-white group-hover:text-primary" data-testid="album-name"> </p> <!> <span class="flex gap-2 text-sm dark:text-immich-dark-fg" data-testid="album-details"><!> <!> <!></span></div></div>');function Ke(X,t){ut(t,!0);const s=()=>W(_t,"$t",T),E=()=>W(Nt,"$user",T),[T,Y]=mt();let P=z(t,"showOwner",3,!1),S=z(t,"showDateRange",3,!1),b=z(t,"showItemCount",3,!1),F=z(t,"preload",3,!1),A=z(t,"onShowContextMenu",3,void 0);const p=l=>{l.stopPropagation(),l.preventDefault(),A()?.(_e(l))};var G=qe(),f=u(G);{var y=l=>{var a=ze(),c=u(a);{let N=R(()=>s()("show_album_options"));de(c,{color:"secondary",get"aria-label"(){return e(N)},get icon(){return me},shape:"round",variant:"filled",size:"medium",class:"icon-white-drop-shadow",onclick:p})}n(a),Z(()=>St(a,"id",`icon-${t.album.id??""}`)),o(l,a)};M(f,l=>{A()&&l(y)})}var g=w(f,2);te(g,{get album(){return t.album},get preload(){return F()},class:"transition-all duration-300 hover:shadow-lg"});var k=w(g,2),h=u(k),_=u(h,!0);n(h);var v=w(h,2);{var O=l=>{var a=Te(),c=u(a,!0);n(a),Z(N=>q(c,N),[()=>we(t.album.startDate,t.album.endDate)]),o(l,a)};M(v,l=>{S()&&t.album.startDate&&t.album.endDate&&l(O)})}var d=w(v,2),m=u(d);{var B=l=>{var a=Ye(),c=u(a,!0);n(a),Z(N=>q(c,N),[()=>s()("items_count",{values:{count:t.album.assetCount}})]),o(l,a)};M(m,l=>{b()&&l(B)})}var D=w(m,2);{var V=l=>{var a=je();o(l,a)};M(D,l=>{(P()||t.album.shared)&&b()&&l(V)})}var L=w(D,2);{var C=l=>{var a=at(),c=Q(a);{var N=H=>{var st=Ge(),ct=u(st,!0);n(st),Z(kt=>q(ct,kt),[()=>s()("owned")]),o(H,st)},rt=H=>{var st=at(),ct=Q(st);{var kt=i=>{var x=Le(),$=u(x,!0);n(x),Z(tt=>q($,tt),[()=>s()("shared_by_user",{values:{user:t.album.owner.name}})]),o(i,x)},r=i=>{var x=Ue(),$=u(x,!0);n(x),Z(tt=>q($,tt),[()=>s()("shared")]),o(i,x)};M(ct,i=>{t.album.owner?i(kt):i(r,!1)},!0)}o(H,st)};M(c,H=>{E().id===t.album.ownerId?H(N):H(rt,!1)})}o(l,a)},j=l=>{var a=at(),c=Q(a);{var N=rt=>{var H=Qe(),st=u(H,!0);n(H),Z(ct=>q(st,ct),[()=>s()("shared")]),o(rt,H)};M(c,rt=>{t.album.shared&&rt(N)},!0)}o(l,a)};M(L,l=>{P()?l(C):l(j,!1)})}n(d),n(k),n(G),Z(()=>{St(h,"title",t.album.albumName),q(_,t.album.albumName)}),o(X,G),dt(),Y()}var We=I('<div class="grid"><button type="button" class="w-full text-start mt-2 pt-2 pe-2 pb-2 rounded-md transition-colors cursor-pointer dark:text-immich-dark-fg hover:text-primary hover:bg-subtle dark:hover:bg-immich-dark-gray"><!> <span class="font-bold text-3xl text-black dark:text-white"> </span> <span class="ms-1.5"> </span></button> <hr class="dark:border-immich-dark-gray"/></div>'),Xe=I("<a><!></a>"),He=I('<div class="grid grid-auto-fill-56 gap-y-4"></div>'),Je=I('<!> <div class="mt-4"><!></div>',1);function Ut(X,t){ut(t,!0);const s=()=>W(yt,"$albumViewSettings",T),E=()=>W(_t,"$t",T),[T,Y]=mt();let P=z(t,"group",3,void 0),S=z(t,"showOwner",3,!1),b=z(t,"showDateRange",3,!1),F=z(t,"showItemCount",3,!1),A=z(t,"onShowContextMenu",3,void 0),p=R(()=>!!P()&&re(s(),P().id));const G=(d,m)=>{A()?.(d,m)};let f=R(()=>e(p)?"rotate-0":"rotate-90");const y=(d,m)=>{d.preventDefault(),G({x:d.x,y:d.y},m)};var g=Je(),k=Q(g);{var h=d=>{var m=We(),B=u(m);B.__click=()=>oe(P().id);var D=u(B);Bt(D,{get icon(){return Xt},size:"24",get class(){return`inline-block -mt-2.5 transition-all duration-250 ${e(f)??""}`}});var V=w(D,2),L=u(V,!0);n(V);var C=w(V,2),j=u(C);n(C),n(B),se(2),n(m),Z(l=>{St(B,"aria-expanded",!e(p)),q(L,P().name),q(j,`(${l??""})`)},[()=>E()("albums_count",{values:{count:t.albums.length}})]),o(d,m)};M(k,d=>{P()&&d(h)})}var _=w(k,2),v=u(_);{var O=d=>{var m=He();wt(m,31,()=>t.albums,B=>B.id,(B,D,V)=>{var L=Xe();L.__contextmenu=j=>y(j,e(D));var C=u(L);{let j=R(()=>e(V)<20),l=R(()=>A()?a=>G(a,e(D)):void 0);Ke(C,{get album(){return e(D)},get showOwner(){return S()},get showDateRange(){return b()},get showItemCount(){return F()},get preload(){return e(j)},get onShowContextMenu(){return e(l)}})}n(L),Z(j=>St(L,"href",j),[()=>ee.viewAlbum(e(D))]),ce(L,()=>Se,()=>({duration:400})),o(B,L)}),n(m),Ht(3,m,()=>Jt,()=>({duration:300})),o(d,m)};M(v,d=>{e(p)||d(O)})}n(_),o(X,g),dt(),Y()}At(["click","contextmenu"]);var Ze=I('<th><button type="button" class="rounded-lg p-2 hover:bg-immich-dark-primary hover:dark:bg-immich-dark-primary/50"><!> </button></th>');function $e(X,t){ut(t,!0);const s=()=>W(yt,"$albumViewSettings",T),E=()=>W(_t,"$t",T),[T,Y]=mt(),P=()=>{s().sortBy===t.option.id?Mt(yt,ht(s).sortOrder=s().sortOrder===pt.Asc?pt.Desc:pt.Asc,ht(s)):(Mt(yt,ht(s).sortBy=t.option.id,ht(s)),Mt(yt,ht(s).sortOrder=t.option.defaultOrder,ht(s)))};let S=R(()=>({[bt.Title]:E()("sort_title"),[bt.ItemCount]:E()("sort_items"),[bt.DateModified]:E()("sort_modified"),[bt.DateCreated]:E()("sort_created"),[bt.MostRecentPhoto]:E()("sort_recent"),[bt.OldestPhoto]:E()("sort_oldest")}));var b=Ze(),F=u(b);F.__click=P;var A=u(F);{var p=f=>{var y=at(),g=Q(y);{var k=_=>{var v=xt("↓");o(_,v)},h=_=>{var v=xt("↑");o(_,v)};M(g,_=>{s().sortOrder===pt.Desc?_(k):_(h,!1)})}o(f,y)};M(A,f=>{s().sortBy===t.option.id&&f(p)})}var G=w(A);n(F),n(b),Z(()=>{ve(b,1,`text-sm font-medium ${t.option.columnStyle??""}`),q(G,` ${e(S)[t.option.id]??""}`)}),o(X,b),dt(),Y()}At(["click"]);var ta=I('<tr class="flex w-full place-items-center border-3 border-transparent p-2 text-center even:bg-subtle/20 odd:bg-subtle/80 hover:cursor-pointer hover:border-immich-primary/75 odd:dark:bg-immich-dark-gray/75 even:dark:bg-immich-dark-gray/50 dark:hover:border-immich-dark-primary/75 md:px-5 md:py-2"><td class="text-md text-ellipsis text-start w-8/12 sm:w-4/12 md:w-4/12 xl:w-[30%] 2xl:w-[40%] items-center"> <!></td><td class="text-md text-ellipsis text-center sm:w-2/12 md:w-2/12 xl:w-[15%] 2xl:w-[12%]"> </td><td class="text-md hidden text-ellipsis text-center sm:block w-3/12 xl:w-[15%] 2xl:w-[12%]"> </td><td class="text-md hidden text-ellipsis text-center sm:block w-3/12 xl:w-[15%] 2xl:w-[12%]"> </td><td class="text-md text-ellipsis text-center hidden xl:block xl:w-[15%] 2xl:w-[12%]"><!></td><td class="text-md text-ellipsis text-center hidden xl:block xl:w-[15%] 2xl:w-[12%]"><!></td></tr>');function Qt(X,t){ut(t,!0);const s=()=>W(ae,"$locale",Y),E=()=>W(Nt,"$user",Y),T=()=>W(_t,"$t",Y),[Y,P]=mt();let S=z(t,"onShowContextMenu",3,void 0);const b=a=>{S()?.(a,t.album)},F=a=>new Date(a).toLocaleDateString(s(),Oe.album),A=a=>{a.preventDefault(),b({x:a.x,y:a.y})};var p=ta();p.__click=()=>Ae(ee.viewAlbum(t.album)),p.__contextmenu=A;var G=u(p),f=u(G),y=w(f);{var g=a=>{{let c=R(()=>t.album.ownerId===E().id?T()("shared_by_you"):T()("shared_by_user",{values:{user:t.album.owner.name}}));Bt(a,{get icon(){return Zt},size:"16",class:"inline ms-1 opacity-70",get title(){return e(c)}})}};M(y,a=>{t.album.shared&&a(g)})}n(G);var k=w(G),h=u(k,!0);n(k);var _=w(k),v=u(_,!0);n(_);var O=w(_),d=u(O,!0);n(O);var m=w(O),B=u(m);{var D=a=>{var c=xt();Z(N=>q(c,N),[()=>F(t.album.endDate)]),o(a,c)},V=a=>{var c=xt("-");o(a,c)};M(B,a=>{t.album.endDate?a(D):a(V,!1)})}n(m);var L=w(m),C=u(L);{var j=a=>{var c=xt();Z(N=>q(c,N),[()=>F(t.album.startDate)]),o(a,c)},l=a=>{var c=xt("-");o(a,c)};M(C,a=>{t.album.startDate?a(j):a(l,!1)})}n(L),n(p),Z((a,c,N)=>{q(f,`${t.album.albumName??""} `),q(h,a),q(v,c),q(d,N)},[()=>T()("items_count",{values:{count:t.album.assetCount}}),()=>F(t.album.updatedAt),()=>F(t.album.createdAt)]),o(X,p),dt(),P()}At(["click","contextmenu"]);var ea=I('<tbody class="block w-full overflow-y-auto rounded-md border dark:border-immich-dark-gray dark:text-immich-dark-fg"></tbody>'),aa=I('<tbody class="block w-full overflow-y-auto rounded-md border dark:border-immich-dark-gray dark:text-immich-dark-fg mt-4"></tbody>'),ra=I('<tbody class="block w-full overflow-y-auto rounded-md border dark:border-immich-dark-gray dark:text-immich-dark-fg mt-4"><tr class="flex w-full place-items-center p-2 md:ps-5 md:pe-5 md:pt-3 md:pb-3"><td class="text-md text-start -mb-1"><!> <span class="font-bold text-2xl"> </span> <span class="ms-1.5"> </span></td></tr></tbody> <!>',1),oa=I('<table class="mt-2 w-full text-start"><thead class="mb-4 flex h-12 w-full rounded-md border bg-gray-50 text-primary dark:border-immich-dark-gray dark:bg-immich-dark-gray"><tr class="flex w-full place-items-center p-2 md:p-5"></tr></thead><!></table>');function na(X,t){ut(t,!0);const s=()=>W(yt,"$albumViewSettings",T),E=()=>W(_t,"$t",T),[T,Y]=mt();let P=z(t,"albumGroupOption",19,()=>ft.None);var S=oa(),b=u(S),F=u(b);wt(F,21,()=>ye,ie,(f,y)=>{$e(f,{get option(){return e(y)}})}),n(F),n(b);var A=w(b);{var p=f=>{var y=ea();wt(y,21,()=>t.groupedAlbums[0].albums,g=>g.id,(g,k)=>{Qt(g,{get album(){return e(k)},get onShowContextMenu(){return t.onShowContextMenu}})}),n(y),o(f,y)},G=f=>{var y=at(),g=Q(y);wt(g,17,()=>t.groupedAlbums,k=>k.id,(k,h)=>{const _=R(()=>re(s(),e(h).id)),v=R(()=>e(_)?"rotate-0":"rotate-90");var O=ra(),d=Q(O),m=u(d);m.__click=()=>oe(e(h).id);var B=u(m),D=u(B);Bt(D,{get icon(){return Xt},size:"20",get class(){return`inline-block -mt-2 transition-all duration-250 ${e(v)??""}`}});var V=w(D,2),L=u(V,!0);n(V);var C=w(V,2),j=u(C);n(C),n(B),n(m),n(d);var l=w(d,2);{var a=c=>{var N=aa();wt(N,21,()=>e(h).albums,rt=>rt.id,(rt,H)=>{Qt(rt,{get album(){return e(H)},get onShowContextMenu(){return t.onShowContextMenu}})}),n(N),Ht(3,N,()=>Jt,()=>({duration:300})),o(c,N)};M(l,c=>{e(_)||c(a)})}Z(c=>{St(m,"aria-expanded",!e(_)),q(L,e(h).name),q(j,`(${c??""})`)},[()=>E()("albums_count",{values:{count:e(h).albums.length}})]),o(k,O)}),o(f,y)};M(A,f=>{P()===ft.None?f(p):f(G,!1)})}n(S),o(X,S),dt(),Y()}At(["click"]);var sa=I('<div><section class="fixed start-0 top-0 flex h-dvh w-dvw" role="presentation"><!></section></div>');function la(X,t){ut(t,!0);const s=()=>W(zt,"$selectedIdStore",E),[E,T]=mt();let Y=z(t,"direction",3,"right"),P=z(t,"x",3,0),S=z(t,"y",3,0),b=z(t,"isOpen",3,!1),F=it(gt({})),A=it(void 0),p=it(void 0);const f=`context-menu-${Be()}`,y=async v=>{const O=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!0,view:window,clientX:v.x,clientY:v.y}),d=document.elementsFromPoint(v.x,v.y);if(e(A)&&d.includes(e(A)))return;g(),await le(),lt(F,{},!0);const m=d.indexOf(v.target);d.at(m+1)?.dispatchEvent(O)},g=()=>{e(p)?.focus(),t.onClose?.()};qt(()=>{b()&&e(A)&&(lt(p,document.activeElement,!0),e(A).focus(),Et(Me,g))});const k=async v=>{v.preventDefault(),await y(v)};var h=at(),_=Q(h);be(_,()=>e(F),v=>{var O=at(),d=Q(O);{var m=B=>{var D=sa(),V=u(D);V.__contextmenu=k;var L=u(V);he(L,{get direction(){return Y()},get x(){return P()},get y(){return S()},get ariaActiveDescendant(){return s()},get ariaLabel(){return t.title},get id(){return f},isVisible:!0,onClose:g,get menuElement(){return e(A)},set menuElement(C){lt(A,C,!0)},children:(C,j)=>{var l=at(),a=Q(l);Wt(a,()=>t.children??Kt),o(C,l)},$$slots:{default:!0}}),n(V),n(D),Tt(D,(C,j)=>xe?.(C,j),()=>({closeDropdown:g,container:e(A),isOpen:b(),selectedId:s(),selectionChanged:C=>Et(zt,C)})),Tt(D,(C,j)=>Ie?.(C,j),()=>[{shortcut:{key:"Tab"},onShortcut:g},{shortcut:{key:"Tab",shift:!0},onShortcut:g}]),o(B,D)};M(d,B=>{b()&&B(m)})}o(v,O)}),o(X,h),dt(),T()}At(["contextmenu"]);var ia=I('<div class="flex items-center gap-8 m-4"><!> <div class="grow flex flex-col gap-4"><!> <!></div></div>');function ua(X,t){ut(t,!0);const s=()=>W(_t,"$t",E),[E,T]=mt();let Y=it(gt(t.album.albumName)),P=it(gt(t.album.description));const S=async()=>{await Ne(t.album,{albumName:e(Y),description:e(P)})&&t.onClose()};{let b=R(()=>s()("edit_album"));Pe(X,{get icon(){return $t},get title(){return e(b)},size:"medium",get onClose(){return t.onClose},onSubmit:S,children:(F,A)=>{var p=ia(),G=u(p);te(G,{get album(){return t.album},class:"h-50 w-50 shadow-lg hidden sm:flex"});var f=w(G,2),y=u(f);{let k=R(()=>s()("name"));jt(y,{get label(){return e(k)},children:(h,_)=>{Fe(h,{get value(){return e(Y)},set value(v){lt(Y,v,!0)}})},$$slots:{default:!0}})}var g=w(y,2);{let k=R(()=>s()("description"));jt(g,{get label(){return e(k)},children:(h,_)=>{Ve(h,{get value(){return e(P)},set value(v){lt(P,v,!0)}})},$$slots:{default:!0}})}n(f),n(p),o(F,p)},$$slots:{default:!0}})}dt(),T()}var da=I("<!> <!>",1),ma=I("<!> <!> <!>",1),ca=I("<!> <!> <!>",1);function qa(X,t){ut(t,!0);const s=()=>W(_t,"$t",Y),E=()=>W(Nt,"$user",Y),T=()=>W(ae,"$locale",Y),[Y,P]=mt();let S=z(t,"ownedAlbums",31,()=>gt([])),b=z(t,"sharedAlbums",31,()=>gt([])),F=z(t,"searchQuery",3,""),A=z(t,"allowEdit",3,!1),p=z(t,"showOwner",3,!1),G=z(t,"albumGroupIds",31,()=>gt([]));const f={[ft.None]:(r,i)=>[{id:s()("albums"),name:s()("albums"),albums:i}],[ft.Year]:(r,i)=>{const x=s()("unknown_year"),$=t.userSettings.sortBy===bt.OldestPhoto,tt=Gt(i,U=>{const J=$?U.startDate:U.endDate;return J?new Date(J).getFullYear():x}),ot=r===pt.Desc?-1:1;return Object.entries(tt).sort(([U],[J])=>U===x?1:J===x?-1:(Number.parseInt(U)-Number.parseInt(J))*ot).map(([U,J])=>({id:U,name:U,albums:J}))},[ft.Owner]:(r,i)=>{const x=E().id,$=Gt(i,"ownerId"),tt=r===pt.Desc?-1:1;return Object.entries($).sort(([et,U],[J,K])=>et===x?-tt:J===x?tt:U[0].owner.name.localeCompare(K[0].owner.name,T())*tt).map(([et,U])=>({id:et,name:et===x?s()("my_albums"):U[0].owner.name,albums:U}))}};let y=R(()=>{switch(t.userSettings.filter){case Ft.Owned:return S();case Ft.Shared:return b();default:{const r=b().filter(i=>i.ownerId!==E().id);return r.length>0?S().concat(r):S()}}});const g=R(()=>It(F()));let k=R(()=>e(g)?e(y).filter(({albumName:r,description:i})=>It(r).includes(e(g))||It(i).includes(e(g))):e(y)),h=R(()=>Ce(t.userSettings)),_=R(()=>(f[e(h)]??f[ft.None])(pe(t.userSettings.groupOrder),e(k)).map(x=>({id:x.id,name:x.name,albums:ke(x.albums,{sortBy:t.userSettings.sortBy,orderBy:t.userSettings.sortOrder})}))),v=it(gt({x:0,y:0})),O=it(void 0),d=it(!1);qt(()=>{G(e(_).map(({id:r})=>r))});let m=R(()=>A()&&e(O)&&e(O).ownerId===E().id);ne(async()=>{A()&&await L()});const B=(r,i)=>{lt(O,i,!0),lt(v,{x:r.x,y:r.y},!0),lt(d,!0)},D=()=>{lt(d,!1)},V=async r=>{if(D(),!!e(O))switch(r){case"edit":{await Lt.show(ua,{album:e(O)});break}case"share":{await Lt.show(Ee,{album:e(O)});break}case"download":{await Re(e(O));break}case"delete":{await Yt(e(O));break}}},L=async()=>{const r=S().filter(i=>i.assetCount===0&&!i.albumName);await Promise.allSettled(r.map(i=>Yt(i,{prompt:!1,notify:!1})))},C=(r,i)=>{const x=r.find(({id:$})=>$===i.id);return x&&Object.assign(x,i),r},j=r=>{S(C(S(),r)),b(C(b(),r))},l=r=>{j(r),Pt.recentAlbums=C(Pt.recentAlbums||[],r)},a=r=>{S(S().filter(({id:i})=>i!==r.id)),b(b().filter(({id:i})=>i!==r.id))},c=r=>{r.album&&j(r.album)};var N=ca(),rt=Q(N);De(rt,{onAlbumUpdate:l,onAlbumDelete:a,onSharedLinkCreate:c});var H=w(rt,2);{var st=r=>{var i=at(),x=Q(i);{var $=ot=>{var et=at(),U=Q(et);{var J=nt=>{Ut(nt,{get albums(){return e(_)[0].albums},get showOwner(){return p()},showDateRange:!0,showItemCount:!0,onShowContextMenu:B})},K=nt=>{var Ct=at(),Dt=Q(Ct);wt(Dt,17,()=>e(_),vt=>vt.id,(vt,Rt)=>{Ut(vt,{get albums(){return e(Rt).albums},get group(){return e(Rt)},get showOwner(){return p()},showDateRange:!0,showItemCount:!0,onShowContextMenu:B})}),o(nt,Ct)};M(U,nt=>{e(h)===ft.None?nt(J):nt(K,!1)})}o(ot,et)},tt=ot=>{var et=at(),U=Q(et);{var J=K=>{na(K,{get groupedAlbums(){return e(_)},get albumGroupOption(){return e(h)},onShowContextMenu:B})};M(U,K=>{t.userSettings.view===Vt.List&&K(J)},!0)}o(ot,et)};M(x,ot=>{t.userSettings.view===Vt.Cover?ot($):ot(tt,!1)})}o(r,i)},ct=r=>{var i=at(),x=Q(i);Wt(x,()=>t.empty??Kt),o(r,i)};M(H,r=>{e(y).length>0?r(st):r(ct,!1)})}var kt=w(H,2);{let r=R(()=>s()("album_options"));la(kt,ue({get title(){return e(r)}},()=>e(v),{get isOpen(){return e(d)},onClose:D,children:(i,x)=>{var $=ma(),tt=Q($);{var ot=K=>{var nt=da(),Ct=Q(nt);{let vt=R(()=>s()("edit_album"));Ot(Ct,{get icon(){return $t},get text(){return e(vt)},onClick:()=>V("edit")})}var Dt=w(Ct,2);{let vt=R(()=>s()("share"));Ot(Dt,{get icon(){return Zt},get text(){return e(vt)},onClick:()=>V("share")})}o(K,nt)};M(tt,K=>{e(m)&&K(ot)})}var et=w(tt,2);{let K=R(()=>s()("download"));Ot(et,{get icon(){return fe},get text(){return e(K)},onClick:()=>V("download")})}var U=w(et,2);{var J=K=>{{let nt=R(()=>s()("delete"));Ot(K,{get icon(){return ge},get text(){return e(nt)},onClick:()=>V("delete")})}};M(U,K=>{e(m)&&K(J)})}o(i,$)},$$slots:{default:!0}}))}o(X,N),dt(),P()}export{qa as A};
