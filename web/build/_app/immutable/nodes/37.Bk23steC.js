import{a as Ut,p as Se,c as Fe,u as Ne}from"../chunks/CJGyQpNN.js";import{g as It,$ as pe}from"../chunks/DWQ0JXRY.js";import{bq as Ct,br as Tt,bs as Mt,G as Bt,bl as dt,ar as Xe,aP as Et,aN as Nt,bt as Ft,bu as Wt,bv as Vt,bw as We,n as vt,bx as jt,by as Kt,bz as qt,aq as Ht,a8 as et,a9 as tt,bA as Rt,bB as Gt,bC as Qt,X as Xt}from"../chunks/BP6NvnZ7.js";import"../chunks/DsnmJJEf.js";import{p as $e,f as le,a as _e,c as l,r as n,s as o,j as q,g as e,n as R,t as U,u as r,h as te,i as ne,W as Te,b as rt,aD as Jt}from"../chunks/D0CSSuTl.js";import{s as me,b as $t,a as re,d as ye,f as Ke,p as Ae,m as Le}from"../chunks/zonMEKN6.js";import{U as Yt}from"../chunks/tK_U6--f.js";import{c as ze,a,t as G,f as L}from"../chunks/Bd1JH_Ov.js";import{i as ie}from"../chunks/D8NIUdeB.js";import{p as Zt}from"../chunks/DxRnQWdm.js";import{s as D,d as er,e as Ie,o as Me}from"../chunks/C8vxa4mj.js";import{bM as tr,T as xe,B as fe,F as be,ad as Pe,a as He,ek as _t,G as rr,v as zt,I as sr,w as ar,W as pt,cG as or,aU as lr,el as nr,em as ir,aX as dr,a5 as cr,aV as ur,en as vr,eo as $r,ep as _r,aO as pr,eq as mr,er as fr,dB as gr}from"../chunks/D-UYCH9y.js";import{O as Dt}from"../chunks/Cq6696VF.js";import{P as Je,a as hr}from"../chunks/BTAXfAJZ.js";import{f as ct}from"../chunks/oXVv5nIS.js";import{h as br,a as yr}from"../chunks/DWYTmzwL.js";import{F as Pr}from"../chunks/BMcevgEe.js";import{S as xr,H as st,q as wr}from"../chunks/Tw41aoDi.js";import{F as oe}from"../chunks/BgQCgJ0_.js";import{P as qe}from"../chunks/BzOEcAd-.js";import{H as kr}from"../chunks/Dt4pkAJO.js";import{M as Ot,a as At,m as De,b as Sr}from"../chunks/BHTYC334.js";import{t as Ce,h as ge,e as Re}from"../chunks/DLePdI2u.js";import{S as Cr}from"../chunks/BmwRoygt.js";import{S as ut}from"../chunks/Dm18XTJp.js";import{b as Tr,c as at,j as Ye,k as zr,Q as mt,O as Ve}from"../chunks/0qPXRVhz.js";import{Q as Dr,P as ft,O as Or,l as Ue,af as gt,a8 as ht,ag as bt,al as yt,am as Pt,s as xt,T as Ar,U as Ze,R as Ee}from"../chunks/DUXNbmIP.js";import{a as ve,S as Lr}from"../chunks/DHJ-Acqg.js";import{S as Ur}from"../chunks/CeWyqUEf.js";import{S as ue}from"../chunks/i7F918yQ.js";import{N as Ir}from"../chunks/XSsqx5Lk.js";import{s as Mr,b as Br}from"../chunks/DMMOBWd8.js";import{i as Er}from"../chunks/7tRQeUtl.js";import{T as ot,a as lt,b as we,c as nt,d as it,e as ke}from"../chunks/B5_uSbnk.js";import{s as Nr}from"../chunks/CMI33r64.js";import{C as Fr}from"../chunks/DCmy867i.js";import{L as Wr}from"../chunks/DU5vAHPb.js";import{S as Vr}from"../chunks/Db3OdFQt.js";import{t as wt}from"../chunks/BOeC8ZMP.js";import{D as kt}from"../chunks/DHPLL61V.js";import{g as jr}from"../chunks/gvLJu3l0.js";import{U as Lt}from"../chunks/CIJfCxLq.js";import{a as Kr}from"../chunks/Biw8UfMB.js";import{L as qr}from"../chunks/a0Pc6LmW.js";import{T as St}from"../chunks/DpgobuAR.js";import{g as Hr,a as Rr}from"../chunks/MSi8Qptc.js";import{p as Gr}from"../chunks/BqlTOgs2.js";import{c as Qr}from"../chunks/CP7YXIYz.js";import{c as Xr}from"../chunks/EJpTVx7Z.js";import{I as je}from"../chunks/s_2UW97Q.js";import{S as Jr}from"../chunks/BEqGsB-Y.js";import{C as Yr}from"../chunks/cX31cXxY.js";const Zr=(async({url:ee})=>{await Ut(ee);const z=await Ct(),s=await Tt(),t=await It();return{keys:z,sessions:s,meta:{title:t("settings")}}}),ko=Object.freeze(Object.defineProperty({__proto__:null,load:Zr},Symbol.toStringTag,{value:"Module"}));var es=L("<!> <!>",1),ts=L('<div> </div> <hr class="my-2 h-px w-full border-0 bg-gray-200 dark:bg-gray-600"/> <section><!></section>',1),rs=L("<div> </div>");function ss(ee,z){$e(z,!0);const s=()=>re(pe,"$t",t),[t,O]=me();let x=te("");const $=async()=>{await br({password:e(x)})&&z.onClose()},A=r(()=>({title:s()("reset"),size:"small",icon:tr,onClose:z.onClose}));var W=ze(),K=le(W);{var P=T=>{{let H=r(()=>s()("reset")),M=r(()=>!e(x));Pr(T,$t(()=>e(A),{submitColor:"danger",get submitText(){return e(H)},get disabled(){return e(M)},onSubmit:$,children:(w,_)=>{xr(w,{gap:4,children:(g,c)=>{var b=ts(),d=le(b),v=l(d,!0);n(d);var f=o(d,4),i=l(f);{let N=r(()=>s()("confirm_password"));oe(i,{get label(){return e(N)},required:!0,children:(V,k)=>{var m=es(),p=le(m);qe(p,{autocomplete:"current-password",get value(){return e(x)},set value(u){q(x,u,!0)}});var h=o(p,2);kr(h,{color:"muted",children:(u,E)=>{R();var Y=G();U(y=>D(Y,y),[()=>s()("reset_pin_code_with_password")]),a(u,Y)},$$slots:{default:!0}}),a(V,m)},$$slots:{default:!0}})}n(f),U(N=>D(v,N),[()=>s()("reset_pin_code_description")]),a(g,b)},$$slots:{default:!0}})},$$slots:{default:!0}}))}},C=T=>{Ot(T,$t(()=>e(A),{closeOnBackdropClick:!0,children:(H,M)=>{At(H,{children:(w,_)=>{var g=rs(),c=l(g,!0);n(g),U(b=>D(c,b),[()=>s()("reset_pin_code_description")]),a(w,g)},$$slots:{default:!0}})},$$slots:{default:!0}}))};ie(K,T=>{ct.value.passwordLogin===!1?T(P):T(C,!1)})}a(ee,W),_e(),O()}var as=L('<section class="my-4"><div><form autocomplete="off" class="mt-6"><div class="flex flex-col gap-6 place-items-center place-content-center"><!> <!> <!> <!> <button type="button"><!></button></div> <div class="flex justify-end gap-2 mt-4"><!> <!></div></form></div></section>');function os(ee,z){$e(z,!0);const s=()=>re(pe,"$t",t),[t,O]=me();let x=te(""),$=te(""),A=te(""),W=te(!1),K=r(()=>e(x).length===6&&e(A).length===6&&e($)===e(A));const P=async k=>{k.preventDefault(),await C()},C=async()=>{q(W,!0);try{await Mt({pinCodeChangeDto:{pinCode:e(x),newPinCode:e($)}}),T(),Ce.success(s()("pin_code_changed_successfully"))}catch(k){ge(k,s()("unable_to_change_pin_code"))}finally{q(W,!1)}},T=()=>{q(x,""),q($,""),q(A,"")};var H=as(),M=l(H),w=l(M),_=l(w),g=l(_);st(g,{children:(k,m)=>{R();var p=G();U(h=>D(p,h),[()=>s()("change_pin_code")]),a(k,p)},$$slots:{default:!0}});var c=o(g,2);{let k=r(()=>s()("current_pin_code"));Je(c,{get label(){return e(k)},tabindexStart:1,pinLength:6,get value(){return e(x)},set value(m){q(x,m,!0)}})}var b=o(c,2);{let k=r(()=>s()("new_pin_code"));Je(b,{get label(){return e(k)},tabindexStart:7,pinLength:6,get value(){return e($)},set value(m){q($,m,!0)}})}var d=o(b,2);{let k=r(()=>s()("confirm_new_pin_code"));Je(d,{get label(){return e(k)},tabindexStart:13,pinLength:6,get value(){return e(A)},set value(m){q(A,m,!0)}})}var v=o(d,2);v.__click=()=>De.show(ss,{});var f=l(v);xe(f,{color:"muted",class:"underline",size:"small",children:(k,m)=>{R();var p=G();U(h=>D(p,h),[()=>s()("forgot_pin_code_question")]),a(k,p)},$$slots:{default:!0}}),n(v),n(_);var i=o(_,2),N=l(i);fe(N,{shape:"round",color:"secondary",type:"button",size:"small",onclick:T,children:(k,m)=>{R();var p=G();U(h=>D(p,h),[()=>s()("clear")]),a(k,p)},$$slots:{default:!0}});var V=o(N,2);{let k=r(()=>!e(K));fe(V,{shape:"round",type:"submit",size:"small",get loading(){return e(W)},get disabled(){return e(k)},children:(m,p)=>{R();var h=G();U(u=>D(h,u),[()=>s()("save")]),a(m,h)},$$slots:{default:!0}})}n(i),n(w),n(M),n(H),Ie("submit",w,P),be(1,M,()=>Pe,()=>({duration:200})),a(ee,H),_e(),O()}er(["click"]);var ls=L("<div><!></div>"),ns=L("<div><!></div>"),is=L("<!> <section><!></section>",1);function ds(ee,z){$e(z,!0);let s=te(!1);Me(async()=>{const{pinCode:P}=await Bt();q(s,P,!0)});const t=()=>{q(s,!1)};var O=is(),x=le(O);Dt(x,{onUserPinCodeReset:t});var $=o(x,2),A=l($);{var W=P=>{var C=ls(),T=l(C);os(T,{}),n(C),be(1,C,()=>Pe,()=>({duration:200})),a(P,C)},K=P=>{var C=ns(),T=l(C);hr(T,{onCreated:()=>q(s,!0)}),n(C),be(1,C,()=>Pe,()=>({duration:200})),a(P,C)};ie(A,P=>{e(s)?P(W):P(K,!1)})}n($),a(ee,O),_e()}var cs=L('<section class="my-4"><div><form autocomplete="off"><div class="ms-4 mt-4 flex flex-col gap-4"><!> <!> <div class="flex justify-end"><!></div></div></form></div></section>');function us(ee,z){$e(z,!0);const s=()=>re(Se,"$preferences",O),t=()=>re(pe,"$t",O),[O,x]=me();let $=te(ne(Dr(s()?.download?.archiveSize||4,ft.GiB))),A=te(ne(s()?.download?.includeEmbeddedVideos||!1));const W=async()=>{try{const c=await dt({userPreferencesUpdateDto:{download:{archiveSize:Math.floor(Or(e($),ft.GiB)),includeEmbeddedVideos:e(A)}}});ye(Se,c),Ce.success(t()("saved_settings"))}catch(c){ge(c,t()("errors.unable_to_update_settings"))}},K=c=>{c.preventDefault()};var P=cs(),C=l(P),T=l(C),H=l(T),M=l(H);{let c=r(()=>t()("archive_size")),b=r(()=>t()("archive_size_description"));Cr(M,{get inputType(){return Tr.NUMBER},get label(){return e(c)},get description(){return e(b)},get value(){return e($)},set value(d){q($,d,!0)}})}var w=o(M,2);{let c=r(()=>t()("download_include_embedded_motion_videos")),b=r(()=>t()("download_include_embedded_motion_videos_description"));ut(w,{get title(){return e(c)},get subtitle(){return e(b)},get checked(){return e(A)},set checked(d){q(A,d,!0)}})}var _=o(w,2),g=l(_);fe(g,{shape:"round",type:"submit",size:"small",onclick:()=>W(),children:(c,b)=>{R();var d=G();U(v=>D(d,v),[()=>t()("save")]),a(c,d)},$$slots:{default:!0}}),n(_),n(H),n(T),n(C),n(P),Ie("submit",T,K),be(1,C,()=>Pe,()=>({duration:500})),a(ee,P),_e(),x()}var vs=L('<div class="ms-4 mt-6 flex flex-col gap-4"><!></div>'),$s=L('<div class="ms-4 mt-6 flex flex-col gap-4"><!> <!></div>'),_s=L('<div class="ms-4 mt-6 flex flex-col gap-4"><!> <!></div>'),ps=L('<div class="ms-4 mt-6 flex flex-col gap-4"><!> <!></div>'),ms=L('<div class="ms-4 mt-6 flex flex-col gap-4"><!></div>'),fs=L('<div class="ms-4 mt-6 flex flex-col gap-4"><!> <!></div>'),gs=L('<div class="ms-4 mt-6 flex flex-col gap-4"><!> <!></div>'),hs=L('<div class="ms-4 mt-6 flex flex-col gap-4"><!></div>'),bs=L('<section class="my-4"><div><form autocomplete="off"><div class="ms-4 mt-4 flex flex-col"><!> <!> <!> <!> <!> <!> <!> <!> <div class="flex justify-end mt-4"><!></div></div></form></div></section>');function ys(ee,z){$e(z,!0);const s=()=>re(Se,"$preferences",O),t=()=>re(pe,"$t",O),[O,x]=me();let $=te(ne(s()?.albums?.defaultAssetOrder??Xe.Desc)),A=te(ne(s()?.folders?.enabled??!1)),W=te(ne(s()?.folders?.sidebarWeb??!1)),K=te(ne(s()?.memories?.enabled??!0)),P=te(ne(s()?.memories?.duration??5)),C=te(ne(s()?.people?.enabled??!1)),T=te(ne(s()?.people?.sidebarWeb??!1)),H=te(ne(s()?.ratings?.enabled??!1)),M=te(ne(s()?.sharedLinks?.enabled??!0)),w=te(ne(s()?.sharedLinks?.sidebarWeb??!1)),_=te(ne(s()?.tags?.enabled??!1)),g=te(ne(s()?.tags?.sidebarWeb??!1)),c=te(ne(s()?.cast?.gCastEnabled??!1));const b=async()=>{try{const S=await dt({userPreferencesUpdateDto:{albums:{defaultAssetOrder:e($)},folders:{enabled:e(A),sidebarWeb:e(W)},memories:{enabled:e(K),duration:e(P)},people:{enabled:e(C),sidebarWeb:e(T)},ratings:{enabled:e(H)},sharedLinks:{enabled:e(M),sidebarWeb:e(w)},tags:{enabled:e(_),sidebarWeb:e(g)},cast:{gCastEnabled:e(c)}}});ye(Se,{...S}),Ce.success(t()("saved_settings"))}catch(S){ge(S,t()("errors.unable_to_update_settings"))}},d=S=>{S.preventDefault()};var v=bs(),f=l(v),i=l(f),N=l(i),V=l(N);{let S=r(()=>t()("albums")),X=r(()=>t()("albums_feature_description"));ve(V,{key:"albums",get title(){return e(S)},get subtitle(){return e(X)},children:(B,ae)=>{var Q=vs(),j=l(Q);{let J=r(()=>t()("albums_default_sort_order")),F=r(()=>t()("albums_default_sort_order_description"));oe(j,{get label(){return e(J)},get description(){return e(F)},children:(I,se)=>{{let de=r(()=>[{label:t()("oldest_first"),value:Xe.Asc},{label:t()("newest_first"),value:Xe.Desc}]);Ur(I,{get options(){return e(de)},get value(){return e($)},set value(ce){q($,ce,!0)}})}},$$slots:{default:!0}})}n(Q),a(B,Q)},$$slots:{default:!0}})}var k=o(V,2);{let S=r(()=>t()("folders")),X=r(()=>t()("folders_feature_description"));ve(k,{key:"folders",get title(){return e(S)},get subtitle(){return e(X)},children:(B,ae)=>{var Q=$s(),j=l(Q);{let I=r(()=>t()("enable"));oe(j,{get label(){return e(I)},children:(se,de)=>{ue(se,{get checked(){return e(A)},set checked(ce){q(A,ce,!0)}})},$$slots:{default:!0}})}var J=o(j,2);{var F=I=>{{let se=r(()=>t()("sidebar")),de=r(()=>t()("sidebar_display_description"));oe(I,{get label(){return e(se)},get description(){return e(de)},children:(ce,Oe)=>{ue(ce,{get checked(){return e(W)},set checked(he){q(W,he,!0)}})},$$slots:{default:!0}})}};ie(J,I=>{e(A)&&I(F)})}n(Q),a(B,Q)},$$slots:{default:!0}})}var m=o(k,2);{let S=r(()=>t()("time_based_memories")),X=r(()=>t()("photos_from_previous_years"));ve(m,{key:"memories",get title(){return e(S)},get subtitle(){return e(X)},children:(B,ae)=>{var Q=_s(),j=l(Q);{let F=r(()=>t()("enable"));oe(j,{get label(){return e(F)},children:(I,se)=>{ue(I,{get checked(){return e(K)},set checked(de){q(K,de,!0)}})},$$slots:{default:!0}})}var J=o(j,2);{let F=r(()=>t()("duration")),I=r(()=>t()("time_based_memories_duration"));oe(J,{get label(){return e(F)},get description(){return e(I)},children:(se,de)=>{Ir(se,{get value(){return e(P)},set value(ce){q(P,ce,!0)}})},$$slots:{default:!0}})}n(Q),a(B,Q)},$$slots:{default:!0}})}var p=o(m,2);{let S=r(()=>t()("people")),X=r(()=>t()("people_feature_description"));ve(p,{key:"people",get title(){return e(S)},get subtitle(){return e(X)},children:(B,ae)=>{var Q=ps(),j=l(Q);{let I=r(()=>t()("enable"));oe(j,{get label(){return e(I)},children:(se,de)=>{ue(se,{get checked(){return e(C)},set checked(ce){q(C,ce,!0)}})},$$slots:{default:!0}})}var J=o(j,2);{var F=I=>{{let se=r(()=>t()("sidebar")),de=r(()=>t()("sidebar_display_description"));oe(I,{get label(){return e(se)},get description(){return e(de)},children:(ce,Oe)=>{ue(ce,{get checked(){return e(T)},set checked(he){q(T,he,!0)}})},$$slots:{default:!0}})}};ie(J,I=>{e(C)&&I(F)})}n(Q),a(B,Q)},$$slots:{default:!0}})}var h=o(p,2);{let S=r(()=>t()("rating")),X=r(()=>t()("rating_description"));ve(h,{key:"rating",get title(){return e(S)},get subtitle(){return e(X)},children:(B,ae)=>{var Q=ms(),j=l(Q);{let J=r(()=>t()("enable"));oe(j,{get label(){return e(J)},children:(F,I)=>{ue(F,{get checked(){return e(H)},set checked(se){q(H,se,!0)}})},$$slots:{default:!0}})}n(Q),a(B,Q)},$$slots:{default:!0}})}var u=o(h,2);{let S=r(()=>t()("shared_links")),X=r(()=>t()("shared_links_description"));ve(u,{key:"shared-links",get title(){return e(S)},get subtitle(){return e(X)},children:(B,ae)=>{var Q=fs(),j=l(Q);{let I=r(()=>t()("enable"));oe(j,{get label(){return e(I)},children:(se,de)=>{ue(se,{get checked(){return e(M)},set checked(ce){q(M,ce,!0)}})},$$slots:{default:!0}})}var J=o(j,2);{var F=I=>{{let se=r(()=>t()("sidebar")),de=r(()=>t()("sidebar_display_description"));oe(I,{get label(){return e(se)},get description(){return e(de)},children:(ce,Oe)=>{ue(ce,{get checked(){return e(w)},set checked(he){q(w,he,!0)}})},$$slots:{default:!0}})}};ie(J,I=>{e(M)&&I(F)})}n(Q),a(B,Q)},$$slots:{default:!0}})}var E=o(u,2);{let S=r(()=>t()("tags")),X=r(()=>t()("tag_feature_description"));ve(E,{key:"tags",get title(){return e(S)},get subtitle(){return e(X)},children:(B,ae)=>{var Q=gs(),j=l(Q);{let I=r(()=>t()("enable"));oe(j,{get label(){return e(I)},children:(se,de)=>{ue(se,{get checked(){return e(_)},set checked(ce){q(_,ce,!0)}})},$$slots:{default:!0}})}var J=o(j,2);{var F=I=>{{let se=r(()=>t()("sidebar")),de=r(()=>t()("sidebar_display_description"));oe(I,{get label(){return e(se)},get description(){return e(de)},children:(ce,Oe)=>{ue(ce,{get checked(){return e(g)},set checked(he){q(g,he,!0)}})},$$slots:{default:!0}})}};ie(J,I=>{e(_)&&I(F)})}n(Q),a(B,Q)},$$slots:{default:!0}})}var Y=o(E,2);{let S=r(()=>t()("cast")),X=r(()=>t()("cast_description"));ve(Y,{key:"cast",get title(){return e(S)},get subtitle(){return e(X)},children:(B,ae)=>{var Q=hs(),j=l(Q);{let J=r(()=>t()("gcast_enabled")),F=r(()=>t()("gcast_enabled_description"));oe(j,{get label(){return e(J)},get description(){return e(F)},children:(I,se)=>{ue(I,{get checked(){return e(c)},set checked(de){q(c,de,!0)}})},$$slots:{default:!0}})}n(Q),a(B,Q)},$$slots:{default:!0}})}var y=o(Y,2),Z=l(y);fe(Z,{shape:"round",type:"submit",size:"small",onclick:()=>b(),children:(S,X)=>{R();var B=G();U(ae=>D(B,ae),[()=>t()("save")]),a(S,B)},$$slots:{default:!0}}),n(y),n(N),n(i),n(f),n(v),Ie("submit",i,d),be(1,f,()=>Pe,()=>({duration:500})),a(ee,v),_e(),x()}var Ps=L('<section class="my-4"><div><form autocomplete="off"><div class="ms-4 mt-4 flex flex-col gap-6"><!> <!> <!></div> <div class="flex justify-end mt-4"><!></div></form></div></section>');function xs(ee,z){$e(z,!0);const s=()=>re(Se,"$preferences",O),t=()=>re(pe,"$t",O),[O,x]=me();let $=te(ne(s()?.emailNotifications?.enabled??!0)),A=te(ne(s()?.emailNotifications?.albumInvite??!0)),W=te(ne(s()?.emailNotifications?.albumUpdate??!0));const K=async()=>{try{const v=await dt({userPreferencesUpdateDto:{emailNotifications:{enabled:e($),albumInvite:e($)&&e(A),albumUpdate:e($)&&e(W)}}});Ke(Se,Te(s).emailNotifications.enabled=v.emailNotifications.enabled,Te(s)),Ke(Se,Te(s).emailNotifications.albumInvite=v.emailNotifications.albumInvite,Te(s)),Ke(Se,Te(s).emailNotifications.albumUpdate=v.emailNotifications.albumUpdate,Te(s)),Ce.success(t()("saved_settings"))}catch(v){ge(v,t()("errors.unable_to_update_settings"))}},P=v=>{v.preventDefault()},C=r(()=>!e($));var T=Ps(),H=l(T),M=l(H),w=l(M),_=l(w);{let v=r(()=>t()("enable")),f=r(()=>t()("notification_toggle_setting_description"));oe(_,{get label(){return e(v)},get description(){return e(f)},children:(i,N)=>{ue(i,{get checked(){return e($)},set checked(V){q($,V,!0)}})},$$slots:{default:!0}})}var g=o(_,2);{let v=r(()=>t()("album_added")),f=r(()=>t()("album_added_notification_setting_description"));oe(g,{get label(){return e(v)},get description(){return e(f)},get disabled(){return e(C)},children:(i,N)=>{ue(i,{get checked(){return e(A)},set checked(V){q(A,V,!0)}})},$$slots:{default:!0}})}var c=o(g,2);{let v=r(()=>t()("album_updated")),f=r(()=>t()("album_updated_setting_description"));oe(c,{get label(){return e(v)},get description(){return e(f)},get disabled(){return e(C)},children:(i,N)=>{ue(i,{get checked(){return e(W)},set checked(V){q(W,V,!0)}})},$$slots:{default:!0}})}n(w);var b=o(w,2),d=l(b);fe(d,{shape:"round",type:"submit",size:"small",onclick:()=>K(),children:(v,f)=>{R();var i=G();U(N=>D(i,N),[()=>t()("save")]),a(v,i)},$$slots:{default:!0}}),n(b),n(M),n(H),n(T),Ie("submit",M,P),be(1,H,()=>Pe,()=>({duration:500})),a(ee,T),_e(),x()}var ws=L('<p class="dark:text-white text-sm mt-1 col-start-2"> </p>'),ks=L('<p class="dark:text-white"> </p>'),Ss=L('<div class="text-right mt-4"><!></div>'),Cs=L('<div class="bg-gray-50 border border-immich-dark-primary/20 dark:bg-immich-dark-primary/15 p-6 pe-12 rounded-xl flex place-content-center gap-4"><!> <div><p class="text-primary font-semibold text-lg"> </p> <!></div></div> <!>',1),Ts=L('<p class="dark:text-white text-sm mt-1 col-start-2"> </p>'),zs=L('<div class="bg-gray-50 border border-immich-dark-primary/20 dark:bg-immich-dark-primary/15 p-6 pe-12 rounded-xl flex place-content-center gap-4"><!> <div><p class="text-primary font-semibold text-lg"> </p> <!></div></div> <div class="text-right mt-4"><!></div>',1),Ds=L('<div class="mb-4"><!></div> <!>',1),Os=L('<section class="my-4"><div><!></div></section>');function As(ee,z){$e(z,!0);const s=()=>re(Ne,"$user",A),t=()=>re(K,"$isPurchased",A),O=()=>re(pe,"$t",A),x=()=>re(Se,"$preferences",A),$=()=>re(Ue,"$locale",A),[A,W]=me(),{isPurchased:K}=Fe;let P=te(!1),C=te(null);const T=async()=>{const f=await Et();q(P,f.licensed,!0);const i=await Nt();i.license&&ye(Ne,{...s(),license:i.license}),e(P)&&s().isAdmin&&q(C,await H(),!0)},H=async()=>{try{return await Ft()}catch(f){if(Er(f)&&f.status===404)return null;throw f}};Me(async()=>{t()&&await T()});const M=async()=>{try{if(!await De.showDialog({title:O()("purchase_remove_product_key"),prompt:O()("purchase_remove_product_key_prompt"),confirmText:O()("remove")}))return;await Wt(),Fe.setPurchaseStatus(!1)}catch(f){ge(f,O()("errors.failed_to_remove_product_key"))}},w=async()=>{try{if(!await De.showDialog({title:O()("purchase_remove_server_product_key"),prompt:O()("purchase_remove_server_product_key_prompt"),confirmText:O()("remove")}))return;await Vt(),Fe.setPurchaseStatus(!1)}catch(f){ge(f,O()("errors.failed_to_remove_product_key"))}},_=async()=>{Fe.setPurchaseStatus(!0),await T()};var g=Os(),c=l(g),b=l(c);{var d=f=>{var i=Ds(),N=le(i),V=l(N);{let h=r(()=>O()("show_supporter_badge")),u=r(()=>O()("show_supporter_badge_description"));ut(V,{get title(){return e(h)},get subtitle(){return e(u)},get onToggle(){return Mr},get checked(){return x().purchase.showSupportBadge},set checked(E){Ke(Se,Te(x).purchase.showSupportBadge=E,Te(x))}})}n(N);var k=o(N,2);{var m=h=>{var u=Cs(),E=le(u),Y=l(E);He(Y,{get icon(){return _t},size:"56",class:"text-primary"});var y=o(Y,2),Z=l(y),S=l(Z,!0);n(Z);var X=o(Z,2);{var B=J=>{var F=ws(),I=l(F,!0);n(F),U(se=>D(I,se),[()=>O()("purchase_activated_time",{values:{date:new Date(e(C).activatedAt).toLocaleString($(),at.settings)}})]),a(J,F)},ae=J=>{var F=ks(),I=l(F,!0);n(F),U(se=>D(I,se),[()=>O()("purchase_settings_server_activated")]),a(J,F)};ie(X,J=>{s().isAdmin&&e(C)?.activatedAt?J(B):J(ae,!1)})}n(y),n(E);var Q=o(E,2);{var j=J=>{var F=Ss(),I=l(F);fe(I,{shape:"round",size:"small",color:"danger",onclick:w,children:(se,de)=>{R();var ce=G();U(Oe=>D(ce,Oe),[()=>O()("purchase_button_remove_key")]),a(se,ce)},$$slots:{default:!0}}),n(F),a(J,F)};ie(Q,J=>{s().isAdmin&&J(j)})}U(J=>D(S,J),[()=>O()("purchase_server_title")]),a(h,u)},p=h=>{var u=zs(),E=le(u),Y=l(E);He(Y,{get icon(){return _t},size:"56",class:"text-primary"});var y=o(Y,2),Z=l(y),S=l(Z,!0);n(Z);var X=o(Z,2);{var B=j=>{var J=Ts(),F=l(J,!0);n(J),U(I=>D(F,I),[()=>O()("purchase_activated_time",{values:{date:new Date(s().license?.activatedAt).toLocaleString($(),at.settings)}})]),a(j,J)};ie(X,j=>{s().license?.activatedAt&&j(B)})}n(y),n(E);var ae=o(E,2),Q=l(ae);fe(Q,{shape:"round",size:"small",color:"danger",onclick:M,children:(j,J)=>{R();var F=G();U(I=>D(F,I),[()=>O()("purchase_button_remove_key")]),a(j,F)},$$slots:{default:!0}}),n(ae),U(j=>D(S,j),[()=>O()("purchase_individual_title")]),a(h,u)};ie(k,h=>{e(P)?h(m):h(p,!1)})}a(f,i)},v=f=>{Br(f,{onActivate:_,showTitle:!1})};ie(b,f=>{t()?f(d):f(v,!1)})}n(c),n(g),be(1,c,()=>Pe,()=>({duration:500})),a(ee,g),_e(),W()}var Ls=L("<!> <!> <!> <!>",1),Us=L("<!> <!> <!> <!>",1),Is=L("<!> <!> <!> <!>",1),Ms=L("<!> <!>",1),Bs=L("<!> <!>",1),Es=L("<!> <!>",1),Ns=L("<!> <!>",1),Fs=L('<section class="my-6 w-full"><!> <!> <!> <!></section>');function Ws(ee,z){$e(z,!0);const s=()=>re(Ue,"$locale",O),t=()=>re(pe,"$t",O),[O,x]=me(),$=(c,b=rt,d=rt)=>{it(c,{children:(v,f)=>{var i=Ls(),N=le(i);ke(N,{class:"w-1/4",children:(p,h)=>{R();var u=G();U(()=>D(u,b())),a(p,u)},$$slots:{default:!0}});var V=o(N,2);ke(V,{class:"w-1/4",children:(p,h)=>{R();var u=G();U(E=>D(u,E),[()=>d().images.toLocaleString(s())]),a(p,u)},$$slots:{default:!0}});var k=o(V,2);ke(k,{class:"w-1/4",children:(p,h)=>{R();var u=G();U(E=>D(u,E),[()=>d().videos.toLocaleString(s())]),a(p,u)},$$slots:{default:!0}});var m=o(k,2);ke(m,{class:"w-1/4",children:(p,h)=>{R();var u=G();U(E=>D(u,E),[()=>d().total.toLocaleString(s())]),a(p,u)},$$slots:{default:!0}}),a(v,i)},$$slots:{default:!0}})};let A=te(ne({videos:0,images:0,total:0})),W=te(ne({videos:0,images:0,total:0})),K=te(ne({videos:0,images:0,total:0})),P=te(ne({videos:0,images:0,total:0})),C=te(ne({owned:0,shared:0,notShared:0}));const T=async()=>{await(async c=>{var b=Jt(c,5);q(A,b[0],!0),q(W,b[1],!0),q(K,b[2],!0),q(P,b[3],!0),q(C,b[4],!0)})(await Promise.all([We({visibility:vt.Timeline}),We({isFavorite:!0}),We({visibility:vt.Archive}),We({isTrashed:!0}),jt()]))};Me(async()=>{await T()});var H=Fs(),M=l(H);st(M,{size:"tiny",children:(c,b)=>{R();var d=G();U(v=>D(d,v),[()=>t()("photos_and_videos")]),a(c,d)},$$slots:{default:!0}});var w=o(M,2);ot(w,{striped:!0,spacing:"small",class:"mt-4",size:"small",children:(c,b)=>{var d=Ms(),v=le(d);lt(v,{children:(i,N)=>{var V=Us(),k=le(V);we(k,{class:"w-1/4",children:(u,E)=>{R();var Y=G();U(y=>D(Y,y),[()=>t()("view_name")]),a(u,Y)},$$slots:{default:!0}});var m=o(k,2);we(m,{class:"w-1/4",children:(u,E)=>{R();var Y=G();U(y=>D(Y,y),[()=>t()("photos")]),a(u,Y)},$$slots:{default:!0}});var p=o(m,2);we(p,{class:"w-1/4",children:(u,E)=>{R();var Y=G();U(y=>D(Y,y),[()=>t()("videos")]),a(u,Y)},$$slots:{default:!0}});var h=o(p,2);we(h,{class:"w-1/4",children:(u,E)=>{R();var Y=G();U(y=>D(Y,y),[()=>t()("total")]),a(u,Y)},$$slots:{default:!0}}),a(i,V)},$$slots:{default:!0}});var f=o(v,2);nt(f,{children:(i,N)=>{var V=Is(),k=le(V);{let u=r(()=>t()("timeline"));$(k,()=>e(u),()=>e(A))}var m=o(k,2);{let u=r(()=>t()("favorites"));$(m,()=>e(u),()=>e(W))}var p=o(m,2);{let u=r(()=>t()("archive"));$(p,()=>e(u),()=>e(K))}var h=o(p,2);{let u=r(()=>t()("trash"));$(h,()=>e(u),()=>e(P))}a(i,V)},$$slots:{default:!0}}),a(c,d)},$$slots:{default:!0}});var _=o(w,2);st(_,{size:"tiny",class:"mt-8",children:(c,b)=>{R();var d=G();U(v=>D(d,v),[()=>t()("albums")]),a(c,d)},$$slots:{default:!0}});var g=o(_,2);ot(g,{striped:!0,spacing:"small",class:"mt-4",size:"small",children:(c,b)=>{var d=Ns(),v=le(d);lt(v,{children:(i,N)=>{var V=Bs(),k=le(V);we(k,{class:"w-1/2",children:(p,h)=>{R();var u=G();U(E=>D(u,E),[()=>t()("owned")]),a(p,u)},$$slots:{default:!0}});var m=o(k,2);we(m,{class:"w-1/2",children:(p,h)=>{R();var u=G();U(E=>D(u,E),[()=>t()("shared")]),a(p,u)},$$slots:{default:!0}}),a(i,V)},$$slots:{default:!0}});var f=o(v,2);nt(f,{children:(i,N)=>{it(i,{children:(V,k)=>{var m=Es(),p=le(m);ke(p,{class:"w-1/2",children:(u,E)=>{R();var Y=G();U(y=>D(Y,y),[()=>e(C).owned.toLocaleString(s())]),a(u,Y)},$$slots:{default:!0}});var h=o(p,2);ke(h,{class:"w-1/2",children:(u,E)=>{R();var Y=G();U(y=>D(Y,y),[()=>e(C).shared.toLocaleString(s())]),a(u,Y)},$$slots:{default:!0}}),a(V,m)},$$slots:{default:!0}})},$$slots:{default:!0}}),a(c,d)},$$slots:{default:!0}}),n(H),a(ee,H),_e(),x()}var Vs=L('<div class="rounded-full bg-orange-100 px-2 text-[10px] text-orange-900"> </div>'),js=L('<div><div class="flex h-6.5 place-items-center gap-1"><!> <!></div> <!> <div class="flex items-center mt-2 max-w-[300px]"><!> <!></div></div>');function Ks(ee,z){$e(z,!0);const s=()=>re(pe,"$t",t),[t,O]=me();let x=Ae(z,"subtitle",3,""),$=Ae(z,"isEdited",3,!1);var A=js(),W=l(A),K=l(W);Wr(K,{size:"small",children:(_,g)=>{R();var c=G();U(()=>D(c,z.title)),a(_,c)},$$slots:{default:!0}});var P=o(K,2);{var C=_=>{var g=Vs(),c=l(g,!0);n(g),U(b=>D(c,b),[()=>s()("unsaved_change")]),be(3,g,()=>rr,()=>({x:10,duration:200,easing:wr})),a(_,g)};ie(P,_=>{$()&&_(C)})}n(W);var T=o(W,2);xe(T,{size:"small",color:"muted",children:(_,g)=>{R();var c=G();U(()=>D(c,x())),a(_,c)},$$slots:{default:!0}});var H=o(T,2),M=l(H);Fr(M,{get label(){return z.title},hideLabel:!0,get selectedOption(){return z.selectedOption},get options(){return z.options},get placeholder(){return z.comboboxPlaceholder},get onSelect(){return z.onSelect}});var w=o(M,2);Nr(w,()=>z.children??rt),n(H),n(A),a(ee,A),_e(),O()}var qs=L("<!> <!>",1),Hs=L('<section class="my-4"><div><div class="ms-8 mt-4 flex flex-col gap-6"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div></div></section>');function Rs(ee,z){$e(z,!0);const s=()=>re(Ue,"$locale",P),t=()=>re(pe,"$t",P),O=()=>re(gt,"$alwaysLoadOriginalFile",P),x=()=>re(ht,"$playVideoThumbnailOnHover",P),$=()=>re(bt,"$autoPlayVideo",P),A=()=>re(yt,"$loopVideo",P),W=()=>re(Pt,"$alwaysLoadOriginalVideo",P),K=()=>re(xt,"$showDeleteModal",P),[P,C]=me();let T=te(ne(new Date));Me(()=>{const y=setInterval(()=>{q(T,new Date,!0)},1e3);return()=>{clearInterval(y)}});const H=()=>zr.filter(({code:y})=>Intl.NumberFormat.supportedLocalesOf(y).length>0).map(y=>({label:y.name,value:y.code})),M=()=>{ye(Ue,s()==="default"?Ye.code:"default")},w=y=>{y&&ye(Ue,y)};let _=r(()=>Ze(s()).code),g=r(()=>Ar(e(_)).formatDateTime(e(T))),c=r(()=>({value:Ze(e(_)).code||Ye.code,label:Ze(e(_)).name||Ye.name}));var b=Hs(),d=l(b),v=l(d),f=l(v);{let y=r(()=>t()("theme_selection")),Z=r(()=>t()("theme_selection_description"));oe(f,{get label(){return e(y)},get description(){return e(Z)},children:(S,X)=>{ue(S,{get checked(){return wt.theme.system},onCheckedChange:B=>wt.setSystem(B)})},$$slots:{default:!0}})}var i=o(f,2);Vr(i,{showSettingDescription:!0});var N=o(i,2);{let y=r(()=>t()("default_locale")),Z=r(()=>t()("default_locale_description"));oe(N,{get label(){return e(y)},get description(){return e(Z)},children:(S,X)=>{var B=qs(),ae=le(B);{let j=r(()=>s()=="default");ue(ae,{get checked(){return e(j)},onCheckedChange:M})}var Q=o(ae,2);xe(Q,{size:"small",class:"mt-2 font-mono text-sm",children:(j,J)=>{R();var F=G();U(()=>D(F,e(g))),a(j,F)},$$slots:{default:!0}}),a(S,B)},$$slots:{default:!0}})}var V=o(N,2);{var k=y=>{{let Z=r(()=>t()("searching_locales")),S=r(H),X=r(()=>t()("custom_locale")),B=r(()=>t()("custom_locale_description"));Ks(y,{get comboboxPlaceholder(){return e(Z)},get selectedOption(){return e(c)},get options(){return e(S)},get title(){return e(X)},get subtitle(){return e(B)},onSelect:ae=>w(ae?.value)})}};ie(V,y=>{s()!=="default"&&y(k)})}var m=o(V,2);{let y=r(()=>t()("display_original_photos")),Z=r(()=>t()("display_original_photos_setting_description"));oe(m,{get label(){return e(y)},get description(){return e(Z)},children:(S,X)=>{ue(S,{get checked(){return Le(),O()},set checked(B){ye(gt,B)}})},$$slots:{default:!0}})}var p=o(m,2);{let y=r(()=>t()("video_hover_setting")),Z=r(()=>t()("video_hover_setting_description"));oe(p,{get label(){return e(y)},get description(){return e(Z)},children:(S,X)=>{ue(S,{get checked(){return Le(),x()},set checked(B){ye(ht,B)}})},$$slots:{default:!0}})}var h=o(p,2);{let y=r(()=>t()("setting_video_viewer_auto_play_title")),Z=r(()=>t()("setting_video_viewer_auto_play_subtitle"));oe(h,{get label(){return e(y)},get description(){return e(Z)},children:(S,X)=>{ue(S,{get checked(){return Le(),$()},set checked(B){ye(bt,B)}})},$$slots:{default:!0}})}var u=o(h,2);{let y=r(()=>t()("loop_videos")),Z=r(()=>t()("loop_videos_description"));oe(u,{get label(){return e(y)},get description(){return e(Z)},children:(S,X)=>{ue(S,{get checked(){return Le(),A()},set checked(B){ye(yt,B)}})},$$slots:{default:!0}})}var E=o(u,2);{let y=r(()=>t()("play_original_video")),Z=r(()=>t()("play_original_video_setting_description"));oe(E,{get label(){return e(y)},get description(){return e(Z)},children:(S,X)=>{ue(S,{get checked(){return Le(),W()},set checked(B){ye(Pt,B)}})},$$slots:{default:!0}})}var Y=o(E,2);{let y=r(()=>t()("permanent_deletion_warning")),Z=r(()=>t()("permanent_deletion_warning_setting_description"));oe(Y,{get label(){return e(y)},get description(){return e(Z)},children:(S,X)=>{ue(S,{get checked(){return Le(),K()},set checked(B){ye(xt,B)}})},$$slots:{default:!0}})}n(v),n(d),n(b),be(1,d,()=>Pe,()=>({duration:500})),a(ee,b),_e(),C()}var Gs=L('<section class="my-4"><div><form autocomplete="off"><div class="ms-4 mt-4 flex flex-col gap-4"><!> <!> <!> <!> <div class="flex justify-end"><!></div></div></form></div></section>');function Qs(ee,z){$e(z,!0);const s=()=>re(pe,"$t",t),[t,O]=me();let x=te(""),$=te(""),A=te(""),W=te(!1);const K=async d=>{d.preventDefault(),await yr({password:e(x),newPassword:e($),invalidateSessions:e(W)})&&(q(x,""),q($,""),q(A,""))};var P=Gs(),C=l(P),T=l(C),H=l(T),M=l(H);{let d=r(()=>s()("password"));oe(M,{get label(){return e(d)},required:!0,children:(v,f)=>{qe(v,{autocomplete:"current-password",get value(){return e(x)},set value(i){q(x,i,!0)}})},$$slots:{default:!0}})}var w=o(M,2);{let d=r(()=>s()("new_password"));oe(w,{get label(){return e(d)},required:!0,children:(v,f)=>{qe(v,{autocomplete:"new-password",get value(){return e($)},set value(i){q($,i,!0)}})},$$slots:{default:!0}})}var _=o(w,2);{let d=r(()=>s()("confirm_password"));oe(_,{get label(){return e(d)},required:!0,children:(v,f)=>{qe(v,{autocomplete:"new-password",get value(){return e(A)},set value(i){q(A,i,!0)}})},$$slots:{default:!0}})}var g=o(_,2);{let d=r(()=>s()("log_out_all_devices")),v=r(()=>s()("change_password_form_log_out_description"));oe(g,{get label(){return e(d)},get description(){return e(v)},required:!0,children:(f,i)=>{ue(f,{get checked(){return e(W)},set checked(N){q(W,N,!0)}})},$$slots:{default:!0}})}var c=o(g,2),b=l(c);{let d=r(()=>!(e(x)&&e($)&&e($)===e(A)));fe(b,{shape:"round",type:"submit",size:"small",get disabled(){return e(d)},children:(v,f)=>{R();var i=G();U(N=>D(i,N),[()=>s()("save")]),a(v,i)},$$slots:{default:!0}})}n(c),n(H),n(T),n(C),n(P),Ie("submit",T,K),be(1,C,()=>Pe,()=>({duration:500})),a(ee,P),_e(),O()}var Xs=L('<div class="mb-6"><!> <!></div>'),Js=L('<hr class="my-3"/>'),Ys=L("<!> <!>",1),Zs=L('<div class="mb-6"><!> <!></div> <div class="my-3"><hr/></div> <div class="flex justify-end"><!></div>',1),ea=L('<section class="my-4"><!> <!></section>');function ta(ee,z){$e(z,!0);const s=()=>re(pe,"$t",t),[t,O]=me();let x=Ae(z,"devices",15);const $=()=>Tt().then(_=>x(_));let A=r(()=>x().find(_=>_.current)),W=r(()=>x().filter(_=>!_.current));const K=async _=>{if(await De.showDialog({prompt:s()("logout_this_device_confirmation")}))try{await Kt({id:_.id}),Ce.success(s()("logged_out_device"))}catch(c){ge(c,s()("errors.unable_to_log_out_device"))}finally{await $()}},P=async()=>{if(await De.showDialog({prompt:s()("logout_all_device_confirmation")}))try{await qt(),Ce.success(s()("logged_out_all_devices"))}catch(g){ge(g,s()("errors.unable_to_log_out_all_devices"))}finally{await $()}};var C=ea(),T=l(C);{var H=_=>{var g=Xs(),c=l(g);xe(c,{class:"mb-2",fontWeight:"medium",size:"tiny",color:"primary",children:(d,v)=>{R();var f=G();U(i=>D(f,i),[()=>s()("current_device")]),a(d,f)},$$slots:{default:!0}});var b=o(c,2);kt(b,{get session(){return e(A)}}),n(g),a(_,g)};ie(T,_=>{e(A)&&_(H)})}var M=o(T,2);{var w=_=>{var g=Zs(),c=le(g),b=l(c);xe(b,{class:"mb-2",fontWeight:"medium",size:"tiny",color:"primary",children:(i,N)=>{R();var V=G();U(k=>D(V,k),[()=>s()("other_devices")]),a(i,V)},$$slots:{default:!0}});var d=o(b,2);Re(d,19,()=>e(W),i=>i.id,(i,N,V)=>{var k=Ys(),m=le(k);kt(m,{get session(){return e(N)},onDelete:()=>K(e(N))});var p=o(m,2);{var h=u=>{var E=Js();a(u,E)};ie(p,u=>{e(V)!==e(W).length-1&&u(h)})}a(i,k)}),n(c);var v=o(c,4),f=l(v);fe(f,{shape:"round",color:"danger",size:"small",onclick:P,children:(i,N)=>{R();var V=G();U(k=>D(V,k),[()=>s()("log_out_all_devices")]),a(i,V)},$$slots:{default:!0}}),n(v),a(_,g)};ie(M,_=>{e(W).length>0&&_(w)})}n(C),a(ee,C),_e(),O()}var ra=L('<div class="flex place-content-center place-items-center"><!></div>'),sa=L('<section class="my-4"><div><div class="flex justify-end"><!></div></div></section>');function aa(ee,z){$e(z,!0);const s=()=>re(pe,"$t",t),[t,O]=me();let x=Ae(z,"user",15),$=te(!0);Me(async()=>{if(Ee.isCallback(globalThis.location))try{q($,!0),x(await Ee.link(globalThis.location)),Ce.success(s()("linked_oauth_account"))}catch(M){ge(M,s()("errors.unable_to_link_oauth_account"))}finally{await jr("?open=oauth")}q($,!1)});const A=async()=>{try{x(await Ee.unlink()),Ce.success(s()("unlinked_oauth_account"))}catch(M){ge(M,s()("errors.unable_to_unlink_account"))}};var W=sa(),K=l(W),P=l(K),C=l(P);{var T=M=>{var w=ra(),_=l(w);zt(_,{}),n(w),a(M,w)},H=M=>{var w=ze(),_=le(w);{var g=c=>{var b=ze(),d=le(b);{var v=i=>{fe(i,{shape:"round",size:"small",onclick:()=>A(),children:(N,V)=>{R();var k=G();U(m=>D(k,m),[()=>s()("unlink_oauth")]),a(N,k)},$$slots:{default:!0}})},f=i=>{fe(i,{shape:"round",size:"small",onclick:()=>Ee.authorize(globalThis.location),children:(N,V)=>{R();var k=G();U(m=>D(k,m),[()=>s()("link_to_oauth")]),a(N,k)},$$slots:{default:!0}})};ie(d,i=>{x().oauthId?i(v):i(f,!1)})}a(c,b)};ie(_,c=>{ct.value.oauth&&c(g)},!0)}a(M,w)};ie(C,M=>{e($)?M(T):M(H,!1)})}n(P),n(K),n(W),be(1,K,()=>Pe,()=>({duration:500})),a(ee,W),_e(),O()}var oa=L('<!> <div class="text-start grow"><!> <!></div>',1),la=L('<div class="immich-scrollbar max-h-75 overflow-y-auto gap-2 flex flex-col"><!> <!></div>'),na=L('<p class="py-5 text-sm"> </p>'),ia=L('<div class="w-full flex place-items-center place-content-center"><!></div>');function da(ee,z){$e(z,!0);const s=()=>re(pe,"$t",t),[t,O]=me();let x=te(ne([])),$=te(ne([]));const A=async()=>{let K=await Ht();K=K.filter(T=>T.id!==z.user.id);const P=await et({direction:tt.SharedBy}),C=new Set(P.map(T=>T.id));q(x,K.filter(T=>!C.has(T.id)),!0)},W=K=>{q($,e($).includes(K)?e($).filter(P=>P.id!==K.id):[...e($),K],!0)};{let K=r(()=>s()("add_partner"));Ot(ee,{get title(){return e(K)},get onClose(){return z.onClose},size:"small",children:(P,C)=>{At(P,{children:(T,H)=>{var M=ze(),w=le(M);Kr(w,A,_=>{var g=ia(),c=l(g);zt(c,{}),n(g),a(_,g)},(_,g)=>{var c=ze(),b=le(c);{var d=f=>{var i=la(),N=l(i);Re(N,17,()=>e(x),k=>k.id,(k,m,p,h)=>{{let u=r(()=>e($).includes(e(m)));qr(k,{onclick:()=>W(e(m)),get selected(){return e(u)},children:(E,Y)=>{var y=oa(),Z=le(y);Lt(Z,{get user(){return e(m)},size:"md"});var S=o(Z,2),X=l(S);xe(X,{fontWeight:"medium",children:(ae,Q)=>{R();var j=G();U(()=>D(j,e(m).name)),a(ae,j)},$$slots:{default:!0}});var B=o(X,2);xe(B,{size:"tiny",color:"muted",children:(ae,Q)=>{R();var j=G();U(()=>D(j,e(m).email)),a(ae,j)},$$slots:{default:!0}}),n(S),a(E,y)},$$slots:{default:!0}})}});var V=o(N,2);Sr(V,{children:(k,m)=>{var p=ze(),h=le(p);{var u=E=>{fe(E,{shape:"round",fullWidth:!0,onclick:()=>z.onClose(e($)),children:(Y,y)=>{R();var Z=G();U(S=>D(Z,S),[()=>s()("add")]),a(Y,Z)},$$slots:{default:!0}})};ie(h,E=>{e($).length>0&&E(u)})}a(k,p)},$$slots:{default:!0}}),n(i),a(f,i)},v=f=>{var i=na(),N=l(i,!0);n(i),U(V=>D(N,V),[()=>s()("photo_shared_all_users")]),a(f,i)};ie(b,f=>{e(x).length>0?f(d):f(v,!1)})}a(_,c)}),a(T,M)},$$slots:{default:!0}})},$$slots:{default:!0}})}_e(),O()}var ca=L('<hr class="my-4 border border-gray-200 dark:border-gray-700"/> <!> <!> <ul class="text-sm"><li class="flex gap-2 place-items-center py-1 mt-2"><!> </li> <li class="flex gap-2 place-items-center py-1"><!> </li></ul>',1),ua=L('<hr class="my-4 border border-gray-200 dark:border-gray-700"/> <!> <!>',1),va=L('<div class="rounded-2xl border border-gray-200 dark:border-gray-800 mt-6 bg-slate-50 dark:bg-gray-900 p-5"><div class="flex gap-4 rounded-lg pb-4 transition-all justify-between"><div class="flex gap-4"><!> <div class="text-start"><p class="text-immich-fg dark:text-immich-dark-fg"> </p> <p class="text-sm text-immich-fg/75 dark:text-immich-dark-fg/75"> </p></div></div> <!></div> <div class="dark:text-gray-200 text-immich-dark-gray"><!> <!></div></div>'),$a=L('<section class="my-4"><!> <div class="flex justify-end mt-5"><!></div></section>');function _a(ee,z){$e(z,!0);const s=()=>re(pe,"$t",t),[t,O]=me();let x=te(ne([]));Me(async()=>{await $()});const $=async()=>{q(x,[],!0);const[w,_]=await Promise.all([et({direction:tt.SharedBy}),et({direction:tt.SharedWith})]);for(const g of w)q(x,[...e(x),{user:g,sharedByMe:!0,sharedWithMe:!1,inTimeline:g.inTimeline??!1}],!0);for(const g of _){const c=e(x).findIndex(b=>g.id===b.user.id);c===-1?q(x,[...e(x),{user:g,sharedByMe:!1,sharedWithMe:!0,inTimeline:g.inTimeline??!1}],!0):(e(x)[c].sharedWithMe=!0,e(x)[c].inTimeline=g.inTimeline??!1)}},A=async w=>{if(await De.showDialog({title:s()("stop_photo_sharing"),prompt:s()("stop_photo_sharing_description",{values:{partner:w.name}})}))try{await Gt({id:w.id}),await $()}catch(g){ge(g,s()("errors.unable_to_remove_partner"))}},W=async()=>{const w=await De.show(da,{user:z.user});if(w)try{for(const _ of w)await Rt({partnerCreateDto:{sharedWithId:_.id}});await $()}catch(_){ge(_,s()("errors.unable_to_add_partners"))}},K=async(w,_)=>{try{await Qt({id:w.user.id,partnerUpdateDto:{inTimeline:_}}),w.inTimeline=_}catch(g){ge(g,s()("errors.unable_to_update_timeline_display_status"))}};var P=$a(),C=l(P);{var T=w=>{var _=ze(),g=le(_);Re(g,17,()=>e(x),c=>c.user.id,(c,b,d)=>{var v=va(),f=l(v),i=l(f),N=l(i);Lt(N,{get user(){return e(b).user},size:"md"});var V=o(N,2),k=l(V),m=l(k,!0);n(k);var p=o(k,2),h=l(p,!0);n(p),n(V),n(i);var u=o(i,2);{var E=B=>{{let ae=r(()=>s()("stop_sharing_photos_with_user"));sr(B,{shape:"round",color:"secondary",variant:"ghost",onclick:()=>A(e(b).user),get icon(){return ar},size:"small",get"aria-label"(){return e(ae)}})}};ie(u,B=>{e(b).sharedByMe&&B(E)})}n(f);var Y=o(f,2),y=l(Y);{var Z=B=>{var ae=ca(),Q=o(le(ae),2);xe(Q,{class:"my-4",size:"small",fontWeight:"medium",children:(he,Ge)=>{R();var Be=G();U(Qe=>D(Be,Qe),[()=>s()("shared_with_partner",{values:{partner:e(b).user.name}})]),a(he,Be)},$$slots:{default:!0}});var j=o(Q,2);xe(j,{size:"tiny",fontWeight:"medium",children:(he,Ge)=>{R();var Be=G();U(Qe=>D(Be,Qe),[()=>s()("partner_can_access",{values:{partner:e(b).user.name}})]),a(he,Be)},$$slots:{default:!0}});var J=o(j,2),F=l(J),I=l(F);He(I,{get icon(){return pt}});var se=o(I);n(F);var de=o(F,2),ce=l(de);He(ce,{get icon(){return pt}});var Oe=o(ce);n(de),n(J),U((he,Ge)=>{D(se,` ${he??""}`),D(Oe,` ${Ge??""}`)},[()=>s()("partner_can_access_assets"),()=>s()("partner_can_access_location")]),a(B,ae)};ie(y,B=>{e(b).sharedByMe&&B(Z)})}var S=o(y,2);{var X=B=>{var ae=ua(),Q=o(le(ae),2);xe(Q,{class:"my-4",size:"small",fontWeight:"medium",children:(J,F)=>{R();var I=G();U(se=>D(I,se),[()=>s()("shared_from_partner",{values:{partner:e(b).user.name}})]),a(J,I)},$$slots:{default:!0}});var j=o(Q,2);{let J=r(()=>s()("show_in_timeline")),F=r(()=>s()("show_in_timeline_setting_description"));ut(j,{get title(){return e(J)},get subtitle(){return e(F)},onToggle:I=>K(e(b),I),get checked(){return e(b).inTimeline},set checked(I){e(b).inTimeline=I}})}a(B,ae)};ie(S,B=>{e(b).sharedWithMe&&B(X)})}n(Y),n(v),U(()=>{D(m,e(b).user.name),D(h,e(b).user.email)}),a(c,v)}),a(w,_)};ie(C,w=>{e(x).length>0&&w(T)})}var H=o(C,2),M=l(H);fe(M,{shape:"round",size:"small",onclick:()=>W(),children:(w,_)=>{R();var g=G();U(c=>D(g,c),[()=>s()("add_partner")]),a(w,g)},$$slots:{default:!0}}),n(H),n(P),a(ee,P),_e(),O()}var pa=L("<!> <!> <!> <!>",1),ma=L("<!> <!>",1),fa=L("<!> <!> <!> <!>",1),ga=L("<!> <!>",1),ha=L('<!> <section class="my-4"><div class="flex flex-col gap-2"><div class="mb-2 flex justify-end"><!></div> <!></div></section>',1);function ba(ee,z){$e(z,!0);const s=()=>re(pe,"$t",O),t=()=>re(Ue,"$locale",O),[O,x]=me();let $=Ae(z,"keys",15);const A=async()=>{$(await Ct())},W=d=>{$($().map(v=>v.id===d.id?d:v))},K=({id:d})=>{$($().filter(v=>v.id!==d))},P=r(()=>Rr(s())),C=r(()=>e(P).Create);var T=ha(),H=le(T);Dt(H,{onApiKeyCreate:A,onApiKeyUpdate:W,onApiKeyDelete:K});var M=o(H,2),w=l(M),_=l(w),g=l(_);fe(g,{get leadingIcon(){return e(C).icon},shape:"round",size:"small",onclick:()=>e(C).onAction(e(C)),children:(d,v)=>{R();var f=G();U(()=>D(f,e(C).title)),a(d,f)},$$slots:{default:!0}}),n(_);var c=o(_,2);{var b=d=>{ot(d,{class:"mt-4",striped:!0,spacing:"small",size:"small",children:(v,f)=>{var i=ga(),N=le(i);lt(N,{children:(k,m)=>{var p=pa(),h=le(p);we(h,{children:(y,Z)=>{R();var S=G();U(X=>D(S,X),[()=>s()("name")]),a(y,S)},$$slots:{default:!0}});var u=o(h,2);we(u,{children:(y,Z)=>{R();var S=G();U(X=>D(S,X),[()=>s()("permission")]),a(y,S)},$$slots:{default:!0}});var E=o(u,2);we(E,{children:(y,Z)=>{R();var S=G();U(X=>D(S,X),[()=>s()("created")]),a(y,S)},$$slots:{default:!0}});var Y=o(E,2);we(Y,{children:(y,Z)=>{R();var S=G();U(X=>D(S,X),[()=>s()("action")]),a(y,S)},$$slots:{default:!0}}),a(k,p)},$$slots:{default:!0}});var V=o(N,2);nt(V,{children:(k,m)=>{var p=ze(),h=le(p);Re(h,17,$,u=>u.id,(u,E)=>{const Y=r(()=>{const{Update:y,Delete:Z}=Hr(s(),e(E));return{Update:y,Delete:Z}});it(u,{children:(y,Z)=>{var S=fa(),X=le(S);ke(X,{children:(j,J)=>{R();var F=G();U(()=>D(F,e(E).name)),a(j,F)},$$slots:{default:!0}});var B=o(X,2);ke(B,{children:(j,J)=>{{let F=r(()=>JSON.stringify(e(E).permissions,null,2));xe(j,{class:"font-mono overflow-hidden line-clamp-3",size:"small",get title(){return e(F)},children:(I,se)=>{R();var de=G();U(()=>D(de,e(E).permissions)),a(I,de)},$$slots:{default:!0}})}},$$slots:{default:!0}});var ae=o(B,2);ke(ae,{children:(j,J)=>{R();var F=G();U(I=>D(F,I),[()=>new Date(e(E).createdAt).toLocaleDateString(t(),at.settings)]),a(j,F)},$$slots:{default:!0}});var Q=o(ae,2);ke(Q,{class:"flex flex-row flex-wrap justify-center gap-x-2 gap-y-1",children:(j,J)=>{var F=ma(),I=le(F);St(I,{get action(){return e(Y).Update},size:"small"});var se=o(I,2);St(se,{get action(){return e(Y).Delete},size:"small"}),a(j,F)},$$slots:{default:!0}}),a(y,S)},$$slots:{default:!0}})}),a(k,p)},$$slots:{default:!0}}),a(v,i)},$$slots:{default:!0}})};ie(c,d=>{$().length>0&&d(b)})}n(w),n(M),be(1,w,()=>Pe,()=>({duration:500})),a(ee,T),_e(),x()}var ya=L('<section class="my-4"><div><form autocomplete="off"><div class="ms-4 mt-4 flex flex-col gap-4"><!> <!> <!> <!> <div class="flex justify-end"><!></div></div></form></div></section>');function Pa(ee,z){$e(z,!0);const s=()=>re(Ne,"$user",O),t=()=>re(pe,"$t",O),[O,x]=me();let $=ne(Xr(s()));const A=Qr(),W=async()=>{try{const d=await Xt({userUpdateMeDto:{email:$.email,name:$.name}});Object.assign($,d),ye(Ne,d),Ce.success(t()("saved_profile"))}catch(d){ge(d,t()("errors.unable_to_save_profile"))}};var K=ya(),P=l(K),C=l(P),T=r(()=>Gr(A("submit"))),H=l(C),M=l(H);{let d=r(()=>t()("user_id"));oe(M,{get label(){return e(d)},disabled:!0,children:(v,f)=>{je(v,{get value(){return $.id},set value(i){$.id=i}})},$$slots:{default:!0}})}var w=o(M,2);{let d=r(()=>t()("email"));oe(w,{get label(){return e(d)},required:!0,children:(v,f)=>{je(v,{type:"email",get value(){return $.email},set value(i){$.email=i}})},$$slots:{default:!0}})}var _=o(w,2);{let d=r(()=>t()("name"));oe(_,{get label(){return e(d)},required:!0,children:(v,f)=>{je(v,{get value(){return $.name},set value(i){$.name=i}})},$$slots:{default:!0}})}var g=o(_,2);{let d=r(()=>t()("storage_label"));oe(g,{get label(){return e(d)},disabled:!0,children:(v,f)=>{{let i=r(()=>$.storageLabel||"");je(v,{get value(){return e(i)}})}},$$slots:{default:!0}})}var c=o(g,2),b=l(c);fe(b,{shape:"round",type:"submit",size:"small",onclick:()=>W(),children:(d,v)=>{R();var f=G();U(i=>D(f,i),[()=>t()("save")]),a(d,f)},$$slots:{default:!0}}),n(c),n(H),n(C),n(P),n(K),Ie("submit",C,function(...d){e(T)?.apply(this,d)}),be(1,P,()=>Pe,()=>({duration:500})),a(ee,K),_e(),x()}var xa=L("<!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!>",1);function wa(ee,z){$e(z,!0);const s=()=>re(Zt,"$page",x),t=()=>re(pe,"$t",x),O=()=>re(Ne,"$user",x),[x,$]=me();let A=Ae(z,"keys",31,()=>ne([])),W=Ae(z,"sessions",31,()=>ne([])),K=Ee.isCallback(globalThis.location)||s().url.searchParams.get(mt.OPEN_SETTING)===Ve.OAUTH;Lr(ee,{get queryParam(){return mt.IS_OPEN},children:(P,C)=>{var T=xa(),H=le(T);{let m=r(()=>t()("app_settings")),p=r(()=>t()("manage_the_app_settings"));ve(H,{get icon(){return or},key:"app-settings",get title(){return e(m)},get subtitle(){return e(p)},children:(h,u)=>{Rs(h,{})},$$slots:{default:!0}})}var M=o(H,2);{let m=r(()=>t()("account")),p=r(()=>t()("manage_your_account"));ve(M,{get icon(){return lr},key:"account",get title(){return e(m)},get subtitle(){return e(p)},children:(h,u)=>{Pa(h,{})},$$slots:{default:!0}})}var w=o(M,2);{let m=r(()=>t()("user_usage_stats")),p=r(()=>t()("user_usage_stats_description"));ve(w,{get icon(){return nr},key:"user-usage-info",get title(){return e(m)},get subtitle(){return e(p)},children:(h,u)=>{Ws(h,{})},$$slots:{default:!0}})}var _=o(w,2);{let m=r(()=>t()("api_keys")),p=r(()=>t()("manage_your_api_keys"));ve(_,{get icon(){return ir},key:"api-keys",get title(){return e(m)},get subtitle(){return e(p)},children:(h,u)=>{ba(h,{get keys(){return A()},set keys(E){A(E)}})},$$slots:{default:!0}})}var g=o(_,2);{let m=r(()=>t()("authorized_devices")),p=r(()=>t()("manage_your_devices"));ve(g,{get icon(){return dr},key:"authorized-devices",get title(){return e(m)},get subtitle(){return e(p)},children:(h,u)=>{ta(h,{get devices(){return W()},set devices(E){W(E)}})},$$slots:{default:!0}})}var c=o(g,2);{let m=r(()=>t()("download_settings")),p=r(()=>t()("download_settings_description"));ve(c,{get icon(){return cr},key:"download-settings",get title(){return e(m)},get subtitle(){return e(p)},children:(h,u)=>{us(h,{})},$$slots:{default:!0}})}var b=o(c,2);{let m=r(()=>t()("features")),p=r(()=>t()("features_setting_description"));ve(b,{get icon(){return ur},key:"feature",get title(){return e(m)},get subtitle(){return e(p)},children:(h,u)=>{ys(h,{})},$$slots:{default:!0}})}var d=o(b,2);{let m=r(()=>t()("notifications")),p=r(()=>t()("notifications_setting_description"));ve(d,{get icon(){return vr},get key(){return Ve.NOTIFICATIONS},get title(){return e(m)},get subtitle(){return e(p)},children:(h,u)=>{xs(h,{})},$$slots:{default:!0}})}var v=o(d,2);{var f=m=>{{let p=r(()=>t()("oauth")),h=r(()=>t()("manage_your_oauth_connection")),u=r(()=>K||void 0);ve(m,{get icon(){return fr},get key(){return Ve.OAUTH},get title(){return e(p)},get subtitle(){return e(h)},get isOpen(){return e(u)},children:(E,Y)=>{aa(E,{get user(){return O()}})},$$slots:{default:!0}})}};ie(v,m=>{ct.value.oauth&&m(f)})}var i=o(v,2);{let m=r(()=>t()("password")),p=r(()=>t()("change_your_password"));ve(i,{get icon(){return $r},key:"password",get title(){return e(m)},get subtitle(){return e(p)},children:(h,u)=>{Qs(h,{})},$$slots:{default:!0}})}var N=o(i,2);{let m=r(()=>t()("partner_sharing")),p=r(()=>t()("manage_sharing_with_partners"));ve(N,{get icon(){return _r},key:"partner-sharing",get title(){return e(m)},get subtitle(){return e(p)},children:(h,u)=>{_a(h,{get user(){return O()}})},$$slots:{default:!0}})}var V=o(N,2);{let m=r(()=>t()("user_pin_code_settings")),p=r(()=>t()("user_pin_code_settings_description"));ve(V,{get icon(){return pr},key:"user-pin-code-settings",get title(){return e(m)},get subtitle(){return e(p)},autoScrollTo:!0,children:(h,u)=>{ds(h,{})},$$slots:{default:!0}})}var k=o(V,2);{let m=r(()=>t()("user_purchase_settings")),p=r(()=>t()("user_purchase_settings_description"));ve(k,{get icon(){return mr},get key(){return Ve.PURCHASE_SETTINGS},get title(){return e(m)},get subtitle(){return e(p)},autoScrollTo:!0,children:(h,u)=>{As(h,{})},$$slots:{default:!0}})}a(P,T)},$$slots:{default:!0}}),_e(),$()}const ka=ee=>({KeyboardShortcuts:{title:ee("show_keyboard_shortcuts"),icon:gr,onAction:()=>De.show(Jr,{})}});function So(ee,z){$e(z,!0);const s=()=>re(pe,"$t",t),[t,O]=me(),x=r(()=>ka(s())),$=r(()=>e(x).KeyboardShortcuts);{let A=r(()=>[e($)]);Yt(ee,{get title(){return z.data.meta.title},get actions(){return e(A)},children:(W,K)=>{Yr(W,{size:"medium",center:!0,children:(P,C)=>{wa(P,{get keys(){return z.data.keys},get sessions(){return z.data.sessions}})},$$slots:{default:!0}})},$$slots:{default:!0}})}_e(),O()}export{So as component,ko as universal};
