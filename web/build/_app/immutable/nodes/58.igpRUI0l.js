import{a as he,b as Y}from"../chunks/CJGyQpNN.js";import{g as we,$ as be}from"../chunks/DWQ0JXRY.js";import"../chunks/DsnmJJEf.js";import{p as Pe,f as w,j as n,g as e,t as Z,s as u,u as t,a as ye,h as m,n as ee}from"../chunks/D0CSSuTl.js";import{s as te}from"../chunks/C8vxa4mj.js";import{t as re,a as p,f as b}from"../chunks/Bd1JH_Ov.js";import{i as B}from"../chunks/D8NIUdeB.js";import{s as Se,a as qe}from"../chunks/zonMEKN6.js";import{g as ae}from"../chunks/gvLJu3l0.js";import{f as T}from"../chunks/oXVv5nIS.js";import{R as se}from"../chunks/gegweU97.js";import{h as xe}from"../chunks/Rsfk-vdN.js";import{O as ke,P as ze}from"../chunks/DUXNbmIP.js";import{F as Ie}from"../chunks/BMcevgEe.js";import{S as Ce}from"../chunks/Tw41aoDi.js";import{F as $}from"../chunks/BgQCgJ0_.js";import{I as U}from"../chunks/s_2UW97Q.js";import{P as oe}from"../chunks/BzOEcAd-.js";import{H as le}from"../chunks/Dt4pkAJO.js";import{S as j}from"../chunks/i7F918yQ.js";const Fe=(async({url:P})=>(await he(P,{admin:!0}),{meta:{title:(await we())("admin.user_management")}})),st=Object.freeze(Object.defineProperty({__proto__:null,load:Fe},Symbol.toStringTag,{value:"Module"}));var Me=b("<!> <!>",1),Be=b("<!> <!>",1),Te=b("<!> <!> <!> <!> <!> <!> <!> <!>",1),Ue=b("<!> <!>",1);function ot(P,A){Pe(A,!0);const s=()=>qe(be,"$t",ne),[ne,ue]=Se();let y=m(""),c=m(""),f=m(""),S=m(""),q=m(!0),x=m(!0),k=m(!1),_=m(void 0),z=m(!1),I=t(()=>e(_)===null?null:ke(Number(e(_)),ze.GiB)),ie=t(()=>e(I)&&Y.serverInfo&&e(I)>Y.serverInfo.diskSizeRaw);const O=t(()=>e(c)!==e(f)&&e(f).length>0),de=t(()=>e(O)?s()("password_does_not_match"):""),R=t(()=>!e(O)&&!e(z)),me=async()=>{await ae(se.users())},$e=async C=>{if(C.preventDefault(),!e(R))return;n(z,!0);const g=await xe({email:e(y),password:e(c),shouldChangePassword:e(q),name:e(S),quotaSizeInBytes:e(I),notify:e(x),isAdmin:e(k)});g&&await ae(se.viewUser(g),{replaceState:!0}),n(z,!1)};{let C=t(()=>s()("create_new_user")),g=t(()=>!e(R)),pe=t(()=>s()("create"));Ie(P,{get title(){return e(C)},size:"small",get disabled(){return e(g)},get submitText(){return e(pe)},onClose:me,onSubmit:$e,children:(ce,je)=>{var H=Ue(),D=w(H);B(D,G=>{});var fe=u(D,2);Ce(fe,{gap:4,children:(G,Ae)=>{var N=Te(),W=w(N);{let r=t(()=>s()("email"));$(W,{get label(){return e(r)},required:!0,children:(a,l)=>{U(a,{type:"email",get value(){return e(y)},set value(o){n(y,o,!0)}})},$$slots:{default:!0}})}var E=u(W,2);{var _e=r=>{{let a=t(()=>s()("admin.send_welcome_email"));$(r,{get label(){return e(a)},children:(l,o)=>{j(l,{id:"send-welcome-email",class:"text-sm",get checked(){return e(x)},set checked(i){n(x,i,!0)}})},$$slots:{default:!0}})}};B(E,r=>{T.value.email&&r(_e)})}var J=u(E,2);{let r=t(()=>s()("password")),a=t(()=>!T.value.oauth);$(J,{get label(){return e(r)},get required(){return e(a)},children:(l,o)=>{oe(l,{id:"password",autocomplete:"new-password",get value(){return e(c)},set value(i){n(c,i,!0)}})},$$slots:{default:!0}})}var K=u(J,2);{let r=t(()=>s()("confirm_password")),a=t(()=>!T.value.oauth);$(K,{get label(){return e(r)},get required(){return e(a)},children:(l,o)=>{var i=Me(),v=w(i);oe(v,{id:"confirmPassword",autocomplete:"new-password",get value(){return e(f)},set value(d){n(f,d,!0)}});var F=u(v,2);le(F,{color:"danger",children:(d,h)=>{ee();var M=re();Z(()=>te(M,e(de))),p(d,M)},$$slots:{default:!0}}),p(l,i)},$$slots:{default:!0}})}var L=u(K,2);{let r=t(()=>s()("admin.require_password_change_on_login"));$(L,{get label(){return e(r)},children:(a,l)=>{j(a,{id:"require-password-change",class:"text-sm text-start",get checked(){return e(q)},set checked(o){n(q,o,!0)}})},$$slots:{default:!0}})}var Q=u(L,2);{let r=t(()=>s()("name"));$(Q,{get label(){return e(r)},required:!0,children:(a,l)=>{U(a,{get value(){return e(S)},set value(o){n(S,o,!0)}})},$$slots:{default:!0}})}var V=u(Q,2);{let r=t(()=>s()("admin.quota_size_gib"));$(V,{get label(){return e(r)},children:(a,l)=>{var o=Be(),i=w(o);{let d=t(()=>s()("unlimited"));U(i,{type:"number",get placeholder(){return e(d)},min:"0",step:"1",get value(){return e(_)},set value(h){n(_,h,!0)}})}var v=u(i,2);{var F=d=>{le(d,{color:"danger",children:(h,M)=>{ee();var X=re();Z(ve=>te(X,ve),[()=>s()("errors.quota_higher_than_disk_size")]),p(h,X)},$$slots:{default:!0}})};B(v,d=>{e(ie)&&d(F)})}p(a,o)},$$slots:{default:!0}})}var ge=u(V,2);{let r=t(()=>s()("admin.admin_user"));$(ge,{get label(){return e(r)},children:(a,l)=>{j(a,{get checked(){return e(k)},set checked(o){n(k,o,!0)}})},$$slots:{default:!0}})}p(G,N)},$$slots:{default:!0}}),p(ce,H)},$$slots:{default:!0}})}ye(),ue()}export{ot as component,st as universal};
