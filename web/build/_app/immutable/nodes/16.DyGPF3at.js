import{a as M,c as z}from"../chunks/CJGyQpNN.js";import{g as T,$ as k}from"../chunks/DWQ0JXRY.js";import{g as B,a as E,P as G,b as H}from"../chunks/DMMOBWd8.js";import"../chunks/DsnmJJEf.js";import{p as w,g as p,s as v,t as I,a as x,c as P,u as _,r as S,f as J,j as N,h as Q}from"../chunks/D0CSSuTl.js";import{a as K,f as j}from"../chunks/Bd1JH_Ov.js";import{i as g}from"../chunks/D8NIUdeB.js";import{p as A,a as h,s as C}from"../chunks/zonMEKN6.js";import{g as V}from"../chunks/gvLJu3l0.js";import{U as W}from"../chunks/tK_U6--f.js";import{s as X}from"../chunks/C8vxa4mj.js";import{L as Y,q as Z,bt as tt}from"../chunks/D-UYCH9y.js";import{R as et}from"../chunks/gegweU97.js";import{C as at}from"../chunks/cX31cXxY.js";import{S as rt}from"../chunks/Tw41aoDi.js";import{A as st}from"../chunks/B2XNhc0s.js";const ot=(async({url:o})=>{await M(o);const e=await T(),a=o.searchParams.get("licenseKey");let r=o.searchParams.get("activationKey"),s;try{a&&!r&&(r=await B(a)),a&&r&&(await E(a,r)).activatedAt!==""&&(s=!0,z.setPurchaseStatus(!0))}catch(i){s=!1,console.log("error navigating to /buy",i)}return{meta:{title:e("buy")},isActivated:s}}),kt=Object.freeze(Object.defineProperty({__proto__:null,load:ot},Symbol.toStringTag,{value:"Module"}));var it=j('<div><!> <p class="dark:text-gray-100 svelte-11mhrst"> </p></div>');function ct(o,e){w(e,!0);const a=()=>h(k,"$t",r),[r,s]=C();let i=A(e,"centered",3,!1),n=A(e,"logoSize",3,"sm");var c=it();let l;var m=P(c);{let u=_(()=>n()==="sm"?"tiny":"small");Y(m,{variant:"icon",get size(){return p(u)}})}var d=v(m,2),f=P(d,!0);S(d),S(c),I(u=>{l=Z(c,1,"flex gap-1 mt-2 place-items-center dark:bg-immich-dark-primary/10 bg-gray-200/50 p-2 rounded-lg bg-clip-padding border border-transparent relative supporter-effect svelte-11mhrst",null,l,{"place-content-center":i()}),X(f,u)},[()=>a()("purchase_account_info")]),K(o,c),x(),s()}var nt=j("<!> <!> <!>",1);function wt(o,e){w(e,!0);const a=()=>h(k,"$t",s),r=()=>h(c,"$isPurchased",s),[s,i]=C();let n=Q(!1);const{isPurchased:c}=z;{let l=_(()=>a()("buy"));W(o,{get title(){return p(l)},children:(m,d)=>{at(m,{size:"medium",center:!0,children:(f,u)=>{rt(f,{gap:4,class:"mt-4",children:(L,lt)=>{var $=nt(),y=J($);{var O=t=>{{let F=_(()=>a()("purchase_failed_activation"));st(t,{get icon(){return tt},color:"danger",get title(){return p(F)}})}};g(y,t=>{e.data.isActivated===!1&&t(O)})}var b=v(y,2);{var R=t=>{ct(t,{logoSize:"lg",centered:!0})};g(b,t=>{r()&&t(R)})}var U=v(b,2);{var q=t=>{G(t,{onDone:()=>V(et.photos(),{replaceState:!1})})},D=t=>{H(t,{onActivate:()=>{N(n,!0)}})};g(U,t=>{p(n)||e.data.isActivated===!0?t(q):t(D,!1)})}K(L,$)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}x(),i()}export{wt as component,kt as universal};
