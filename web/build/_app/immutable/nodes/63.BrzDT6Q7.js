import{a as ue,u as Q,p as te}from"../chunks/CJGyQpNN.js";import{g as ge,$ as U}from"../chunks/DWQ0JXRY.js";import"../chunks/DsnmJJEf.js";import{s as z,a as se,d as _e,o as fe}from"../chunks/C8vxa4mj.js";import{c as a,f as W,s as b,r as e,g as t,t as V,p as L,a as j,b as be,u as E,n as X,i as de,h as xe,j as he}from"../chunks/D0CSSuTl.js";import{a as g,f as y,t as Y,c as $e}from"../chunks/Bd1JH_Ov.js";import{p as ae,s as I,a as A,d as ke,e as ye}from"../chunks/zonMEKN6.js";import{a as N,bt as we,B as q,F as Se,aj as Re,cC as Ee,W as Oe,ad as Ce,L as ze,bl as le,bk as Ve,dU as Pe,dV as Te,dW as re,dX as Me,dY as Ae,ac as Ie}from"../chunks/D-UYCH9y.js";import{g as K}from"../chunks/gvLJu3l0.js";import{p as Ue}from"../chunks/CG4KAGH3.js";import"../chunks/69_IOA4Y.js";import{e as Le,i as je,h as De}from"../chunks/DLePdI2u.js";import{F as B}from"../chunks/DS0yfrVF.js";import{S as Be}from"../chunks/Tw41aoDi.js";import{s as He}from"../chunks/CMI33r64.js";import{i as H}from"../chunks/D8NIUdeB.js";import{s as F}from"../chunks/D1613R3V.js";import{O as C}from"../chunks/DnqqNi3p.js";import{i as Z}from"../chunks/9chJ2bcr.js";import{S as Fe}from"../chunks/Db3OdFQt.js";import{A as We,O as Ne}from"../chunks/BfXsLQUh.js";import{H as qe,m as oe}from"../chunks/BHTYC334.js";import{S as J}from"../chunks/Dm18XTJp.js";import{s as ce}from"../chunks/B0eyFCun.js";import{h as Ke,S as Ge}from"../chunks/B0lBVY13.js";import{L as Xe}from"../chunks/CTSOIQJr.js";import{T as ne}from"../chunks/0qPXRVhz.js";import{t as ie}from"../chunks/BOeC8ZMP.js";import{bl as Ye,bm as Je,bn as Qe}from"../chunks/BP6NvnZ7.js";import{R as G}from"../chunks/gegweU97.js";const Ze=(async({url:h})=>(await ue(h),{meta:{title:(await ge())("onboarding")}})),ca=Object.freeze(Object.defineProperty({__proto__:null,load:Ze},Symbol.toStringTag,{value:"Module"}));var et=y('<a href="https://www.backblaze.com/blog/the-3-2-1-backup-strategy/" class="underline" target="_blank" rel="noreferrer"> </a>'),tt=y('<div class="flex items-start gap-6"><div class="flex-shrink-0 w-12 h-12 rounded-full bg-primary/90 flex items-center justify-center"><span class="text-light text-xl font-semibold"></span></div> <div class="leading-relaxed pt-2"><!></div></div>'),at=y('<a href="https://docs.immich.app/administration/backup-and-restore/" class="underline" target="_blank" rel="noreferrer"> </a>'),rt=y('<div class="flex items-start gap-4 p-6 my-10 bg-gray-100 dark:bg-gray-800/40 rounded-xl border border-gray-700/50"><!> <div class="text-gray-800 dark:text-gray-300 leading-relaxed"><!></div></div> <div class="space-y-1"><h2 class="mb-6"><!></h2> <div class="space-y-6"></div></div> <div class="text-sm text-gray-600 dark:text-gray-400 leading-relaxed mt-4"><p><!></p></div>',1),ot=y('<div class="flex flex-col"><!></div>');function nt(h){const d=["admin.backup_onboarding_3_description","admin.backup_onboarding_2_description","admin.backup_onboarding_1_description"];var o=ot(),v=a(o);Be(v,{gap:2,children:(m,s)=>{var r=rt(),i=W(r),c=a(i);N(c,{get icon(){return we},size:"36",class:"text-warning flex-shrink-0 mt-0.5"});var l=b(c,2),S=a(l);B(S,{key:"admin.backup_onboarding_description",children:(w,M)=>{let k=()=>M?.().message;var f=et(),u=a(f,!0);e(f),V(()=>z(u,k())),g(w,f)},$$slots:{default:!0}}),e(l),e(i);var n=b(i,2),p=a(n),$=a(p);B($,{key:"admin.backup_onboarding_parts_title"}),e(p);var R=b(p,2);Le(R,5,()=>d,je,(T,w,M)=>{var k=tt(),f=a(k),u=a(f);u.textContent=3-M,e(f);var O=b(f,2),D=a(O);B(D,{get key(){return t(w)}}),e(O),e(k),g(T,k)}),e(R),e(n);var P=b(n,2),_=a(P),x=a(_);B(x,{key:"admin.backup_onboarding_footer",children:(w,M)=>{let k=()=>M?.().message;var f=at(),u=a(f,!0);e(f),V(()=>z(u,k())),g(w,f)},$$slots:{default:!0}}),e(_),e(P),g(m,r)},$$slots:{default:!0}}),e(o),g(h,o)}var it=y('<p class="text-xl text-primary font-medium"> </p>'),st=y('<div class="flex gap-2 items-center justify-center w-fit"><!> <!></div>'),dt=y("<p> </p>"),lt=y('<div class="w-full flex place-content-start"><!></div>'),ct=y('<span class="flex place-content-center place-items-center gap-2"> </span>'),pt=y('<div id="onboarding-card" class="flex w-full max-w-4xl flex-col gap-4 rounded-3xl border-2 border-gray-500 px-8 py-8 dark:border-gray-700 dark:bg-immich-dark-gray text-black dark:text-immich-dark-fg bg-gray-50"><!> <!> <div class="flex pt-4"><!> <div class="flex w-full place-content-end"><!></div></div></div>');function vt(h,d){L(d,!0);const o=()=>A(U,"$t",v),[v,m]=I();let s=ae(d,"title",3,void 0),r=ae(d,"icon",3,void 0);var i=pt(),c=a(i);{var l=_=>{var x=st(),T=a(x);{var w=f=>{N(f,{get icon(){return r()},size:"30",class:"text-primary"})};H(T,f=>{r()&&f(w)})}var M=b(T,2);{var k=f=>{var u=it(),O=a(u,!0);e(u),V(()=>z(O,s())),g(f,u)};H(M,f=>{s()&&f(k)})}e(x),g(_,x)};H(c,_=>{(s()||r())&&_(l)})}var S=b(c,2);He(S,()=>d.children??be);var n=b(S,2),p=a(n);{var $=_=>{var x=lt(),T=a(x);q(T,{shape:"round",get leadingIcon(){return Re},class:"flex gap-2 place-content-center",onclick:()=>{d.onLeave?.(),d.onPrevious?.()},children:(w,M)=>{var k=dt(),f=a(k,!0);e(k),V(()=>z(f,d.previousTitle)),g(w,k)},$$slots:{default:!0}}),e(x),g(_,x)};H(p,_=>{d.previousTitle&&_($)})}var R=b(p,2),P=a(R);{let _=E(()=>d.nextTitle?Ee:Oe);q(P,{shape:"round",get trailingIcon(){return t(_)},onclick:()=>{d.onLeave?.(),d.onNext?.()},children:(x,T)=>{var w=ct(),M=a(w,!0);e(w),V(k=>z(M,k),[()=>d.nextTitle??o()("done")]),g(x,w)},$$slots:{default:!0}})}e(R),e(n),e(i),Se(1,i,()=>Ce,()=>({duration:250})),g(h,i),j(),m()}var mt=y('<div class="gap-4"><!> <p class="font-medium mb-6 text-6xl text-primary"> </p> <p class="text-3xl pb-6 font-light"> </p></div>');function ut(h,d){L(d,!0);const o=()=>A(Q,"$user",m),v=()=>A(U,"$t",m),[m,s]=I();let r=E(()=>o().isAdmin&&!F.value.isOnboarded?C.SERVER:C.USER);var i=mt(),c=a(i);ze(c,{variant:"icon",size:"giant",class:"mb-2"});var l=b(c,2),S=a(l,!0);e(l);var n=b(l,2),p=a(n,!0);e(n),e(i),V(($,R)=>{z(S,$),z(p,R)},[()=>v()("onboarding_welcome_user",{values:{user:o().name}}),()=>t(r)==C.SERVER?v()("onboarding_server_welcome_description"):v()("onboarding_user_welcome_description")]),g(h,i),j(),s()}var gt=y('<div class="flex flex-col gap-4"><p> </p> <!></div>');function _t(h,d){L(d,!1);const o=()=>A(U,"$t",v),[v,m]=I();Z();var s=gt(),r=a(s),i=a(r,!0);e(r);var c=b(r,2);Fe(c,{}),e(s),V(l=>z(i,l),[()=>o()("onboarding_locale_description")]),g(h,s),j(),m()}var ft=y("<!> <!>",1),bt=y("<p> </p> <!>",1);function xt(h,d){L(d,!1);const o=()=>A(U,"$t",v),[v,m]=I();Z();var s=bt(),r=W(s),i=a(r,!0);e(r);var c=b(r,2);qe(c,{children:(l,S)=>{var n=ft(),p=W(n);q(p,{size:"medium",shape:"semi-round",fullWidth:!0,onclick:()=>oe.show(We,{}),get leadingIcon(){return le},children:(R,P)=>{X();var _=Y();V(x=>z(_,x),[()=>o()("app_stores")]),g(R,_)},$$slots:{default:!0}});var $=b(p,2);q($,{size:"medium",shape:"semi-round",fullWidth:!0,onclick:()=>oe.show(Ne,{}),get leadingIcon(){return Ve},children:(R,P)=>{X();var _=Y();V(x=>z(_,x),[()=>o()("obtainium_configurator")]),g(R,_)},$$slots:{default:!0}}),g(l,n)},$$slots:{default:!0}}),V(l=>z(i,l),[()=>o()("mobile_app_download_onboarding_note")]),g(h,s),j(),m()}var ht=y('<div class="flex flex-col gap-4"><p> </p> <!> <!></div>');function $t(h,d){L(d,!0);const o=()=>A(U,"$t",v),[v,m]=I(),s=de(ce.cloneValue());se(async()=>{await Ke({map:s.map,newVersionCheck:s.newVersionCheck})});var r=ht(),i=a(r),c=a(i,!0);e(i);var l=b(i,2);{let n=E(()=>o()("admin.map_settings")),p=E(()=>o()("admin.map_implications"));J(l,{get title(){return t(n)},get subtitle(){return t(p)},get checked(){return s.map.enabled},set checked($){s.map.enabled=$}})}var S=b(l,2);{let n=E(()=>o()("admin.version_check_settings")),p=E(()=>o()("admin.version_check_implications"));J(S,{get title(){return t(n)},get subtitle(){return t(p)},get checked(){return s.newVersionCheck.enabled},set checked($){s.newVersionCheck.enabled=$}})}e(r),V(n=>z(c,n),[()=>o()("onboarding_privacy_description")]),g(h,r),j(),m()}var kt=y('<div class="flex flex-col"><p><!></p> <!></div>');function yt(h){const d=()=>A(Q,"$user",o),[o,v]=I();var m=kt(),s=a(m),r=a(s);B(r,{key:"admin.storage_template_onboarding_description_v2",children:(S,n)=>{let p=()=>n?.().message;Xe(S,{href:"https://docs.immich.app/administration/storage-template",children:($,R)=>{X();var P=Y();V(()=>z(P,p())),g($,P)},$$slots:{default:!0}})},$$slots:{default:!0}}),e(s);var i=b(s,2);{var c=l=>{Ge(l,{minified:!0,duration:0,saveOnClose:!0})};H(i,l=>{d()&&l(c)})}e(m),g(h,m),v()}const wt="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z",St="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",Rt="0 0 20 20",Et="0 0 20 20";var Ot=y('<div class="flex flex-col gap-4"><p> </p> <div class="flex gap-4"><button type="button" class="w-1/2 aspect-square bg-light dark:bg-dark rounded-3xl transition-all shadow-sm hover:shadow-xl border-[3px] border-immich-primary dark:border dark:border-transparent"><div class="flex flex-col place-items-center place-content-center justify-around h-full w-full text-immich-primary"><!> <p class="font-semibold text-4xl"> </p></div></button> <button type="button" class="w-1/2 aspect-square bg-dark dark:bg-light rounded-3xl transition-all shadow-sm hover:shadow-xl dark:border-[3px] dark:border-immich-dark-primary border border-transparent"><div class="flex flex-col place-items-center place-content-center justify-around h-full w-full text-immich-dark-primary"><!> <p class="font-semibold text-4xl"> </p></div></button></div></div>');function Ct(h,d){L(d,!1);const o=()=>A(U,"$t",v),[v,m]=I();Z();var s=Ot(),r=a(s),i=a(r,!0);e(r);var c=b(r,2),l=a(c);l.__click=()=>ie.setTheme(ne.LIGHT);var S=a(l),n=a(S);N(n,{get icon(){return St},get viewBox(){return Et},size:"96"});var p=b(n,2),$=a(p,!0);e(p),e(S),e(l);var R=b(l,2);R.__click=()=>ie.setTheme(ne.DARK);var P=a(R),_=a(P);N(_,{get icon(){return wt},get viewBox(){return Rt},size:"96"});var x=b(_,2),T=a(x,!0);e(x),e(P),e(R),e(c),e(s),V((w,M,k)=>{z(i,w),z($,M),z(T,k)},[()=>o()("onboarding_theme_description"),()=>o()("light"),()=>o()("dark")]),g(h,s),j(),m()}_e(["click"]);var zt=y('<div class="flex flex-col gap-4"><p> </p> <!></div>');function Vt(h,d){L(d,!0);const o=()=>A(te,"$preferences",m),v=()=>A(U,"$t",m),[m,s]=I();let r=xe(de(o()?.cast?.gCastEnabled??!1));se(async()=>{try{const n=await Ye({userPreferencesUpdateDto:{cast:{gCastEnabled:t(r)}}});ke(te,{...n})}catch(n){De(n,v()("errors.unable_to_update_settings"))}});var i=zt(),c=a(i),l=a(c,!0);e(c);var S=b(c,2);{let n=E(()=>v()("gcast_enabled")),p=E(()=>v()("gcast_enabled_description"));J(S,{get title(){return t(n)},get subtitle(){return t(p)},get checked(){return t(r)},set checked($){he(r,$,!0)}})}e(i),V(n=>z(l,n),[()=>v()("onboarding_privacy_description")]),g(h,i),j(),s()}var Pt=y('<section id="onboarding-page" class="min-w-dvw flex min-h-dvh p-4"><div class="flex flex-col w-full"><div class=" bg-gray-300 dark:bg-gray-600 rounded-md h-2"><div class="progress-bar bg-primary h-2 rounded-md transition-all duration-200 ease-out"></div></div> <div class="py-8 flex place-content-center place-items-center m-auto w-[min(100%,800px)]"><!></div></div></section>');function pa(h,d){L(d,!0);const o=()=>A(U,"$t",m),v=()=>A(Q,"$user",m),[m,s]=I(),r=E(()=>[{name:"hello",component:ut,role:C.USER},{name:"theme",component:Ct,role:C.USER,title:o()("theme"),icon:Pe},{name:"language",component:_t,role:C.USER,title:o()("language"),icon:Te},{name:"server_privacy",component:$t,role:C.SERVER,title:o()("server_privacy"),icon:re},{name:"user_privacy",component:Vt,role:C.USER,title:o()("user_privacy"),icon:re},{name:"storage_template",component:yt,role:C.SERVER,title:o()("admin.storage_template_settings"),icon:Me},{name:"backup",component:nt,role:C.SERVER,title:o()("admin.backup_onboarding_title"),icon:Ae},{name:"mobile_app",component:xt,role:C.USER,title:o()("mobile_app"),icon:le}]),i=E(()=>{const u=Ue.url.searchParams.get("step"),O=t(r).findIndex(D=>D.name===u);return O===-1?0:O});let c=E(()=>v().isAdmin&&!F.value.isOnboarded?C.SERVER:C.USER),l=E(()=>t(r).filter(u=>n(u.role,t(c))).length),S=E(()=>t(r).filter((u,O)=>n(u.role,t(c))&&O<=t(i)).length-1);const n=(u,O)=>u===C.USER||u===C.SERVER&&O===C.SERVER&&!F.value.isOnboarded,p=E(()=>t(r).findLastIndex((u,O)=>n(u.role,t(c))&&O<t(i))),$=E(()=>t(r).findIndex((u,O)=>n(u.role,t(c))&&O>t(i))),R=async()=>{t($)==-1?(v().isAdmin&&(await Je({adminOnboardingUpdateDto:{isOnboarded:!0}}),await F.loadServerConfig()),await Qe({onboardingDto:{isOnboarded:!0}}),await K(G.photos())):await K(G.onboarding({step:t(r)[t($)].name}))},P=async()=>{t(p)!==-1&&await K(G.onboarding({step:t(r)[t(p)].name}))},_=E(()=>t(r)[t(i)].component);fe(async()=>{t(c)===C.SERVER&&await ce.init()});var x=Pt(),T=a(x),w=a(T),M=a(w);e(w);var k=b(w,2),f=a(k);{let u=E(()=>t(r)[t(p)]?.title),O=E(()=>t(r)[t($)]?.title);vt(f,{get title(){return t(r)[t(i)].title},get icon(){return t(r)[t(i)].icon},onNext:R,onPrevious:P,get previousTitle(){return t(u)},get nextTitle(){return t(O)},children:(D,Tt)=>{var ee=$e(),pe=W(ee);ye(pe,()=>t(_),(ve,me)=>{me(ve,{})}),g(D,ee)},$$slots:{default:!0}})}e(k),e(T),e(x),V(()=>Ie(M,`width: ${t(S)/t(l)*100}%`)),g(h,x),j(),s()}export{pa as component,ca as universal};
