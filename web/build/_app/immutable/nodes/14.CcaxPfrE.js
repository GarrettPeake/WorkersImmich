import{a as sr,u as or,p as nr}from"../chunks/CJGyQpNN.js";import{a7 as qe,au as Ke,b9 as ir,n as lr,as as $e}from"../chunks/BP6NvnZ7.js";import"../chunks/DsnmJJEf.js";import{s as he,e as ur,d as cr,a as dr}from"../chunks/C8vxa4mj.js";import{p as xe,f as O,a as ke,b as mr,g as e,u as a,c as E,r as $,t as ye,e as vr,j as M,h as Be,i as _r,V as ut,s as o,n as gr}from"../chunks/D0CSSuTl.js";import{i}from"../chunks/D8NIUdeB.js";import{h as Ee,t as St,e as fr}from"../chunks/DLePdI2u.js";import{c as Te,a as u,f,t as Fe}from"../chunks/Bd1JH_Ov.js";import{cl as pr,cm as br,r as hr,q as Ar,s as ct,cD as wr,I as Ae,a2 as yt,a as Sr,ag as dt,ah as He,cE as mt,F as yr,G as Er,X as $r,aj as Cr,cF as Tr,bU as Ir,a5 as xr,cG as kr,cH as Lr,cI as Ur}from"../chunks/D-UYCH9y.js";import{a as Et}from"../chunks/IOA7-Wrn.js";import{p as Ie,s as Le,a as te,d as Mr}from"../chunks/zonMEKN6.js";import{o as Or,g as vt}from"../chunks/gvLJu3l0.js";import{a as Nr}from"../chunks/Bu1B-y_V.js";import{U as _t,A as ze,g as Dr}from"../chunks/CIJfCxLq.js";import{a as $t}from"../chunks/BVZhy_zG.js";import{$ as Ue}from"../chunks/DWQ0JXRY.js";import{T as Vr}from"../chunks/BcI9YXFA.js";import{A as Pr,a as Rr}from"../chunks/DYlKPt8j.js";import{b as Br}from"../chunks/DU5vAHPb.js";import{a as le,A as Fr,b as Hr}from"../chunks/C3VE5xEq.js";import{H as gt}from"../chunks/Dmvn_pkP.js";import{O as zr}from"../chunks/Cq6696VF.js";import{B as We}from"../chunks/GXf5CvES.js";import{M as we}from"../chunks/B2VKg7zy.js";import{C as Ge}from"../chunks/D-550RMt.js";import{C as Wr,A as ft}from"../chunks/BLnXPQ5q.js";import{A as Gr,F as jr}from"../chunks/CQ8X2sVV.js";import{C as qr,a as Kr}from"../chunks/DmzJz26a.js";import{C as Xr,T as Jr}from"../chunks/Buf2v_0r.js";import{D as Qr}from"../chunks/DpocfqHG.js";import{D as Yr}from"../chunks/vBkll8cH.js";import{g as Zr,A as ea}from"../chunks/CfdSAoAU.js";import{m as Se}from"../chunks/BHTYC334.js";import{S as ta}from"../chunks/C9R8P1Xg.js";import{S as ra}from"../chunks/BL72B9yC.js";import{T as aa}from"../chunks/BaHAZRvh.js";import{e as l}from"../chunks/0qPXRVhz.js";import{a as pt}from"../chunks/BZ21-Ulh.js";import{f as sa}from"../chunks/oXVv5nIS.js";import"../chunks/CG4KAGH3.js";import{R as je}from"../chunks/gegweU97.js";import{b as bt,c as oa}from"../chunks/DxRnQWdm.js";import{h as ht,e as na}from"../chunks/DUXNbmIP.js";import{a as At,A as Ce,b as ia,c as la,h as ua}from"../chunks/BAR0RTAw.js";import{S as ca}from"../chunks/5Inb98wy.js";import{A as wt}from"../chunks/MMtgDOP-.js";import{a as da}from"../chunks/Cr9S0fVn.js";import{S as ma,a as va,s as _a}from"../chunks/BOLL51yO.js";import{C as ga}from"../chunks/CG2BHJh0.js";const fa=(async({params:K,url:g})=>{await sr(g);const s=await qe({id:K.albumId,withoutAssets:!0});return{album:s,meta:{title:s.albumName}}}),Ds=Object.freeze(Object.defineProperty({__proto__:null,load:fa},Symbol.toStringTag,{value:"Module"}));var pa=f('<p class="wrap-break-words whitespace-pre-line w-full text-black dark:text-white text-base"> </p>');function ba(K,g){xe(g,!0);const s=()=>te(Ue,"$t",ue),[ue,W]=Le();let p=Ie(g,"description",15);const G=async()=>{try{await Ke({id:g.id,updateAlbumDto:{description:p()}})}catch(F){Ee(F,s()("errors.unable_to_save_album"))}};var X=Te(),b=O(X);{var w=F=>{{let re=a(()=>s()("add_a_description"));Vr(F,{class:"outline-none border-b max-h-32 border-transparent pl-0 bg-transparent ring-0 focus:ring-0 resize-none focus:border-b-2 focus:border-immich-primary dark:focus:border-immich-dark-primary dark:bg-transparent",rows:1,grow:!0,shape:"rectangle",onfocusout:G,get placeholder(){return e(re)},"data-testid":"autogrow-textarea",[pr()]:J=>(br($t,()=>({shortcut:{key:"Enter",ctrl:!0},onShortcut:B=>B.currentTarget.blur()}))||mr)(J),get value(){return p()},set value(J){p(J)}})}},j=F=>{var re=Te(),J=O(re);{var B=x=>{var n=pa(),A=E(n,!0);$(n),ye(()=>he(A,p())),u(x,n)};i(J,x=>{p()&&x(B)},!0)}u(F,re)};i(b,F=>{g.isOwned?F(w):F(j,!1)})}u(K,X),ke(),W()}var ha=f('<input type="text"/>');function Aa(K,g){xe(g,!0);const s=()=>te(Ue,"$t",ue),[ue,W]=Le();let p=Ie(g,"albumName",15),G=a(p);const X=async()=>{if(e(G)!==p())try{await(async w=>{p(w.albumName)})(await Ke({id:g.id,updateAlbumDto:{albumName:e(G)}})),g.onUpdate(p())}catch(w){Ee(w,s()("errors.unable_to_save_album"));return}};var b=ha();hr(b),Et(b,(w,j)=>$t?.(w,j),()=>({shortcut:{key:"Enter"},onShortcut:w=>w.currentTarget.blur()})),vr(()=>Br(b,()=>e(G),w=>M(G,w))),ye((w,j)=>{Ar(b,1,`w-[99%] mb-2 border-b-2 border-transparent text-2xl md:text-4xl lg:text-6xl text-primary outline-none transition-all ${g.isOwned?"hover:border-gray-400":"hover:border-transparent"} focus:border-b-2 focus:border-immich-primary focus:outline-none bg-light dark:focus:border-immich-dark-primary dark:focus:bg-immich-dark-gray placeholder:text-primary/90`),b.disabled=!g.isOwned,ct(b,"title",w),ct(b,"placeholder",j)},[()=>s()("edit_title"),()=>s()("add_a_title")]),ur("blur",b,X),u(K,b),ke(),W()}function wa(K,g){xe(g,!0);const s=()=>te(Ue,"$t",ue),[ue,W]=Le();let p=Ie(g,"album",15),G=Ie(g,"menuItem",3,!1);const{getAssets:X,clearSelect:b}=Zr(),w=async()=>{if(await Se.showDialog({prompt:s()("remove_assets_album_confirmation",{values:{count:X().length}})}))try{const x=[...X()].map(ve=>ve.id),n=await ir({id:p().id,bulkIdsDto:{ids:x}});p(await qe({id:p().id})),g.onRemove?.(x);const A=n.filter(({success:ve})=>ve).length;St.success(s()("assets_removed_count",{values:{count:A}})),b()}catch(x){Ee(x,s()("errors.error_removing_assets_from_album"))}};var j=Te(),F=O(j);{var re=B=>{{let x=a(()=>s()("remove_from_album"));we(B,{get text(){return e(x)},get icon(){return wr},onClick:w})}},J=B=>{{let x=a(()=>s()("remove_from_album"));Ae(B,{shape:"round",color:"secondary",variant:"ghost",get"aria-label"(){return e(x)},get icon(){return yt},onclick:w})}};i(F,B=>{G()?B(re):B(J,!1)})}u(K,j),ke(),W()}var Sa=f('<button type="button" class="svelte-pnort"><!></button>'),ya=f('<div class="my-3 flex gap-x-1 svelte-pnort"><!> <button type="button" class="svelte-pnort"><!></button> <!> <!> <!></div>'),Ea=f('<section class="pt-8 md:pt-24 svelte-pnort"><!> <!> <!> <!></section>'),$a=f('<section id="empty-album" class=" mt-50 flex place-content-center place-items-center svelte-pnort"><div class="w-75 svelte-pnort"><p class="uppercase text-xs dark:text-immich-dark-fg svelte-pnort"> </p> <button type="button" class="mt-5 bg-subtle flex w-full place-items-center gap-6 rounded-2xl border px-8 py-8 text-immich-fg transition-all hover:bg-gray-100 dark:hover:bg-gray-500/20 hover:text-immich-primary dark:border-none dark:text-immich-dark-fg dark:hover:text-immich-dark-primary svelte-pnort"><span class="text-primary svelte-pnort"><!></span> <span class="text-lg svelte-pnort"> </span></button></div></section>'),Ca=f("<!> <!>",1),Ta=f('<div class="absolute z-2 bottom-0 end-0 mb-6 me-6 justify-self-end svelte-pnort"><!></div>'),Ia=f("<!> <!>",1),xa=f("<!> <!> <!> <!> <!> <!>",1),ka=f("<!> <!> <!> <!> <!>",1),La=f("<!> <!> <!> <!> <!>",1),Ua=f("<!> <!>",1),Ma=f("<!> <!>",1),Oa=f("<!> <!> <!>",1),Na=f("<!> <!> <!> <!> <!> <!>",1),Da=f('<p class="text-lg dark:text-immich-dark-fg svelte-pnort"><!></p>'),Va=f("<!> <!>",1),Pa=f("<!> <!> <!>",1),Ra=f('<div class="flex svelte-pnort"><div id="activity-panel" class="z-2 w-90 md:w-115 overflow-y-auto transition-all dark:border-l dark:border-s-immich-dark-gray svelte-pnort" translate="yes"><!></div></div>'),Ba=f('<!> <!> <div class="flex overflow-hidden svelte-pnort"><div class="relative w-full shrink svelte-pnort"><main class="relative h-dvh overflow-hidden px-2 md:px-6 max-md:pt-(--navbar-height-md) pt-(--navbar-height) svelte-pnort"><!> <!></main> <!></div> <!></div>',1);function Vs(K,g){xe(g,!0);const s=()=>te(Ue,"$t",b),ue=()=>te(B,"$slideshowNavigation",b),W=()=>te(j,"$showAssetViewer",b),p=()=>te(or,"$user",b),G=()=>te(nr,"$preferences",b),X=()=>te(re,"$gridScrollTarget",b),[b,w]=Le();let{isViewing:j,setAssetId:F,gridScrollTarget:re}=da,{slideshowState:J,slideshowNavigation:B}=_a,x=Be(void 0),n=Be(_r(l.VIEW)),A=Be(void 0),ve=a(()=>e(A)?.showAssetOwners??!1);const h=new wt,_e=new wt,Ct=async()=>{try{await le.toggleLike()}catch(r){Ee(r,s()("errors.cant_change_asset_favorite"))}},Tt=async()=>{const r=ue()===ma.Shuffle?await e(A).getRandomAsset():e(A).months[0]?.dayGroups[0]?.viewerAssets[0]?.asset;r&&ht(F(r.id).then(()=>Mr(J,va.PlaySlideshow)))},It=async()=>{if(e(A).suspendTransitions=!0,e(n)===l.SELECT_THUMBNAIL){M(n,l.VIEW,!0);return}if(e(n)===l.SELECT_ASSETS){await Xe();return}if(e(n)===l.OPTIONS){M(n,l.VIEW,!0);return}if(!W()&&h.selectionActive){na(h);return}},ce=async()=>{M(t,await qe({id:e(t).id,withoutAssets:!0}))},Me=async()=>{e(A).suspendTransitions=!0,M(n,l.VIEW,!0),await bt({targetRoute:"current",assetId:null,assetGridRouteSearchParams:{at:e(x)?.at}},{replaceState:!0,forceNavigate:!0}),M(x,null)},Xe=async()=>{_e.clearMultiselect(),await Me()},xt=r=>{e(A).removeAssets(r),h.clearMultiselect()},Je=async r=>{e(A).removeAssets(r),await ce()},kt=async r=>{e(A).upsertAssets(r),await ce()},Lt=async r=>{e(n)===l.SELECT_THUMBNAIL&&(await Qe(r),M(n,l.VIEW,!0),h.clearMultiselect())},Ut=async()=>{if(h.selectedAssets.length===1){const[r]=h.selectedAssets;h.clearMultiselect(),await Qe(r.id)}},Qe=async r=>{try{await Ke({id:e(t).id,updateAlbumDto:{albumThumbnailAssetId:r}}),St.success(s()("album_cover_updated"))}catch(d){Ee(d,s()("errors.unable_to_update_album_cover"))}};Or(async({to:r})=>{!oa(r?.route.id)&&e(t).assetCount===0&&!e(t).albumName&&await At(e(t),{notify:!1,prompt:!1})});let t=a(()=>g.data.album),Ye=a(()=>e(t).id);const Oe=a(()=>e(t)?.shared&&e(t).albumUsers.some(({role:r})=>r===$e.Editor)),Mt=a(()=>e(ve)&&e(Oe)?[e(t).owner,...e(t).albumUsers.map(({user:r})=>r)]:[]);ut(()=>{!e(t).isActivityEnabled&&le.commentCount===0&&pt.closeActivityPanel()});const Ot=a(()=>e(n)===l.SELECT_ASSETS?{visibility:lr.Timeline,withPartners:!0,timelineAlbumId:e(Ye)}:{albumId:e(Ye),order:e(t).order}),Ze=a(()=>e(n)===l.SELECT_ASSETS?!1:e(t).albumUsers.length>0);ut(()=>{W()||!e(Ze)||ht(le.init(e(t).id))}),dr(()=>le.reset());let ae=a(()=>p().id==e(t).ownerId),Nt=a(()=>e(t).albumUsers.length>0&&!W()&&(e(t).isActivityEnabled||le.commentCount>0)),Dt=a(()=>e(t).albumUsers.find(({user:{id:r}})=>r===p().id)?.role===$e.Editor||e(t).ownerId===p().id),Vt=a(()=>e(t).albumUsers.some(({role:r})=>r===$e.Viewer));const Pt=a(()=>e(n)===l.SELECT_ASSETS?!0:e(n)===l.SELECT_THUMBNAIL),Rt=a(()=>e(n)===l.SELECT_ASSETS?!1:e(n)===l.SELECT_THUMBNAIL),Bt=a(()=>e(n)!==l.SELECT_ASSETS),Ft=({id:r})=>{e(n)!==l.SELECT_ASSETS&&Lt(r)},Ht=a(()=>e(n)===l.SELECT_ASSETS?_e:h),zt=async()=>{await ce()},Wt=async({id:r})=>{r===e(t).id&&(await vt(je.albums()),M(n,l.VIEW,!0))},Gt=async()=>{await ce(),_e.clearMultiselect(),await Me()},jt=async()=>{await ce(),await Me()},qt=({albumId:r,userId:d,role:H})=>{r===e(t).id&&(e(t).albumUsers=e(t).albumUsers.map(N=>N.user.id===d?{...N,role:H}:N))},Kt=a(()=>Dr(s())),Xt=a(()=>e(Kt).Cast),et=a(()=>la(s(),e(t),e(n))),tt=a(()=>e(et).Share),Jt=a(()=>e(et).Close),rt=a(()=>ia(s(),e(t),_e.selectedAssets)),at=a(()=>e(rt).AddAssets),st=a(()=>e(rt).Upload);var ot=Ba(),nt=O(ot);zr(nt,{onSharedLinkCreate:zt,onSharedLinkDelete:ce,onAlbumDelete:Wt,onAlbumAddAssets:Gt,onAlbumShare:jt,onAlbumUserUpdate:qt,onAlbumUserDelete:ce,onAlbumUpdate:r=>M(t,r)});var it=o(nt,2);{let r=a(()=>s()("album")),d=a(()=>[e(at),e(st),e(Jt)]);ga(it,{get name(){return e(r)},get actions(){return e(d)}})}var Ne=o(it,2),De=E(Ne),Ve=E(De),lt=E(Ve);{let r=a(()=>e(n)!==l.SELECT_ASSETS);aa(lt,{get enableRouting(){return e(r)},get album(){return e(t)},get albumUsers(){return e(Mt)},get options(){return e(Ot)},get assetInteraction(){return e(Ht)},get isShared(){return e(Ze)},get isSelectionMode(){return e(Pt)},get singleSelect(){return e(Rt)},get showArchiveIcon(){return e(Bt)},onSelect:Ft,onEscape:It,get timelineManager(){return e(A)},set timelineManager(d){M(A,d,!0)},children:(d,H)=>{var N=Te(),Q=O(N);{var ge=se=>{var de=Ca(),k=O(de);{var fe=m=>{var v=Ea(),T=E(v);Aa(T,{get id(){return e(t).id},get albumName(){return e(t).albumName},get isOwned(){return e(ae)},onUpdate:S=>e(t).albumName=S});var L=o(T,2);{var D=S=>{Pr(S,{get album(){return e(t)}})};i(L,S=>{e(t).assetCount>0&&S(D)})}var I=o(L,2);{var P=S=>{var Y=ya(),_=E(Y);{var c=y=>{{let Z=a(()=>s()("create_link_to_share"));Ae(y,{get"aria-label"(){return e(Z)},color:"secondary",size:"medium",shape:"round",get icon(){return $r},onclick:()=>Se.show(ca,{albumId:e(t).id})})}};i(_,y=>{e(t).hasSharedLink&&e(ae)&&y(c)})}var R=o(_,2);R.__click=()=>Se.show(Ce,{album:e(t)});var me=E(R);_t(me,{get user(){return e(t).owner},size:"md"}),$(R);var z=o(R,2);fr(z,17,()=>e(t).albumUsers.filter(({role:y})=>y===$e.Editor),({user:y})=>y.id,(y,Z,ie,U)=>{let q=()=>e(Z).user;var ee=Sa();ee.__click=()=>Se.show(Ce,{album:e(t)});var Pe=E(ee);_t(Pe,{get user(){return q()},size:"md"}),$(ee),u(y,ee)});var ne=o(z,2);{var pe=y=>{{let Z=a(()=>s()("view_all_users"));Ae(y,{shape:"round",get"aria-label"(){return e(Z)},color:"secondary",size:"medium",get icon(){return He},onclick:()=>Se.show(Ce,{album:e(t)})})}};i(ne,y=>{e(Vt)&&y(pe)})}var be=o(ne,2);ze(be,{get action(){return e(tt)}}),$(Y),u(S,Y)};i(I,S=>{(e(t).albumUsers.length>0||e(t).hasSharedLink&&e(ae))&&S(P)})}var oe=o(I,2);ba(oe,{get id(){return e(t).id},get isOwned(){return e(ae)},get description(){return e(t).description},set description(S){e(t).description=S}}),$(v),u(m,v)};i(k,m=>{e(n)!==l.SELECT_THUMBNAIL&&m(fe)})}var V=o(k,2);{var C=m=>{var v=$a(),T=E(v),L=E(T),D=E(L,!0);$(L);var I=o(L,2);I.__click=()=>M(n,l.SELECT_ASSETS,!0);var P=E(I),oe=E(P);Sr(oe,{get icon(){return dt},size:"24"}),$(P);var S=o(P,2),Y=E(S,!0);$(S),$(I),$(T),$(v),ye((_,c)=>{he(D,_),he(Y,c)},[()=>s()("add_photos"),()=>s()("select_photos")]),u(m,v)};i(V,m=>{e(t).assetCount===0&&m(C)})}u(se,de)};i(Q,se=>{e(n)!==l.SELECT_ASSETS&&se(ge)})}u(d,N)},$$slots:{default:!0}})}var Qt=o(lt,2);{var Yt=r=>{var d=Ta(),H=E(d);{let N=a(()=>!e(t).isActivityEnabled);Fr(H,{get disabled(){return e(N)},get isLiked(){return le.isLiked},get numberOfComments(){return le.commentCount},numberOfLikes:void 0,onFavorite:Ct})}$(d),u(r,d)};i(Qt,r=>{e(Nt)&&!le.isLoading&&r(Yt)})}$(Ve);var Zt=o(Ve,2);{var er=r=>{ea(r,{get assets(){return h.selectedAssets},clearSelect:()=>h.clearMultiselect(),children:(d,H)=>{var N=La(),Q=O(N);Wr(Q,{});var ge=o(Q,2);ta(ge,{get timelineManager(){return e(A)},get assetInteraction(){return h}});var se=o(ge,2);{let V=a(()=>s()("add_to"));We(se,{get icon(){return dt},get title(){return e(V)},children:(C,m)=>{var v=Ia(),T=O(v);ft(T,{});var L=o(T,2);ft(L,{shared:!0}),u(C,v)},$$slots:{default:!0}})}var de=o(se,2);{var k=V=>{jr(V,{get removeFavorite(){return h.isAllFavorite},onFavorite:(C,m)=>e(A).update(C,v=>v.isFavorite=m)})};i(de,V=>{h.isAllUserOwned&&V(k)})}var fe=o(de,2);{let V=a(()=>s()("menu"));We(fe,{get icon(){return He},get title(){return e(V)},offset:{x:175,y:25},children:(C,m)=>{var v=ka(),T=O(v);Yr(T,{menuItem:!0,get filename(){return`${e(t).albumName??""}.zip`}});var L=o(T,2);{var D=c=>{var R=xa(),me=O(R);qr(me,{menuItem:!0});var z=o(me,2);Xr(z,{menuItem:!0});var ne=o(z,2);Kr(ne,{menuItem:!0});var pe=o(ne,2);{var be=ie=>{{let U=a(()=>s()("set_as_album_cover"));we(ie,{get text(){return e(U)},get icon(){return mt},onClick:()=>Ut()})}};i(pe,ie=>{h.selectedAssets.length===1&&ie(be)})}var y=o(pe,2);Gr(y,{menuItem:!0,get unarchive(){return h.isAllArchived},onArchive:(ie,U)=>e(A).update(ie,q=>q.visibility=U)});var Z=o(y,2);ra(Z,{menuItem:!0,onVisibilitySet:xt}),u(c,R)};i(L,c=>{h.isAllUserOwned&&c(D)})}var I=o(L,2);{var P=c=>{Jr(c,{menuItem:!0})};i(I,c=>{G().tags.enabled&&h.isAllUserOwned&&c(P)})}var oe=o(I,2);{var S=c=>{wa(c,{menuItem:!0,onRemove:Je,get album(){return e(t)},set album(R){M(t,R)}})};i(oe,c=>{(e(ae)||h.isAllUserOwned)&&c(S)})}var Y=o(oe,2);{var _=c=>{Qr(c,{menuItem:!0,onAssetDelete:Je,onUndoDelete:kt})};i(Y,c=>{h.isAllUserOwned&&c(_)})}u(C,v)},$$slots:{default:!0}})}u(d,N)},$$slots:{default:!0}})},tr=r=>{var d=Pa(),H=O(d);{var N=k=>{Ge(k,{showBackButton:!0,get backIcon(){return Cr},onClose:()=>vt(je.albums()),trailing:V=>{var C=Na(),m=O(C);ze(m,{get action(){return e(Xt)}});var v=o(m,2);{var T=_=>{{let c=a(()=>s()("add_photos"));Ae(_,{variant:"ghost",shape:"round",color:"secondary",get"aria-label"(){return e(c)},onclick:async()=>{e(A).suspendTransitions=!0,M(n,l.SELECT_ASSETS,!0),M(x,{at:X()?.at},!0),await bt({targetRoute:"current",assetId:null,assetGridRouteSearchParams:{at:null}},{replaceState:!0})},get icon(){return Tr}})}};i(v,_=>{e(Dt)&&_(T)})}var L=o(v,2);ze(L,{get action(){return e(tt)}});var D=o(L,2);{var I=_=>{Rr(_,{get album(){return e(t)}})};i(D,_=>{sa.value.map&&_(I)})}var P=o(D,2);{var oe=_=>{var c=Ua(),R=O(c);{let z=a(()=>s()("slideshow"));Ae(R,{shape:"round",variant:"ghost",color:"secondary",get"aria-label"(){return e(z)},onclick:Tt,get icon(){return Ir}})}var me=o(R,2);{let z=a(()=>s()("download"));Ae(me,{shape:"round",variant:"ghost",color:"secondary",get"aria-label"(){return e(z)},onclick:()=>ua(e(t)),get icon(){return xr}})}u(_,c)};i(P,_=>{e(t).assetCount>0&&_(oe)})}var S=o(P,2);{var Y=_=>{{let c=a(()=>s()("album_options"));We(_,{get icon(){return He},get title(){return e(c)},color:"secondary",offset:{x:175,y:25},children:(R,me)=>{var z=Oa(),ne=O(z);{var pe=U=>{{let q=a(()=>e(ve)?Lr:Ur),ee=a(()=>s()("view_asset_owners"));we(U,{get icon(){return e(q)},get text(){return e(ee)},onClick:()=>e(A).toggleShowAssetOwners()})}};i(ne,U=>{e(Oe)&&U(pe)})}var be=o(ne,2);{var y=U=>{var q=Ma(),ee=O(q);{let Re=a(()=>s()("select_album_cover"));we(ee,{get icon(){return mt},get text(){return e(Re)},onClick:()=>M(n,l.SELECT_THUMBNAIL,!0)})}var Pe=o(ee,2);{let Re=a(()=>s()("options"));we(Pe,{get icon(){return kr},get text(){return e(Re)},onClick:()=>Se.show(Ce,{album:e(t)})})}u(U,q)};i(be,U=>{e(ae)&&e(t).assetCount>0&&U(y)})}var Z=o(be,2);{var ie=U=>{{let q=a(()=>s()("delete_album"));we(U,{get icon(){return yt},get text(){return e(q)},onClick:()=>At(e(t))})}};i(Z,U=>{e(ae)&&U(ie)})}u(R,z)},$$slots:{default:!0}})}};i(S,_=>{(e(ae)||e(Oe))&&_(Y)})}u(V,C)},$$slots:{trailing:!0}})};i(H,k=>{e(n)===l.VIEW&&k(N)})}var Q=o(H,2);{var ge=k=>{Ge(k,{onClose:Xe,leading:C=>{var m=Da(),v=E(m);{var T=D=>{var I=Fe();ye(P=>he(I,P),[()=>s()("add_to_album")]),u(D,I)},L=D=>{var I=Fe();ye(P=>he(I,P),[()=>s()("selected_count",{values:{count:_e.selectedAssets.length}})]),u(D,I)};i(v,D=>{_e.selectionActive?D(L,!1):D(T)})}$(m),u(C,m)},trailing:C=>{var m=Va(),v=O(m);gt(v,{get action(){return e(st)}});var T=o(v,2);gt(T,{get action(){return e(at)}}),u(C,m)},$$slots:{leading:!0,trailing:!0}})};i(Q,k=>{e(n)===l.SELECT_ASSETS&&k(ge)})}var se=o(Q,2);{var de=k=>{Ge(k,{onClose:()=>M(n,l.VIEW,!0),leading:V=>{gr();var C=Fe();ye(m=>he(C,m),[()=>s()("select_album_cover")]),u(V,C)},$$slots:{leading:!0}})};i(se,k=>{e(n)===l.SELECT_THUMBNAIL&&k(de)})}u(r,d)};i(Zt,r=>{h.selectionActive?r(er):r(tr,!1)})}$(De);var rr=o(De,2);{var ar=r=>{var d=Ra(),H=E(d),N=E(H);{let Q=a(()=>!e(t).isActivityEnabled);Hr(N,{get user(){return p()},get disabled(){return e(Q)},get albumOwnerId(){return e(t).ownerId},get albumId(){return e(t).id}})}$(H),$(d),yr(3,H,()=>Er,()=>({duration:150})),u(r,d)};i(rr,r=>{e(t).albumUsers.length>0&&e(t)&&pt.isShowActivityPanel&&p()&&!W()&&r(ar)})}$(Ne),Et(Ne,(r,d)=>Nr?.(r,d),()=>({routeStartsWith:je.albums()})),u(K,ot),ke(),w()}cr(["click"]);export{Vs as component,Ds as universal};
