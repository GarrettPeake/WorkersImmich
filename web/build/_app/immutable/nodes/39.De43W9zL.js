const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_app/immutable/chunks/7ZR7F41Y.js","_app/immutable/chunks/DsnmJJEf.js","_app/immutable/chunks/C8vxa4mj.js","_app/immutable/chunks/D0CSSuTl.js","_app/immutable/chunks/DIeogL5L.js","_app/immutable/chunks/Bd1JH_Ov.js","_app/immutable/chunks/D8NIUdeB.js","_app/immutable/chunks/orVkzVhB.js","_app/immutable/chunks/DLePdI2u.js","_app/immutable/chunks/BP6NvnZ7.js","_app/immutable/chunks/7tRQeUtl.js","_app/immutable/chunks/zonMEKN6.js","_app/immutable/chunks/D-UYCH9y.js","_app/immutable/chunks/CMI33r64.js","_app/immutable/chunks/gvLJu3l0.js","_app/immutable/chunks/BUApaBEI.js","_app/immutable/assets/Logo.REF6zmWd.css","_app/immutable/chunks/IOA7-Wrn.js","_app/immutable/chunks/dsDpGkcL.js","_app/immutable/chunks/BRztk81V.js","_app/immutable/chunks/0qPXRVhz.js","_app/immutable/chunks/DUXNbmIP.js","_app/immutable/chunks/DxRnQWdm.js","_app/immutable/chunks/CG4KAGH3.js","_app/immutable/chunks/BpCm29KX.js","_app/immutable/chunks/gegweU97.js","_app/immutable/chunks/DWQ0JXRY.js","_app/immutable/chunks/CJGyQpNN.js","_app/immutable/chunks/BVZhy_zG.js","_app/immutable/chunks/CIJfCxLq.js","_app/immutable/chunks/C_T4m_n1.js","_app/immutable/chunks/B2VKg7zy.js","_app/immutable/chunks/DcdhlkRn.js","_app/immutable/chunks/Q3VoKRsI.js","_app/immutable/chunks/DU5vAHPb.js","_app/immutable/chunks/DFvk55M8.js","_app/immutable/chunks/B9MV_P2E.js","_app/immutable/chunks/CwqKZNgJ.js","_app/immutable/chunks/DPMzVlQx.js","_app/immutable/chunks/CS-10t6W.js","_app/immutable/chunks/DW5CvR3c.js","_app/immutable/chunks/BHTYC334.js","_app/immutable/chunks/Tw41aoDi.js","_app/immutable/chunks/Bqqp8sy9.js","_app/immutable/chunks/CF_nq223.js","_app/immutable/chunks/WQ1yKytR.js","_app/immutable/chunks/DnqqNi3p.js","_app/immutable/chunks/oXVv5nIS.js","_app/immutable/chunks/ChL-L15l.js","_app/immutable/chunks/CoqJY867.js","_app/immutable/chunks/DS0yfrVF.js","_app/immutable/chunks/3Su-ePg-.js","_app/immutable/chunks/s_2UW97Q.js","_app/immutable/assets/Input.idyGuON4.css","_app/immutable/chunks/69_IOA4Y.js","_app/immutable/chunks/9chJ2bcr.js","_app/immutable/chunks/B8RZOa0L.js","_app/immutable/chunks/Dgf_MdoC.js","_app/immutable/chunks/BZ21-Ulh.js","_app/immutable/chunks/5Inb98wy.js","_app/immutable/chunks/FpAj0Eak.js","_app/immutable/chunks/BjFPDMuz.js","_app/immutable/chunks/msCV69PI.js","_app/immutable/chunks/CgXU4mBI.js","_app/immutable/chunks/D1613R3V.js","_app/immutable/chunks/Biw8UfMB.js","_app/immutable/chunks/BMcevgEe.js","_app/immutable/chunks/BgQCgJ0_.js","_app/immutable/chunks/BzOEcAd-.js","_app/immutable/chunks/i7F918yQ.js","_app/immutable/chunks/CLpfTz4o.js","_app/immutable/chunks/Cr9S0fVn.js","_app/immutable/chunks/BmJQ54Se.js","_app/immutable/chunks/D3D47pl8.js","_app/immutable/chunks/BOLL51yO.js","_app/immutable/chunks/GXf5CvES.js","_app/immutable/chunks/BitKOkE8.js","_app/immutable/chunks/jZIyHVjf.js","_app/immutable/chunks/CG2BHJh0.js","_app/immutable/chunks/DKzKigBY.js","_app/immutable/chunks/Cq6696VF.js","_app/immutable/chunks/C3VE5xEq.js","_app/immutable/chunks/BcI9YXFA.js","_app/immutable/assets/Textarea.CRksyXnO.css","_app/immutable/assets/activity-viewer.CwxlvmcY.css","_app/immutable/chunks/CbJ1QVsO.js","_app/immutable/assets/thumbnail.Di7rqjOL.css","_app/immutable/chunks/BVcN3VUI.js","_app/immutable/chunks/C0GZEybY.js","_app/immutable/chunks/DCmy867i.js","_app/immutable/chunks/CC3fx6b-.js","_app/immutable/chunks/BCf5NZQ6.js","_app/immutable/chunks/DxfhPdFw.js","_app/immutable/chunks/D5KKc-uL.js","_app/immutable/chunks/BbpJDI0d.js","_app/immutable/chunks/GyRE5G4-.js","_app/immutable/chunks/DDy4N4G7.js","_app/immutable/chunks/XSsqx5Lk.js","_app/immutable/chunks/Dt4pkAJO.js","_app/immutable/assets/asset-viewer.CSooJwqO.css"])))=>i.map(i=>d[i]);
import{a as ot}from"../chunks/CJGyQpNN.js";import{g as nt,$ as we}from"../chunks/DWQ0JXRY.js";import{bi as dt,a2 as ct,h as ut,bj as vt,k as Ae,P as Le}from"../chunks/BP6NvnZ7.js";import"../chunks/DsnmJJEf.js";import{c as u,g as e,s as h,f as te,b as mt,r as c,t as g,u as n,p as ke,n as N,a as $e,h as Xe,i as Ge,j as pe,$ as Qe}from"../chunks/D0CSSuTl.js";import{d as ft,s as v,o as gt,a as ht}from"../chunks/C8vxa4mj.js";import{c as _e,a as i,f as q,t as P}from"../chunks/Bd1JH_Ov.js";import{i as de}from"../chunks/D8NIUdeB.js";import{a as be,T as Ve,q as Ne,s as he,du as _t,cE as xt,aS as pt,dv as bt,dw as yt,cy as wt,dx as kt,dy as $t,dz as It,ai as Pt,cM as Ye,B as ee,W as Ue,K as je,dA as St,I as Ee,dB as At,ab as zt,d5 as Dt,dC as Mt,cK as Tt,bR as Ot,dD as Bt}from"../chunks/D-UYCH9y.js";import{a as et}from"../chunks/IOA7-Wrn.js";import{p as Ze,a as le,s as Ie,e as Ct}from"../chunks/zonMEKN6.js";import{g as ze}from"../chunks/gvLJu3l0.js";import{p as De}from"../chunks/CG4KAGH3.js";import{s as tt}from"../chunks/BVZhy_zG.js";import{U as Vt}from"../chunks/tK_U6--f.js";import{_ as Nt}from"../chunks/0qPXRVhz.js";import{a as at}from"../chunks/Biw8UfMB.js";import{e as jt,t as Ke,h as Ft}from"../chunks/DLePdI2u.js";import{X as He,aj as We,y as Rt,l as st,h as Lt,j as Ut,k as Et,aa as Zt}from"../chunks/DUXNbmIP.js";import{t as Kt,g as Ht,c as Me,b as Te}from"../chunks/CF_nq223.js";import{s as Wt}from"../chunks/CMI33r64.js";import{S as Oe,P as qt}from"../chunks/BRztk81V.js";import{b as qe,a as Jt}from"../chunks/DxRnQWdm.js";import{a as ye}from"../chunks/Cr9S0fVn.js";import{s as Je}from"../chunks/LA_Al6qO.js";import{f as xe}from"../chunks/oXVv5nIS.js";import{M as Xt,a as Gt,H as Qt,m as Be}from"../chunks/BHTYC334.js";import{S as Yt}from"../chunks/BEqGsB-Y.js";import{R as Ce}from"../chunks/gegweU97.js";const ea=(async({url:B})=>{await ot(B);const t=await dt(),s=await nt();return{duplicates:t,meta:{title:s("duplicates")}}}),Ha=Object.freeze(Object.defineProperty({__proto__:null,load:ea},Symbol.toStringTag,{value:"Module"}));var ta=q('<div><!> <div class="justify-self-end text-end rounded px-1 transition-colors w-full overflow-hidden"><!></div></div>');function ue(B,t){let s=Ze(t,"borderBottom",3,!0),z=Ze(t,"highlight",3,!1);var j=ta();let M;var ae=u(j);{let J=n(()=>z()?"text-primary/75":"");be(ae,{get icon(){return t.icon},size:"18",get class(){return`text-dark/25 ${e(J)??""}`}})}var ie=h(ae,2),m=u(ie);{let J=n(()=>z()?"semi-bold":"normal"),k=n(()=>`${z()?"text-primary":""} text-ellipsis w-full overflow-hidden`);Ve(m,{size:"tiny",get fontWeight(){return e(J)},get class(){return e(k)},children:(y,C)=>{var D=_e(),R=te(D);Wt(R,()=>t.children??mt),i(y,D)},$$slots:{default:!0}})}c(ie),c(j),g(()=>{M=Ne(j,1,"grid grid-cols-[25px_1fr] w-full px-1 py-0.5",null,M,{"border-b":s()}),he(j,"title",t.title)}),i(B,j)}var aa=q('<div class="absolute bottom-2 start-2"><!></div>'),sa=q('<div class="bg-immich-primary/90 px-2 py-1 rounded-xl text-xs text-white"> </div>'),ra=q('<div class="bg-immich-primary/90 px-2 py-1 my-0.5 rounded-xl text-xs text-white"><div class="flex items-center justify-center"><div class="me-1"> </div> <!></div></div>'),la=q('<div class="min-w-60 transition-colors border rounded-lg flex-1"><div class="relative w-full"><button type="button" class="block relative w-full"><img class="h-60 object-cover w-full rounded-t-md" draggable="false"/> <!> <div> </div> <div class="absolute top-2 end-3"><!> <!></div></button> <button type="button" class="absolute rounded-full top-1 start-1 text-gray-200 p-2 hover:text-white bg-black/35 hover:bg-black/50"><!></button></div> <div><!> <!> <!> <!> <!> <!> <!> <!></div></div>');function ia(B,t){ke(t,!0);const s=()=>le(we,"$t",M),z=()=>le(st,"$locale",M),j=()=>le(Ht,"$getAltText",M),[M,ae]=Ie();let ie=n(()=>!!t.asset.libraryId),m=n(()=>JSON.stringify(t.asset,null,2)),J=n(()=>[t.asset.exifInfo?.city,t.asset.exifInfo?.state,t.asset.exifInfo?.country].filter(Boolean)),k=n(()=>t.asset.exifInfo?.timeZone),y=n(()=>e(k)&&t.asset.exifInfo?.dateTimeOriginal?Me(t.asset.exifInfo.dateTimeOriginal,e(k)):Te(t.asset.localDateTime));const C=a=>new Set(t.assets.map(r=>a(r))).size>1,D=n(()=>({fileName:C(a=>a.originalFileName),fileSize:C(a=>He(a)),resolution:C(a=>We(a)),originalPath:C(a=>a.originalPath??s()("unknown")),date:C(a=>{const r=a.exifInfo?.timeZone;return(r&&a.exifInfo?.dateTimeOriginal?Me(a.exifInfo.dateTimeOriginal,r):Te(a.localDateTime))?.toLocaleString({month:"short",day:"numeric",year:"numeric"},{locale:z()})}),time:C(a=>{const r=a.exifInfo?.timeZone;return(r&&a.exifInfo?.dateTimeOriginal?Me(a.exifInfo.dateTimeOriginal,r):Te(a.localDateTime))?.toLocaleString({hour:"numeric",minute:"2-digit",second:"2-digit",timeZoneName:r?"shortOffset":void 0},{locale:z()})}),location:C(a=>[a.exifInfo?.city,a.exifInfo?.state,a.exifInfo?.country].filter(Boolean).join(", ")||"unknown")})),R=(a,r)=>r&&a.endsWith(r)?a.slice(0,-(r.length+1)):a;function ce(a,r=50){if(a.length<=r)return a;const x=Math.floor(r/2)-2,d=Math.floor(r/2)-2;return a.slice(0,Math.max(0,x))+"..."+a.slice(Math.max(0,a.length-d))}var W=la(),X=u(W),L=u(X);L.__click=()=>t.onSelectAsset(t.asset);var se=u(L),re=h(se,2);{var ve=a=>{var r=aa(),x=u(r);be(x,{get icon(){return Pt},size:"24",class:"text-white"}),c(r),i(a,r)};de(re,a=>{t.asset.isFavorite&&a(ve)})}var G=h(re,2),me=u(G,!0);c(G);var fe=h(G,2),Q=u(fe);{var _=a=>{var r=sa(),x=u(r,!0);c(r),g(d=>v(x,d),[()=>s()("external")]),i(a,r)};de(Q,a=>{e(ie)&&a(_)})}var p=h(Q,2);{var A=a=>{var r=ra(),x=u(r),d=u(x),I=u(d,!0);c(d);var O=h(d,2);be(O,{get icon(){return Ye},size:"18"}),c(x),c(r),g(()=>v(I,t.asset.stack.assetCount)),i(a,r)};de(p,a=>{t.asset.stack?.assetCount&&a(A)})}c(fe),c(L);var S=h(L,2);S.__click=()=>t.onViewAsset(t.asset);var T=u(S);{let a=n(()=>s()("view"));be(T,{get"aria-label"(){return e(a)},get icon(){return _t},flipped:!0,size:"18"})}c(S),c(X);var U=h(X,2),F=u(U);{let a=n(()=>s()("file_name",{values:{file_name:t.asset.originalFileName??""}}));ue(F,{get icon(){return xt},get highlight(){return e(D).fileName},get title(){return e(a)},children:(r,x)=>{N();var d=P();g(()=>v(d,t.asset.originalFileName)),i(r,d)},$$slots:{default:!0}})}var oe=h(F,2);{let a=n(()=>s()("full_path",{values:{path:t.asset.originalPath}}));ue(oe,{get icon(){return pt},get highlight(){return e(D).originalPath},get title(){return e(a)},children:(r,x)=>{N();var d=P();g(I=>v(d,I),[()=>ce(R(t.asset.originalPath,t.asset.originalFileName))||s()("unknown")]),i(r,d)},$$slots:{default:!0}})}var E=h(oe,2);{let a=n(()=>s()("file_size"));ue(E,{get icon(){return bt},get highlight(){return e(D).fileSize},get title(){return e(a)},children:(r,x)=>{N();var d=P();g(I=>v(d,I),[()=>He(t.asset)]),i(r,d)},$$slots:{default:!0}})}var l=h(E,2);{let a=n(()=>s()("resolution"));ue(l,{get icon(){return yt},get highlight(){return e(D).resolution},get title(){return e(a)},children:(r,x)=>{N();var d=P();g(I=>v(d,I),[()=>We(t.asset)]),i(r,d)},$$slots:{default:!0}})}var o=h(l,2);{let a=n(()=>s()("date"));ue(o,{get icon(){return wt},get highlight(){return e(D).date},get title(){return e(a)},children:(r,x)=>{var d=_e(),I=te(d);{var O=f=>{var $=P();g(K=>v($,K),[()=>e(y).toLocaleString({month:"short",day:"numeric",year:"numeric"},{locale:z()})]),i(f,$)},V=f=>{var $=P();g(K=>v($,K),[()=>s()("unknown")]),i(f,$)};de(I,f=>{e(y)?f(O):f(V,!1)})}i(r,d)},$$slots:{default:!0}})}var b=h(o,2);{let a=n(()=>s()("time"));ue(b,{get icon(){return kt},get highlight(){return e(D).time},get title(){return e(a)},children:(r,x)=>{var d=_e(),I=te(d);{var O=f=>{var $=P();g(K=>v($,K),[()=>e(y).toLocaleString({hour:"numeric",minute:"2-digit",second:"2-digit",timeZoneName:e(k)?"shortOffset":void 0},{locale:z()})]),i(f,$)},V=f=>{var $=P();g(K=>v($,K),[()=>s()("unknown")]),i(f,$)};de(I,f=>{e(y)?f(O):f(V,!1)})}i(r,d)},$$slots:{default:!0}})}var w=h(b,2);{let a=n(()=>s()("location"));ue(w,{get icon(){return $t},get highlight(){return e(D).location},get title(){return e(a)},children:(r,x)=>{var d=_e(),I=te(d);{var O=f=>{var $=P();g(K=>v($,K),[()=>e(J).join(", ")]),i(f,$)},V=f=>{var $=P();g(K=>v($,K),[()=>s()("unknown")]),i(f,$)};de(I,f=>{e(J).length>0?f(O):f(V,!1)})}i(r,d)},$$slots:{default:!0}})}var Z=h(w,2);{let a=n(()=>s()("albums"));ue(Z,{get icon(){return It},borderBottom:!1,get title(){return e(a)},children:(r,x)=>{var d=_e(),I=te(d);at(I,()=>ct({assetId:t.asset.id}),O=>{var V=P();g(f=>v(V,f),[()=>s()("scanning_for_album")]),i(O,V)},(O,V)=>{var f=P();g($=>v(f,$),[()=>s()("in_albums",{values:{count:e(V).length}})]),i(O,f)}),i(r,d)},$$slots:{default:!0}})}c(U),c(W),g((a,r,x,d,I)=>{he(L,"aria-pressed",t.isSelected),he(L,"aria-label",a),he(se,"src",r),he(se,"alt",x),he(se,"title",e(m)),Ne(G,1,`absolute bottom-1 end-3 px-4 py-1 rounded-xl text-xs transition-colors ${t.isSelected?"bg-green-400/90":"bg-red-300/90"} text-black`),v(me,d),he(S,"title",I),Ne(U,1,`grid place-items-start gap-y-2 py-2 text-sm transition-colors rounded-b-lg ${t.isSelected?"bg-success/15 dark:bg-[#001a06]":"bg-transparent"}`)},[()=>s()("keep"),()=>Rt({id:t.asset.id}),()=>j()(Kt(t.asset)),()=>t.isSelected?s()("keep"):s()("to_trash"),()=>s()("view")]),i(B,W),$e(),ae()}ft(["click"]);const oa=B=>Object.values(B.exifInfo??{}).filter(Boolean).length,rt=B=>{let t=Je(B,s=>s.exifInfo?.fileSizeInByte??0);return t=t.filter(s=>s.exifInfo?.fileSizeInByte===t.at(-1)?.exifInfo?.fileSizeInByte),t.length>=2&&(t=Je(t,oa)),t.pop()};var na=q('<div class="rounded-3xl border dark:border-2 border-gray-300 dark:border-gray-700 max-w-256 mx-auto mb-4 py-6 px-0.2"><div class="flex flex-wrap gap-y-6 mb-4 px-6 w-full place-content-end justify-between"><div class="flex text-xs text-black"><!> <!></div> <div class="flex text-xs text-black"><!> <!></div></div> <div class="overflow-x-auto p-2"><div class="flex flex-nowrap gap-1 place-items-start justify-center min-w-full w-fit mx-auto"></div></div></div> <!>',1);function da(B,t){ke(t,!0);const s=()=>le(m,"$viewingAsset",M),z=()=>le(we,"$t",M),j=()=>le(ie,"$showAssetViewer",M),[M,ae]=Ie(),{isViewing:ie,asset:m,setAsset:J}=ye;let k=Xe(Ge(new Oe)),y=n(()=>t.assets.length-e(k).size);gt(()=>{const l=rt(t.assets);if(!l){pe(k,new Oe(t.assets[0].id),!0);return}e(k).add(l.id)}),ht(()=>{ye.showAssetViewer(!1)});const C=async()=>{if(t.assets.length<=0)return;const l=Math.floor(Math.random()*t.assets.length),o=t.assets[l];return await W(o),{id:o.id}},D=l=>{e(k).has(l.id)?e(k).delete(l.id):e(k).add(l.id)},R=()=>{e(k).clear()},ce=()=>{pe(k,new Oe(t.assets.map(l=>l.id)),!0)},W=async({id:l})=>{const o=await ut({...Jt.params,id:l});J(o),await qe({targetRoute:"current",assetId:o.id})},X=()=>{const l=t.assets.map(b=>b.id).filter(b=>!e(k).has(b)),o=t.assets.map(b=>b.id);t.onResolve(o,l)},L=()=>{t.onStack(t.assets)},se=n(()=>({current:s(),nextAsset:Et(t.assets,s()),previousAsset:Ut(t.assets,s())}));var re=na();et(Qe,(l,o)=>tt?.(l,o),()=>[{shortcut:{key:"a"},onShortcut:ce},{shortcut:{key:"s"},onShortcut:()=>W(t.assets[0])},{shortcut:{key:"d"},onShortcut:R},{shortcut:{key:"c",shift:!0},onShortcut:X},{shortcut:{key:"s",shift:!0},onShortcut:L}]);var ve=te(re),G=u(ve),me=u(G),fe=u(me);ee(fe,{class:"rounded-s-full",size:"small",color:"primary",get leadingIcon(){return Ue},onclick:ce,children:(l,o)=>{N();var b=P();g(w=>v(b,w),[()=>z()("select_keep_all")]),i(l,b)},$$slots:{default:!0}});var Q=h(fe,2);ee(Q,{class:"rounded-e-full",size:"small",color:"secondary",get leadingIcon(){return je},onclick:R,children:(l,o)=>{N();var b=P();g(w=>v(b,w),[()=>z()("select_trash_all")]),i(l,b)},$$slots:{default:!0}}),c(me);var _=h(me,2),p=u(_);{var A=l=>{ee(l,{size:"small",get leadingIcon(){return Ue},color:"success",class:"flex place-items-center rounded-s-full gap-2",onclick:X,children:(o,b)=>{N();var w=P();g(Z=>v(w,Z),[()=>z()("keep_all")]),i(o,w)},$$slots:{default:!0}})},S=l=>{ee(l,{size:"small",color:"danger",get leadingIcon(){return je},class:"rounded-s-full",onclick:X,children:(o,b)=>{N();var w=P();g(Z=>v(w,Z),[()=>e(y)===t.assets.length?z()("trash_all"):z()("trash_count",{values:{count:e(y)}})]),i(o,w)},$$slots:{default:!0}})};de(p,l=>{e(y)===0?l(A):l(S,!1)})}var T=h(p,2);{let l=n(()=>e(k).size!==1);ee(T,{size:"small",color:"primary",get leadingIcon(){return Ye},class:"rounded-e-full",onclick:L,get disabled(){return e(l)},children:(o,b)=>{N();var w=P();g(Z=>v(w,Z),[()=>z()("stack")]),i(o,w)},$$slots:{default:!0}})}c(_),c(G);var U=h(G,2),F=u(U);jt(F,21,()=>t.assets,l=>l.id,(l,o)=>{{let b=n(()=>e(k).has(e(o).id));ia(l,{get assets(){return t.assets},get asset(){return e(o)},onSelectAsset:D,get isSelected(){return e(b)},onViewAsset:W})}}),c(F),c(U),c(ve);var oe=h(ve,2);{var E=l=>{var o=_e(),b=te(o);at(b,()=>Nt(()=>import("../chunks/7ZR7F41Y.js").then(w=>w.a),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99])),null,(w,Z)=>{var a=n(()=>{var{default:x}=e(Z);return{AssetViewer:x}}),r=n(()=>e(a).AssetViewer);qt(w,{target:"body",children:(x,d)=>{var I=_e(),O=te(I);{let V=n(()=>t.assets.length>1);Ct(O,()=>e(r),(f,$)=>{$(f,{get cursor(){return e(se)},get showNavigation(){return e(V)},onRandom:C,onClose:()=>{ye.showAssetViewer(!1),Lt(qe({targetRoute:"current",assetId:null}))}})})}i(x,I)},$$slots:{default:!0}})}),i(l,o)};de(oe,l=>{j()&&l(E)})}i(B,re),$e(),ae()}var ca=q('<div class="text-sm dark:text-white"><p> </p> <ol class="ms-8 mt-2" style="list-style: decimal"><li> </li> <li> </li></ol></div>');function ua(B,t){ke(t,!0);const s=()=>le(we,"$t",z),[z,j]=Ie();{let M=n(()=>s()("deduplication_info"));Xt(B,{get title(){return e(M)},size:"small",get onClose(){return t.onClose},children:(ae,ie)=>{Gt(ae,{children:(m,J)=>{var k=ca(),y=u(k),C=u(y,!0);c(y);var D=h(y,2),R=u(D),ce=u(R,!0);c(R);var W=h(R,2),X=u(W,!0);c(W),c(D),c(k),g((L,se,re)=>{v(C,L),v(ce,se),v(X,re)},[()=>s()("deduplication_info_description"),()=>s()("deduplication_criteria_1"),()=>s()("deduplication_criteria_2")]),i(m,k)},$$slots:{default:!0}})},$$slots:{default:!0}})}$e(),j()}var va=q("<!> <!> <!>",1),ma=q('<!> <div class="max-w-5xl mx-auto mb-16"><div class="flex mb-4 sm:px-6 w-full place-content-center justify-between items-center place-items-center"><div class="flex text-xs text-black"><!> <!></div> <p class="border px-3 md:px-6 py-1 dark:bg-subtle rounded-lg text-xs md:text-sm"> </p> <div class="flex text-xs text-black"><!> <!></div></div></div>',1),fa=q('<div class="flex items-center mb-2"><div class="text-sm dark:text-white"><p> </p></div> <!></div> <!>',1),ga=q('<p class="text-center text-lg dark:text-white flex place-items-center place-content-center"> </p>'),ha=q("<div><!></div>");function Wa(B,t){ke(t,!0);const s=()=>le(we,"$t",M),z=()=>le(J,"$showAssetViewer",M),j=()=>le(st,"$locale",M),[M,ae]=Ie(),ie={general:[],actions:[{key:["a"],action:s()("select_all_duplicates")},{key:["s"],action:s()("view")},{key:["d"],action:s()("unselect_all_duplicates")},{key:["⇧","c"],action:s()("resolve_duplicates")},{key:["⇧","s"],action:s()("stack_duplicates")}]};let m=Xe(Ge(t.data.duplicates));const{isViewing:J}=ye,k=_=>Math.max(0,Math.min(_,e(m).length-1));let y=n(()=>(()=>{const _=De.url.searchParams.get("index")??"0",p=Number.parseInt(_,10);return k(Number.isNaN(p)?0:p)})()),C=n(()=>e(m).length>0);const D=async(_,p,A)=>{if(!(p&&A&&!await Be.showDialog({prompt:p,confirmText:A})))try{return await _()}catch(S){Ft(S,s()("errors.unable_to_resolve_duplicate"))}},R=_=>{if(!_)return;const p=xe.value.trash?s()("assets_moved_to_trash_count",{values:{count:_}}):s()("permanently_deleted_assets_count",{values:{count:_}});Ke.success(p)},ce=async(_,p,A)=>D(async()=>{await Le({assetBulkDeleteDto:{ids:A,force:!xe.value.trash}}),await Ae({assetBulkUpdateDto:{ids:p,duplicateId:null}}),pe(m,e(m).filter(S=>S.duplicateId!==_),!0),R(A.length),await Q(e(y))},A.length>0&&!xe.value.trash?s()("delete_duplicates_confirmation"):void 0,A.length>0&&!xe.value.trash?s()("permanently_delete"):void 0),W=async(_,p)=>{await Zt(p,!1);const A=p.map(S=>S.id);await Ae({assetBulkUpdateDto:{ids:A,duplicateId:null}}),pe(m,e(m).filter(S=>S.duplicateId!==_),!0),await Q(e(y))},X=async()=>{const _=e(m).map(T=>rt(T.assets)).map(T=>T?.id),p=e(m).flatMap((T,U)=>T.assets.map(F=>F.id).filter(F=>F!==_[U]));let A,S;return xe.value.trash?(A=s()("bulk_trash_duplicates_confirmation",{values:{count:p.length}}),S=s()("confirm")):(A=s()("bulk_delete_duplicates_confirmation",{values:{count:p.length}}),S=s()("permanently_delete")),D(async()=>{await Le({assetBulkDeleteDto:{ids:p,force:!xe.value.trash}}),await Ae({assetBulkUpdateDto:{ids:[...p,..._.filter(T=>!!T)],duplicateId:null}}),pe(m,[],!0),R(p.length),De.url.searchParams.delete("index"),await ze(Ce.duplicatesUtility())},A,S)},L=async()=>{const _=e(m).map(({duplicateId:p})=>p);return D(async()=>{await vt({bulkIdsDto:{ids:_}}),pe(m,[],!0),Ke.success(s()("resolved_all_duplicates")),De.url.searchParams.delete("index"),await ze(Ce.duplicatesUtility())},s()("bulk_keep_duplicates_confirmation",{values:{count:_.length}}),s()("confirm"))},se=()=>Q(0),re=()=>Q(Math.max(e(y)-1,0)),ve=async()=>{z()||await re()},G=async()=>Q(Math.min(e(y)+1,e(m).length-1)),me=async()=>{z()||await G()},fe=()=>Q(e(m).length-1),Q=async _=>ze(Ce.duplicatesUtility({index:k(_)}));et(Qe,(_,p)=>tt?.(_,p),()=>[{shortcut:{key:"ArrowLeft"},onShortcut:ve},{shortcut:{key:"ArrowRight"},onShortcut:me}]);{const _=A=>{Qt(A,{gap:0,children:(S,T)=>{var U=va(),F=te(U);{let l=n(()=>!e(C));ee(F,{get leadingIcon(){return je},onclick:()=>X(),get disabled(){return e(l)},size:"small",variant:"ghost",color:"secondary",children:(o,b)=>{Ve(o,{class:"hidden md:block",children:(w,Z)=>{N();var a=P();g(r=>v(a,r),[()=>s()("deduplicate_all")]),i(w,a)},$$slots:{default:!0}})},$$slots:{default:!0}})}var oe=h(F,2);{let l=n(()=>!e(C));ee(oe,{get leadingIcon(){return St},onclick:()=>L(),get disabled(){return e(l)},size:"small",variant:"ghost",color:"secondary",children:(o,b)=>{Ve(o,{class:"hidden md:block",children:(w,Z)=>{N();var a=P();g(r=>v(a,r),[()=>s()("keep_all")]),i(w,a)},$$slots:{default:!0}})},$$slots:{default:!0}})}var E=h(oe,2);{let l=n(()=>s()("show_keyboard_shortcuts")),o=n(()=>s()("show_keyboard_shortcuts"));Ee(E,{shape:"round",variant:"ghost",color:"secondary",get icon(){return At},get title(){return e(l)},onclick:()=>Be.show(Yt,{shortcuts:ie}),get"aria-label"(){return e(o)}})}i(S,U)},$$slots:{default:!0}})};let p=n(()=>t.data.meta.title+` (${e(m).length.toLocaleString(j())})`);Vt(B,{get title(){return e(p)},scrollbar:!0,buttons:_,children:(A,S)=>{var T=ha(),U=u(T);{var F=E=>{var l=fa(),o=te(l),b=u(o),w=u(b),Z=u(w,!0);c(w),c(b);var a=h(b,2);{let x=n(()=>s()("deduplication_info"));Ee(a,{shape:"round",variant:"ghost",color:"secondary",get icon(){return zt},get"aria-label"(){return e(x)},size:"small",onclick:()=>Be.show(ua)})}c(o);var r=h(o,2);Dt(r,()=>e(m)[e(y)].duplicateId,x=>{var d=ma(),I=te(d);da(I,{get assets(){return e(m)[e(y)].assets},onResolve:(H,ne)=>ce(e(m)[e(y)].duplicateId,H,ne),onStack:H=>W(e(m)[e(y)].duplicateId,H)});var O=h(I,2),V=u(O),f=u(V),$=u(f);{let H=n(()=>e(y)===0);ee($,{size:"small",get leadingIcon(){return Mt},color:"primary",class:"flex place-items-center rounded-s-full gap-2 px-2 sm:px-4",onclick:se,get disabled(){return e(H)},children:(ne,Se)=>{N();var Y=P();g(ge=>v(Y,ge),[()=>s()("first")]),i(ne,Y)},$$slots:{default:!0}})}var K=h($,2);{let H=n(()=>e(y)===0);ee(K,{size:"small",get leadingIcon(){return Tt},color:"primary",class:"flex place-items-center rounded-e-full gap-2 px-2 sm:px-4",onclick:re,get disabled(){return e(H)},children:(ne,Se)=>{N();var Y=P();g(ge=>v(Y,ge),[()=>s()("previous")]),i(ne,Y)},$$slots:{default:!0}})}c(f);var Pe=h(f,2),lt=u(Pe);c(Pe);var Fe=h(Pe,2),Re=u(Fe);{let H=n(()=>e(y)===e(m).length-1);ee(Re,{size:"small",get trailingIcon(){return Ot},color:"primary",class:"flex place-items-center rounded-s-full gap-2 px-2 sm:px-4",onclick:G,get disabled(){return e(H)},children:(ne,Se)=>{N();var Y=P();g(ge=>v(Y,ge),[()=>s()("next")]),i(ne,Y)},$$slots:{default:!0}})}var it=h(Re,2);{let H=n(()=>e(y)===e(m).length-1);ee(it,{size:"small",get trailingIcon(){return Bt},color:"primary",class:"flex place-items-center rounded-e-full gap-2 px-2 sm:px-4",onclick:fe,get disabled(){return e(H)},children:(ne,Se)=>{N();var Y=P();g(ge=>v(Y,ge),[()=>s()("last")]),i(ne,Y)},$$slots:{default:!0}})}c(Fe),c(V),c(O),g(H=>v(lt,`${e(y)+1} / ${H??""}`),[()=>e(m).length.toLocaleString(j())]),i(x,d)}),g(x=>v(Z,x),[()=>s()("duplicates_description")]),i(E,l)},oe=E=>{var l=ga(),o=u(l,!0);c(l),g(b=>v(o,b),[()=>s()("no_duplicates_found")]),i(E,l)};de(U,E=>{e(m)&&e(m).length>0?E(F):E(oe,!1)})}c(T),i(A,T)},$$slots:{buttons:!0,default:!0}})}$e(),ae()}export{Wa as component,Ha as universal};
