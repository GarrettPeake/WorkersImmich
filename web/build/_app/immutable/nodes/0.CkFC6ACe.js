import{g as ge,b as na,a as oa}from"../chunks/gvLJu3l0.js";import{s as Ue}from"../chunks/D1613R3V.js";import{m as Ge,b as la,c as pa}from"../chunks/169FoBhI.js";import{i as da}from"../chunks/CkVqZ3lj.js";import{c as ca,C as va}from"../chunks/CG2BHJh0.js";import"../chunks/DsnmJJEf.js";import{s as T,o as Qe,d as Fe,e as ma}from"../chunks/C8vxa4mj.js";import{p as ce,f as q,a as ve,c as i,n as ua,t as R,s as e,r as t,g as x,al as Pe,h as ke,j as te,u as K,i as ha,V as Ke,T as ga,aU as _a,$ as Ee,b as fa}from"../chunks/D0CSSuTl.js";import{c as J,a as l,t as Re,f as C}from"../chunks/Bd1JH_Ov.js";import{i as A}from"../chunks/D8NIUdeB.js";import{s as xa}from"../chunks/CMI33r64.js";import{h as ba}from"../chunks/DYQnFuij.js";import{a as wa}from"../chunks/IOA7-Wrn.js";import{I as Ce,w as ze,ac as Ie,F as ie,bP as ka,G as ya,s as n,ad as De,a as X,eN as Sa,eP as Aa,eQ as $a,c7 as Ca,cw as je,cX as Ta,aY as Ua,c6 as Ye,eR as Da,eM as Se,eS as Ma,es as Ra,r as za,eT as Ia,dU as Oa,cQ as La,ch as Ba,c_ as Pa,d0 as Ea}from"../chunks/D-UYCH9y.js";import{s as me,a as Q}from"../chunks/zonMEKN6.js";import{p as F}from"../chunks/CG4KAGH3.js";import{a as ja}from"../chunks/BVZhy_zG.js";import"../chunks/69_IOA4Y.js";import{e as Je,t as Te,T as Va}from"../chunks/DLePdI2u.js";import{i as Na}from"../chunks/9chJ2bcr.js";import{ar as Ae,v as Xe,l as Oe,w as Ve,ap as Ne,as as qa,at as Wa,au as Ha,c as Za}from"../chunks/DUXNbmIP.js";import{$ as fe}from"../chunks/DWQ0JXRY.js";import{H as Ga,d as Qa,e as $e}from"../chunks/Tw41aoDi.js";import{E as Fa}from"../chunks/Buft8H_q.js";import{O as Ka}from"../chunks/Cq6696VF.js";import{t as Ya}from"../chunks/BbpJDI0d.js";import{b as Ja}from"../chunks/DU5vAHPb.js";import{u as _e,f as Xa,b as qe}from"../chunks/WQ1yKytR.js";import{R as le}from"../chunks/gegweU97.js";import{U as se}from"../chunks/DnqqNi3p.js";import{e as et}from"../chunks/BpCm29KX.js";import{t as at}from"../chunks/BOeC8ZMP.js";import{M as tt,a as it,m as We}from"../chunks/BHTYC334.js";import{F as rt}from"../chunks/DS0yfrVF.js";import{B as st}from"../chunks/BlxJl2x7.js";import{s as He}from"../chunks/DT9-1pIm.js";import{u as nt}from"../chunks/CJGyQpNN.js";import{l as Ze}from"../chunks/DxRnQWdm.js";const ot=!1,lt=!0,pt=(async({fetch:W,url:r})=>{let a;try{await da(W),Ge(Ue.value.maintenanceMode,r)&&await ge(Ue.value.maintenanceMode?la(r):pa(r.searchParams))}catch(m){a=m}return ca.enable(),{error:a,meta:{title:"Immich"}}}),tr=Object.freeze(Object.defineProperty({__proto__:null,csr:lt,load:pt,ssr:ot},Symbol.toStringTag,{value:"Module"}));var dt=C('<p class="whitespace-nowrap"> </p>'),ct=C('<div class="mb-2 flex place-items-center"><div class="w-full pe-10"><div class="flex place-items-center justify-between gap-2 text-xs font-medium"><p class="truncate"> </p> <!></div> <div class="flex place-items-center gap-2"><div class="h-2.5 w-full rounded-full bg-neutral-200 dark:bg-neutral-600"><div class="h-2.5 rounded-full bg-primary"></div></div> <p class="min-w-16 whitespace-nowrap text-right"><span class="text-primary"> </span></p></div></div> <div class="absolute end-4"><!></div></div>'),vt=C('<div class="fixed bottom-10 start-2 max-h-67.5 w-79 z-60 rounded-2xl border dark:border-white/10 p-4 shadow-lg bg-subtle"><!> <div class="my-2 mb-2 flex max-h-50 flex-col overflow-y-auto text-sm"></div></div>');function mt(W,r){ce(r,!1);const a=()=>Q(fe,"$t",g),m=()=>Q(Oe,"$locale",g),[g,z]=me(),I=($,b)=>{b.abort?.abort(),Ae.clear($)};Na();var j=J(),V=q(j);{var S=$=>{var b=vt(),U=i(b);Ga(U,{size:"tiny",children:(D,N)=>{ua();var O=Re();R(H=>T(O,H),[()=>a()("downloading")]),l(D,O)},$$slots:{default:!0}});var B=e(U,2);Je(B,5,()=>Object.keys(Ae.assets),D=>D,(D,N)=>{const O=Pe(()=>Ae.assets[x(N)]);var H=ct(),v=i(H),_=i(v),w=i(_),L=i(w,!0);t(w);var M=e(w,2);{var o=y=>{var P=dt(),E=i(P,!0);t(P),R(Z=>T(E,Z),[()=>Xe(x(O).total,m())]),l(y,P)};A(M,y=>{x(O).total&&y(o)})}t(_);var d=e(_,2),h=i(d),f=i(h);t(h);var p=e(h,2),s=i(p),c=i(s,!0);t(s),t(p),t(d),t(v);var u=e(v,2),k=i(u);{let y=Pe(()=>a()("close"));Ce(k,{color:"secondary",variant:"outline",shape:"round",get"aria-label"(){return x(y)},onclick:()=>I(x(N),x(O)),size:"tiny",get icon(){return ze}})}t(u),t(H),R(y=>{T(L,x(N)),Ie(f,`width: ${x(O).percentage}%`),T(c,y)},[()=>(x(O).percentage/100).toLocaleString(m(),{style:"percent"})]),ie(3,H,()=>ka),l(D,H)}),t(B),t(b),ie(3,b,()=>ya,()=>({x:-100,duration:350})),l($,b)};A(V,$=>{Ae.isDownloading&&$(S)})}l(W,j),ve(),z()}const ut="/_app/immutable/assets/apple-splash-2048-2732.fwp6Mnv1.png",ht="/_app/immutable/assets/apple-splash-2732-2048.jOsVZbjH.png",gt="/_app/immutable/assets/apple-splash-1668-2388.CksGwLMT.png",_t="/_app/immutable/assets/apple-splash-2388-1668.D_LOzq4n.png",ft="/_app/immutable/assets/apple-splash-1536-2048.CrADJBaU.png",xt="/_app/immutable/assets/apple-splash-2048-1536.CWjKc89z.png",bt="/_app/immutable/assets/apple-splash-1668-2224.DOKa-KY3.png",wt="/_app/immutable/assets/apple-splash-2224-1668.BzXLZnrP.png",kt="/_app/immutable/assets/apple-splash-1620-2160.JH4Mgnb-.png",yt="/_app/immutable/assets/apple-splash-2160-1620.lYW7omrw.png",St="/_app/immutable/assets/apple-splash-1290-2796.Dl_iQwcQ.png",At="/_app/immutable/assets/apple-splash-2796-1290.BnQZ3ZCK.png",$t="/_app/immutable/assets/apple-splash-1179-2556.BsSwDIAl.png",Ct="/_app/immutable/assets/apple-splash-2556-1179.7vTA5SZb.png",Tt="/_app/immutable/assets/apple-splash-1284-2778.BFr0RH02.png",Ut="/_app/immutable/assets/apple-splash-2778-1284.BYczaWmT.png",Dt="/_app/immutable/assets/apple-splash-1170-2532.DFj8yr_L.png",Mt="/_app/immutable/assets/apple-splash-2532-1170.BNqP3wVp.png",Rt="/_app/immutable/assets/apple-splash-1125-2436.B794NZP4.png",zt="/_app/immutable/assets/apple-splash-2436-1125.DqWdbo6S.png",It="/_app/immutable/assets/apple-splash-1242-2688.CAABK-rM.png",Ot="/_app/immutable/assets/apple-splash-2688-1242.Dd466Tc7.png",Lt="/_app/immutable/assets/apple-splash-828-1792.DU0yixAw.png",Bt="/_app/immutable/assets/apple-splash-1792-828.C8I8cgbe.png",Pt="/_app/immutable/assets/apple-splash-1242-2208.CoTZo0Tn.png",Et="/_app/immutable/assets/apple-splash-2208-1242.HHGTmLaT.png",jt="/_app/immutable/assets/apple-splash-750-1334.BbUurNCS.png",Vt="/_app/immutable/assets/apple-splash-1334-750.DOUeOlsd.png",Nt="/_app/immutable/assets/apple-splash-640-1136.CKW01CIt.png",qt="/_app/immutable/assets/apple-splash-1136-640.CqrpG6nt.png";var Wt=C('<link rel="apple-touch-startup-image" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/> <link rel="apple-touch-startup-image" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/> <link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/> <link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/> <link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/> <link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/> <link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/> <link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/> <link rel="apple-touch-startup-image" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/> <link rel="apple-touch-startup-image" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/> <link rel="apple-touch-startup-image" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/> <link rel="apple-touch-startup-image" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/> <link rel="apple-touch-startup-image" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/> <link rel="apple-touch-startup-image" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/> <link rel="apple-touch-startup-image" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/> <link rel="apple-touch-startup-image" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/> <link rel="apple-touch-startup-image" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/> <link rel="apple-touch-startup-image" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/> <link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/> <link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/> <link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/> <link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/> <link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/> <link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/> <link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/> <link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/> <link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/> <link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/> <link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/> <link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/>',1);function Ht(W){var r=Wt(),a=q(r),m=e(a,2),g=e(m,2),z=e(g,2),I=e(z,2),j=e(I,2),V=e(j,2),S=e(V,2),$=e(S,2),b=e($,2),U=e(b,2),B=e(U,2),D=e(B,2),N=e(D,2),O=e(N,2),H=e(O,2),v=e(H,2),_=e(v,2),w=e(_,2),L=e(w,2),M=e(L,2),o=e(M,2),d=e(o,2),h=e(d,2),f=e(h,2),p=e(f,2),s=e(p,2),c=e(s,2),u=e(c,2),k=e(u,2);R(()=>{n(a,"href",ut),n(m,"href",ht),n(g,"href",gt),n(z,"href",_t),n(I,"href",ft),n(j,"href",xt),n(V,"href",bt),n(S,"href",wt),n($,"href",kt),n(b,"href",yt),n(U,"href",St),n(B,"href",At),n(D,"href",$t),n(N,"href",Ct),n(O,"href",Tt),n(H,"href",Ut),n(v,"href",Dt),n(_,"href",Mt),n(w,"href",Rt),n(L,"href",zt),n(M,"href",It),n(o,"href",Ot),n(d,"href",Lt),n(h,"href",Bt),n(f,"href",Pt),n(p,"href",Et),n(s,"href",jt),n(c,"href",Vt),n(u,"href",Nt),n(k,"href",qt)}),l(W,r)}var Zt=C('<div class="absolute start-0 top-0 h-[3px] w-dvw bg-white"><span class="absolute h-[3px] bg-immich-primary"></span></div>');function Gt(W,r){ce(r,!0);const a=()=>Q(j,"$progress",m),[m,g]=me();let z=ke(!1);const I=100,j=Ya(0,{duration:1e3,easing:Qa});function V(){te(z,!0),j.set(90)}Qe(()=>{const U=setTimeout(V,I);return()=>clearTimeout(U)});var S=J(),$=q(S);{var b=U=>{var B=Zt(),D=i(B);let N;t(B),R(()=>N=Ie(D,"",N,{width:`${a()}%`})),l(U,B)};A($,U=>{x(z)&&U(b)})}l(W,S),ve(),g()}var Qt=C('<div class="flex items-center justify-between gap-1"><a target="_blank" rel="noopener noreferrer" aria-hidden="true"><!></a> <button type="button" aria-hidden="true"><!></button></div>'),Ft=C('<div class="flex items-center justify-between gap-1"><button type="button" aria-hidden="true"><!></button> <button type="button" aria-hidden="true"><!></button></div>'),Kt=C('<div class="text-black relative mt-[5px] h-4.5 w-full rounded-md bg-gray-300 dark:bg-gray-700"><div class="h-4.5 rounded-md bg-immich-primary transition-all"></div> <p class="absolute top-0.5 h-full w-full text-center text-white text-[10px]"><!></p></div>'),Yt=C('<div class="flex flex-row justify-between"><p class="w-full rounded-md text-justify text-danger"> </p></div>'),Jt=C('<div class="flex flex-col rounded-xl text-xs p-2 gap-1 border border-gray-300 dark:border-subtle bg-primary/10"><div class="flex items-center gap-2"><div class="flex items-center justify-center"><!></div> <span class="grow break-all"> </span> <!></div> <!> <!></div>');function Xt(W,r){ce(r,!0);const a=()=>Q(fe,"$t",g),m=()=>Q(Oe,"$locale",g),[g,z]=me(),I=o=>{_e.removeItem(o.id)},j=async o=>{_e.removeItem(o.id),await Xa({files:[o.file],albumId:o.albumId})};var V=Jt(),S=i(V),$=i(S),b=i($);{var U=o=>{{let d=K(()=>a()("pending"));X(o,{get icon(){return Sa},size:"24",class:"text-primary",get title(){return x(d)}})}},B=o=>{var d=J(),h=q(d);{var f=s=>{{let c=K(()=>a()("asset_skipped"));X(s,{get icon(){return $a},size:"24",spin:!0,class:"text-primary",get title(){return x(c)}})}},p=s=>{var c=J(),u=q(c);{var k=P=>{{let E=K(()=>a()("error"));X(P,{get icon(){return je},size:"24",class:"text-danger",get title(){return x(E)}})}},y=P=>{var E=J(),Z=q(E);{var ee=ae=>{var ne=J(),ue=q(ne);{var xe=Y=>{{let he=K(()=>a()("asset_skipped_in_trash"));X(Y,{get icon(){return Ta},size:"24",class:"text-gray-500",get title(){return x(he)}})}},oe=Y=>{{let he=K(()=>a()("asset_skipped"));X(Y,{get icon(){return je},size:"24",class:"text-warning",get title(){return x(he)}})}};A(ue,Y=>{r.uploadAsset.isTrashed?Y(xe):Y(oe,!1)})}l(ae,ne)},pe=ae=>{var ne=J(),ue=q(ne);{var xe=oe=>{{let Y=K(()=>a()("asset_uploaded"));X(oe,{get icon(){return Ua},size:"24",class:"text-success",get title(){return x(Y)}})}};A(ue,oe=>{r.uploadAsset.state===se.DONE&&oe(xe)},!0)}l(ae,ne)};A(Z,ae=>{r.uploadAsset.state===se.DUPLICATED?ae(ee):ae(pe,!1)},!0)}l(P,E)};A(u,P=>{r.uploadAsset.state===se.ERROR?P(k):P(y,!1)},!0)}l(s,c)};A(h,s=>{r.uploadAsset.state===se.STARTED?s(f):s(p,!1)},!0)}l(o,d)};A(b,o=>{r.uploadAsset.state===se.PENDING?o(U):o(B,!1)})}t($);var D=e($,2),N=i(D,!0);t(D);var O=e(D,2);{var H=o=>{var d=Qt(),h=i(d);n(h,"tabindex",-1);var f=i(h);X(f,{get icon(){return Aa},size:"20"}),t(h);var p=e(h,2);p.__click=()=>I(r.uploadAsset),n(p,"tabindex",-1);var s=i(p);X(s,{get icon(){return ze},size:"20"}),t(p),t(d),R(c=>n(h,"href",c),[()=>r.uploadAsset.isTrashed?le.viewTrashedAsset({id:r.uploadAsset.assetId}):le.viewAsset({id:r.uploadAsset.assetId})]),l(o,d)},v=o=>{var d=J(),h=q(d);{var f=p=>{var s=Ft(),c=i(s);c.__click=()=>j(r.uploadAsset),n(c,"tabindex",-1);var u=i(c);X(u,{get icon(){return Ca},size:"20"}),t(c);var k=e(c,2);k.__click=()=>I(r.uploadAsset),n(k,"tabindex",-1);var y=i(k);X(y,{get icon(){return ze},size:"20"}),t(k),t(s),l(p,s)};A(h,p=>{r.uploadAsset.state===se.ERROR&&p(f)},!0)}l(o,d)};A(O,o=>{r.uploadAsset.state===se.DUPLICATED&&r.uploadAsset.assetId?o(H):o(v,!1)})}t(S);var _=e(S,2);{var w=o=>{var d=Kt(),h=i(d),f=e(h,2),p=i(f);{var s=u=>{var k=Re();R(()=>T(k,r.uploadAsset.message)),l(u,k)},c=u=>{var k=Re();R(y=>T(k,`${r.uploadAsset.message??""}
          ${r.uploadAsset.progress??""}% - ${y??""}/s - ${r.uploadAsset.eta??""}s`),[()=>Xe(r.uploadAsset.speed||0,m())]),l(u,k)};A(p,u=>{r.uploadAsset.message===a()("asset_hashing")?u(s):u(c,!1)})}t(f),t(d),R(()=>Ie(h,`width: ${r.uploadAsset.progress}%`)),l(o,d)};A(_,o=>{r.uploadAsset.state===se.STARTED&&o(w)})}var L=e(_,2);{var M=o=>{var d=Yt(),h=i(d),f=i(h,!0);t(h),t(d),R(()=>T(f,r.uploadAsset.error)),l(o,d)};A(L,o=>{r.uploadAsset.state===se.ERROR&&o(M)})}t(V),R(()=>T(N,r.uploadAsset.file.name)),ie(1,V,()=>De,()=>({duration:250})),ie(2,V,()=>De,()=>({duration:100})),l(W,V),ve(),z()}Fe(["click"]);var ei=C('<div class="immich-scrollbar mb-4 max-h-100 overflow-y-auto rounded-lg"><div class="flex h-6.5 place-items-center gap-1"><label class="immich-form-label" for="upload-concurrency"> </label></div> <input class="immich-form-input w-full" id="upload-concurrency" type="number" min="1" max="50" step="1"/></div>'),ai=C('<div class="w-81 rounded-xl border border-gray-200 dark:border-subtle p-4 text-sm shadow-xs bg-subtle"><div class="place-item-center mb-4 flex justify-between"><div class="flex flex-col gap-1"><p class="immich-form-label text-xm"> </p> <p class="immich-form-label text-xs"> <span class="text-success"> </span> <span class="text-danger"> </span> <span class="text-warning"> </span></p></div> <div class="flex flex-col items-end"><div class="flex flex-row"><!> <!></div> <!></div></div> <!> <div class="immich-scrollbar flex max-h-[400px] flex-col gap-2 overflow-y-auto rounded-lg"></div></div>'),ti=C('<button type="button" class="absolute -end-4 -top-4 flex h-10 w-10 place-content-center place-items-center rounded-full bg-danger p-5 text-xs text-light"> </button>'),ii=C('<div class="rounded-full"><button type="button" class="absolute -start-4 -top-4 flex h-10 w-10 place-content-center place-items-center rounded-full bg-primary p-5 text-xs text-light"> </button> <!> <button type="button" class="flex h-16 w-16 place-content-center place-items-center rounded-full bg-subtle p-5 text-sm text-primary shadow-lg"><div class="animate-pulse"><!></div></button></div>'),ri=C('<div class="fixed bottom-6 end-16"><!></div>');function si(W,r){ce(r,!0);const a=()=>Q(O,"$isUploading",S),m=()=>Q(D,"$stats",S),g=()=>Q(fe,"$t",S),z=()=>Q(H,"$remainingUploads",S),I=()=>Q(Oe,"$locale",S),j=()=>Q(N,"$isDismissible",S),V=()=>Q(_e,"$uploadAssetsStore",S),[S,$]=me();let b=ke(!1),U=ke(!1),B=ke(ha(qe.concurrency)),{stats:D,isDismissible:N,isUploading:O,remainingUploads:H}=_e;Ke(()=>{a()&&te(b,!0)});var v=J(),_=q(v);{var w=L=>{var M=ri(),o=i(M);{var d=f=>{var p=ai(),s=i(p),c=i(s),u=i(c),k=i(u,!0);t(u);var y=e(u,2),P=i(y),E=e(P),Z=i(E,!0);t(E);var ee=e(E),pe=e(ee),ae=i(pe,!0);t(pe);var ne=e(pe),ue=e(ne),xe=i(ue,!0);t(ue),t(y),t(c);var oe=e(c,2),Y=i(oe),he=i(Y);{let G=K(()=>g()("toggle_settings"));Ce(he,{variant:"ghost",shape:"round",color:"secondary",get icon(){return Ye},size:"small",onclick:()=>te(U,!x(U)),get"aria-label"(){return x(G)}})}var ea=e(he,2);{let G=K(()=>g()("minimize"));Ce(ea,{variant:"ghost",shape:"round",color:"secondary",get"aria-label"(){return x(G)},get icon(){return Da},size:"small",onclick:()=>te(b,!1)})}t(Y);var aa=e(Y,2);{var ta=G=>{{let re=K(()=>g()("dismiss_all_errors"));Ce(G,{variant:"ghost",shape:"round",color:"secondary",get"aria-label"(){return x(re)},get icon(){return Ra},size:"small",onclick:()=>_e.dismissErrors()})}};A(aa,G=>{j()&&G(ta)})}t(oe),t(s);var Le=e(s,2);{var ia=G=>{var re=ei(),be=i(re),ye=i(be),Me=i(ye,!0);t(ye),t(be);var de=e(be,2);za(de),de.__change=()=>qe.concurrency=x(B),t(re),R((we,ra,sa)=>{T(Me,we),n(de,"aria-labelledby",ra),n(de,"name",sa)},[()=>g()("upload_concurrency"),()=>g()("upload_concurrency"),()=>g()("upload_concurrency")]),Ja(de,()=>x(B),we=>te(B,we)),l(G,re)};A(Le,G=>{x(U)&&G(ia)})}var Be=e(Le,2);Je(Be,5,V,G=>G.id,(G,re)=>{Xt(G,{get uploadAsset(){return x(re)}})}),t(Be),t(p),R((G,re,be,ye,Me,de,we)=>{T(k,G),T(P,`${re??""} `),T(Z,be),T(ee,` -
              ${ye??""} `),T(ae,Me),T(ne,` -
              ${de??""} `),T(xe,we)},[()=>g()("upload_progress",{values:{remaining:z(),processed:m().total-z(),total:m().total}}),()=>g()("upload_status_uploaded"),()=>m().success.toLocaleString(I()),()=>g()("upload_status_errors"),()=>m().errors.toLocaleString(I()),()=>g()("upload_status_duplicates"),()=>m().duplicates.toLocaleString(I())]),ie(1,p,()=>Se,()=>({duration:250,easing:$e})),l(f,p)},h=f=>{var p=ii(),s=i(p);s.__click=()=>te(b,!0);var c=i(s,!0);t(s);var u=e(s,2);{var k=Z=>{var ee=ti();ee.__click=()=>te(b,!0);var pe=i(ee,!0);t(ee),R(ae=>T(pe,ae),[()=>m().errors.toLocaleString(I())]),ie(1,ee,()=>Se,()=>({duration:250,easing:$e})),l(Z,ee)};A(u,Z=>{m().errors>0&&Z(k)})}var y=e(u,2);y.__click=()=>te(b,!0);var P=i(y),E=i(P);X(E,{get icon(){return Ma},size:"30"}),t(P),t(y),t(p),R(Z=>T(c,Z),[()=>z().toLocaleString(I())]),ie(1,s,()=>Se,()=>({duration:250,easing:$e})),ie(1,y,()=>Se,()=>({duration:250,easing:$e})),l(f,p)};A(o,f=>{x(b)?f(d):f(h,!1)})}t(M),ma("outroend",M,()=>{m().errors>0?Te.danger(g()("upload_errors",{values:{count:m().errors}})):m().success>0&&Te.success(g()("upload_success")),m().duplicates>0&&Te.warning(g()("upload_skipped_duplicates",{values:{count:m().duplicates}})),_e.reset()}),ie(1,M,()=>De,()=>({duration:250})),ie(2,M,()=>De,()=>({duration:250})),l(L,M)};A(_,L=>{a()&&L(w)})}l(W,v),ve(),$()}Fe(["change","click"]);var ni=C('<div class="font-medium"> </div>');function oi(W,r){ce(r,!0);const a=()=>Q(fe,"$t",m),[m,g]=me();{let z=K(()=>a()("server_restarting_title"));tt(W,{size:"small",get title(){return x(z)},get onClose(){return r.onClose},icon:!1,children:(I,j)=>{it(I,{children:(V,S)=>{var $=ni(),b=i($,!0);t($),R(U=>T(b,U),[()=>a()("server_restarting_description")]),l(V,$)},$$slots:{default:!0}})},$$slots:{default:!0}})}ve(),g()}var li=C('<span class="font-medium underline"><a href="https://github.com/immich-app/immich/releases/latest" target="_blank" rel="noopener noreferrer"> </a></span>'),pi=C("<code> </code>"),di=C('<!> <div class="mt-4 font-medium"> </div> <div class="font-sm mt-8"><code> </code> <br/> <code> </code></div>',1);function ci(W,r){ce(r,!0);const a=()=>Q(fe,"$t",m),[m,g]=me();{let z=K(()=>a()("new_version_available")),I=K(()=>a()("acknowledge"));st(W,{size:"small",get title(){return`ðŸŽ‰ ${x(z)??""}`},get closeText(){return x(I)},closeColor:"primary",get onClose(){return r.onClose},icon:!1,children:(j,V)=>{var S=di(),$=q(S);rt($,{key:"version_announcement_message",children:(_,w)=>{let L=()=>w?.().tag,M=()=>w?.().message;var o=J(),d=q(o);{var h=p=>{var s=li(),c=i(s),u=i(c,!0);t(c),t(s),R(()=>T(u,M())),l(p,s)},f=p=>{var s=J(),c=q(s);{var u=k=>{var y=pi(),P=i(y,!0);t(y),R(()=>T(P,M())),l(k,y)};A(c,k=>{L()==="code"&&k(u)},!0)}l(p,s)};A(d,p=>{L()==="link"?p(h):p(f,!1)})}l(_,o)},$$slots:{default:!0}});var b=e($,2),U=i(b,!0);t(b);var B=e(b,2),D=i(B),N=i(D);t(D);var O=e(D,4),H=i(O);t(O),t(B),R((v,_,w)=>{T(U,v),T(N,`${_??""}: ${r.serverVersion??""}`),T(H,`${w??""}: ${r.releaseVersion??""}`)},[()=>a()("version_announcement_closing"),()=>a()("server_version"),()=>a()("latest_version")]),l(j,S)},$$slots:{default:!0}})}ve(),g()}var vi=C('<meta property="og:image"/>'),mi=C('<meta name="twitter:image"/>'),ui=C('<meta name="description"/> <meta property="og:type" content="website"/> <meta property="og:title"/> <meta property="og:description"/> <!> <meta name="twitter:card" content="summary_large_image"/> <meta name="twitter:title"/> <meta name="twitter:description"/> <!>',1),hi=C('<link rel="manifest" href="/manifest.json" crossorigin="use-credentials"/> <meta name="theme-color" content="currentColor"/> <!> <!>',1),gi=C("<!> <!> <!> <!>",1),_i=C("<!> <!>  <!>",1);function ir(W,r){ce(r,!0);const a=()=>Q(fe,"$t",z),m=()=>Q(nt,"$user",z),g=()=>Q(S,"$serverRestarting",z),[z,I]=me();Ke(()=>{Ia({close:a()("close"),show_password:a()("show_password"),hide_password:a()("hide_password"),confirm:a()("confirm"),cancel:a()("cancel"),toast_success_title:a()("success"),toast_info_title:a()("info"),toast_warning_title:a()("warning"),toast_danger_title:a()("error"),navigate_next:a()("next"),navigate_previous:a()("previous")})});let j=ke(!1);const V=()=>new URL(F.url.pathname+F.url.search,"https://my.immich.app");Te.setOptions({class:"top-16"}),Qe(()=>{document.querySelector("#stencil")?.remove()}),et.emit("AppInit"),na(({from:v,to:_})=>{He.isOpen&&He.reset(),!(Ze(v)&&Ze(_))&&te(j,!0)}),oa(()=>{te(j,!1)});const{serverRestarting:S}=Ve;ga(()=>{m()||g()||F.url.pathname.startsWith(le.maintenanceMode())?Wa():Ha()});const $=async v=>{if(!v.isAvailable||!m().isAdmin)return;const _=Ne(v.releaseVersion),w=Ne(v.serverVersion),L=qa(v.serverVersion,v.releaseVersion);if(!(L==="none"||L==="patch"||localStorage.getItem("appVersion")===_))try{await We.show(ci,{serverVersion:w,releaseVersion:_}),localStorage.setItem("appVersion",_)}catch(M){console.error("Error [VersionAnnouncementBox]:",M)}};S.subscribe(v=>{if(v&&Ge(v.isMaintenanceMode,location)){We.show(oi,{}).catch(w=>console.error("Error [ServerRestartBox]:",w));let _=!1;Ve.connected.subscribe(w=>{w?w&&_&&location.reload():_=!0})}});const b=[{title:a()("theme"),description:a()("toggle_theme_description"),type:a()("command"),icon:Oa,onAction:()=>at.toggleTheme(),shortcuts:{shift:!0,key:"t"}}],U=[{title:a()("users"),description:a()("admin.users_page_description"),icon:La,onAction:()=>ge(le.users())},{title:a()("settings"),description:a()("admin.settings_page_description"),icon:Ye,onAction:()=>ge(le.systemSettings())},{title:a()("admin.queues"),description:a()("admin.queues_page_description"),icon:Ba,type:a()("page"),onAction:()=>ge(le.queues())},{title:a()("external_libraries"),description:a()("admin.external_libraries_page_description"),icon:Pa,onAction:()=>ge(le.libraries())},{title:a()("server_stats"),description:a()("admin.server_stats_page_description"),icon:Ea,onAction:()=>ge(le.systemStatistics())}].map(v=>({...v,type:a()("page"),$if:()=>m()?.isAdmin})),B=K(()=>[...b,...U]);var D=_i();ba("12qhfyh",v=>{var _=hi(),w=e(q(_),4);Ht(w);var L=e(w,2);{var M=o=>{var d=ui(),h=q(d),f=e(h,4),p=e(f,2),s=e(p,2);{var c=E=>{var Z=vi();R(()=>n(Z,"content",new URL(F.data.meta.imageUrl,Ue.value.externalDomain||globalThis.location.origin).href)),l(E,Z)};A(s,E=>{F.data.meta.imageUrl&&E(c)})}var u=e(s,4),k=e(u,2),y=e(k,2);{var P=E=>{var Z=mi();R(()=>n(Z,"content",new URL(F.data.meta.imageUrl,Ue.value.externalDomain||globalThis.location.origin).href)),l(E,Z)};A(y,E=>{F.data.meta.imageUrl&&E(P)})}R(()=>{n(h,"content",F.data.meta.description),n(f,"content",F.data.meta.title),n(p,"content",F.data.meta.description),n(u,"content",F.data.meta.title),n(k,"content",F.data.meta.description)}),l(o,d)};A(L,o=>{F.data.meta&&o(M)})}_a(()=>{Ee.title=`${(F.data.meta?.title||"Web")??""} - Immich`}),l(v,_)}),wa(Ee,(v,_)=>ja?.(v,_),()=>({shortcut:{ctrl:!0,shift:!0,key:"m"},onShortcut:()=>Za(V().toString())}));var N=q(D);Ka(N,{onReleaseEvent:$});var O=e(N,2);va(O,{name:"Global",get actions(){return x(B)}});var H=e(O,2);Va(H,{children:(v,_)=>{var w=gi(),L=q(w);{var M=s=>{Fa(s,{get error(){return F.data.error}})},o=s=>{var c=J(),u=q(c);xa(u,()=>r.children??fa),l(s,c)};A(L,s=>{F.data.error?s(M):s(o,!1)})}var d=e(L,2);{var h=s=>{Gt(s,{})};A(d,s=>{x(j)&&s(h)})}var f=e(d,2);mt(f,{});var p=e(f,2);si(p,{}),l(v,w)}}),l(W,D),ve(),I()}export{ir as component,tr as universal};
