import{a as ar,D as or,p as sr}from"../chunks/CJGyQpNN.js";import{g as ir,$ as nr}from"../chunks/DWQ0JXRY.js";import"../chunks/DsnmJJEf.js";import"../chunks/69_IOA4Y.js";import{p as Xe,g as e,f as N,s as d,a as Ke,h as L,j as $,u as b,t as V,c as i,r as n,i as lr,V as ct,$ as dr}from"../chunks/D0CSSuTl.js";import{o as bt,d as cr,s as re}from"../chunks/C8vxa4mj.js";import{a as p,c as Te,f,t as vr}from"../chunks/Bd1JH_Ov.js";import{a as ur}from"../chunks/Biw8UfMB.js";import{i as k}from"../chunks/D8NIUdeB.js";import{s as M,v as mr,F as wt,ad as xt,I as K,a7 as pr,ag as fr,ah as vt,ac as _r,bp as gr,bo as hr,d5 as yr,di as br,dj as wr,c1 as xr,q as Ae,a0 as $r,dk as Ar,dl as Mr,ai as kr,az as Pr,dm as Vr,cK as Ir,bR as Sr}from"../chunks/D-UYCH9y.js";import{e as Cr,t as ut}from"../chunks/DLePdI2u.js";import{a as qe}from"../chunks/IOA7-Wrn.js";import{b as Dr}from"../chunks/Dgf_MdoC.js";import{s as Ye,c as ze,a as Y,p as Lr,d as Or}from"../chunks/zonMEKN6.js";import{a as Tr,g as Le}from"../chunks/gvLJu3l0.js";import{p as Me}from"../chunks/CG4KAGH3.js";import{r as zr}from"../chunks/CrEwRPGF.js";import{s as Fr}from"../chunks/BVZhy_zG.js";import{h as $t,Q as mt}from"../chunks/0qPXRVhz.js";import{y as Fe,a7 as jr,ag as Er,h as H,ah as pt,e as Br,l as Nr,ai as Ur,ab as Hr}from"../chunks/DUXNbmIP.js";import{g as Rr,b as Gr,t as Qr}from"../chunks/CF_nq223.js";import{F as je,Q as qr,h as Wr}from"../chunks/BP6NvnZ7.js";import{B as We}from"../chunks/GXf5CvES.js";import{M as ft}from"../chunks/B2VKg7zy.js";import{C as Xr}from"../chunks/D-550RMt.js";import{G as Kr}from"../chunks/B6eBVnDA.js";import{C as Yr,A as _t}from"../chunks/BLnXPQ5q.js";import{F as Jr,A as Zr}from"../chunks/CQ8X2sVV.js";import{C as ea,a as ta}from"../chunks/DmzJz26a.js";import{C as ra,T as aa}from"../chunks/Buf2v_0r.js";import{D as oa}from"../chunks/DpocfqHG.js";import{D as sa}from"../chunks/vBkll8cH.js";import{A as ia}from"../chunks/CfdSAoAU.js";import{a as na}from"../chunks/DxRnQWdm.js";import{R as Oe}from"../chunks/gegweU97.js";import{A as la}from"../chunks/MMtgDOP-.js";import{a as da}from"../chunks/Cr9S0fVn.js";import{m as me}from"../chunks/DfiAe9j-.js";import{T as gt}from"../chunks/BbpJDI0d.js";const ca=(async({url:c})=>{const l=await ar(c),w=await ir();return{user:l,meta:{title:w("memory")}}}),Io=Object.freeze(Object.defineProperty({__proto__:null,load:ca},Symbol.toStringTag,{value:"Module"}));function va(c,l){return c?.bottom===l?.bottom&&c?.top===l?.top&&c?.left===l?.left&&c?.right==l?.right&&c?.threshold===l?.threshold&&c?.root===l?.root}const ae=new Map,ua=(c,l,w)=>{if(!l.isConnected){ae.get(c)?.observer?.unobserve(l);return}const{root:_,threshold:s,top:I="0px",right:O="0px",bottom:C="0px",left:R="0px",onSeparate:D,onIntersect:U}=w,T=`${I} ${O} ${C} ${R}`,S=new IntersectionObserver(A=>{A.sort((oe,x)=>oe.time-x.time);const G=A.pop();G?.isIntersecting?U?.(G):D?.(l)},{rootMargin:T,threshold:s,root:_});S.observe(l),ae.set(c,{...w,observer:S})};function ht(c,l,w){if(w.disabled){const _=ae.get(c),{observer:s}=_||{};s?.unobserve(l),ae.delete(c)}else ae.set(c,w),ua(c,l,w)}function yt(c,l,w){return ht(c,l,w),{update(_){const s=ae.get(c);s&&(va(s,_)||ht(c,l,_))},destroy:()=>{const _=ae.get(c),{observer:s}=_||{};s?.unobserve(l),ae.delete(c)}}}function ma(c,l){if(Array.isArray(l)){if(!l.every(_=>_.key))throw new Error("Multiple configurations must specify key");const w=l.map(_=>yt(_.key,c,_));return{update:_=>{for(const[s,I]of _.entries())w[s].update(I)},destroy:()=>{for(const _ of w)_.destroy()}}}return yt(l.key||c,c,l)}var pa=f('<img style="display:none" aria-hidden="true"/>'),fa=f('<div id="spinner" class="flex h-full items-center justify-center svelte-mlc33t"><!></div>'),_a=f('<div class="h-full w-full"><img class="h-full w-full rounded-2xl object-contain transition-all" draggable="false"/></div>'),ga=f("<!> <!>",1);function ha(c,l){Xe(l,!0);const w=()=>Y(Rr,"$getAltText",_),[_,s]=Ye();let I=L(""),O=L(!1),C=L(void 0);const R=()=>{$(O,!0),$(I,e(D),!0),l.onImageLoad()};bt(()=>(e(C)?.complete&&R(),e(C)?.addEventListener("load",R),()=>{e(C)?.removeEventListener("load",R)}));const D=b(()=>Fe({id:l.asset.id,size:je.Preview}));var U=ga(),T=N(U);{var S=x=>{var t=pa();ze(t,se=>$(C,se),()=>e(C)),V(()=>M(t,"src",e(D))),p(x,t)};k(T,x=>{e(O)||x(S)})}var A=d(T,2);{var G=x=>{var t=fa(),se=i(t);mr(se,{}),n(t),p(x,t)},oe=x=>{var t=Te(),se=N(t);{var ke=pe=>{var ie=_a(),Pe=i(ie);n(ie),V(fe=>{M(Pe,"src",e(I)),M(Pe,"alt",fe)},[()=>w()(l.asset)]),wt(3,ie,()=>xt,()=>({duration:$t})),p(pe,ie)};k(se,pe=>{e(O)&&pe(ke)},!0)}p(x,t)};k(A,x=>{e(O)?x(oe,!1):x(G)})}p(c,U),Ke(),s()}var ya=f('<div class="h-full w-full bg-pink-9000"><video playsinline="" class="h-full w-full rounded-2xl object-contain transition-all" draggable="false"></video></div>',2);function ba(c,l){Xe(l,!0);const w=()=>Y(Er,"$autoPlayVideo",_),[_,s]=Ye();let I=Lr(l,"videoPlayer",15),O=L(!1);bt(()=>{$(O,!0)});var C=Te(),R=N(C);{var D=U=>{var T=ya(),S=i(T);ze(S,A=>I(A),()=>I()),n(T),V((A,G)=>{S.autoplay=w(),M(S,"src",A),M(S,"poster",G),S.muted=l.videoViewerMuted,S.volume=l.videoViewerVolume},[()=>jr({id:l.asset.id}),()=>Fe({id:l.asset.id,size:je.Preview})]),wt(3,T,()=>xt,()=>({duration:$t})),p(U,T)};k(R,U=>{e(O)&&U(D)})}p(c,C),Ke(),s()}var wa=f("<!> <!>",1),xa=f("<!> <!> <!> <!> <!> <!> <!>",1),$a=f("<!> <!> <!> <!> <!>",1),Aa=f('<div class="sticky top-0 z-1 dark"><!></div>'),Ma=f('<p class="text-lg"> </p>'),ka=f('<a class="relative w-full py-2"><span class="absolute start-0 h-0.5 w-full bg-gray-500"></span> <span class="absolute start-0 h-0.5 bg-white"></span></a>'),Pa=f('<div class="w-12.5 dark"><!></div>'),Va=f('<div class="flex place-content-center place-items-center gap-2 overflow-hidden"><div class="w-12.5 dark"><!></div> <!> <div><p class="text-small"> </p></div> <!></div>'),Ia=f('<div><button type="button"><!></button></div>'),Sa=f('<img class="h-full w-full rounded-2xl object-cover" draggable="false"/>'),Ca=f('<picture><source sizes="min(271px,186px)" type="image/avif"/><source sizes="min(271px,186px)" type="image/webp"/><img class="h-full w-full rounded-2xl object-cover" draggable="false" width="271" height="186"/></picture>'),Da=f('<div class="absolute bottom-4 end-4 text-start text-white"><p class="uppercase text-xs font-semibold text-gray-200"> </p> <p class="text-xl"> </p></div>'),La=f("<!> <!>",1),Oa=f('<div class="absolute top-1/2 start-0 ms-4 dark"><!></div>'),Ta=f('<div class="absolute top-1/2 end-0 me-4 dark"><!></div>'),za=f('<img class="h-full w-full rounded-2xl object-cover" draggable="false"/>'),Fa=f('<picture><source sizes="min(271px,186px)" type="image/avif"/><source sizes="min(271px,186px)" type="image/webp"/><img class="h-full w-full rounded-2xl object-cover" draggable="false" width="271" height="186"/></picture>'),ja=f('<div class="absolute bottom-4 start-4 text-start text-white"><p class="uppercase text-xs font-semibold text-gray-200"> </p> <p class="text-xl"> </p></div>'),Ea=f('<!> <!> <section class="overflow-hidden pt-32 md:pt-20"><div class="ms-[-100%] box-border flex h-[calc(100vh-224px)] md:h-[calc(100vh-180px)] w-[300%] items-center justify-center gap-10 overflow-hidden"><div><button type="button" class="relative h-full w-full rounded-2xl"><!> <!></button></div> <div class="main-view relative flex h-full w-[70vw] place-content-center place-items-center rounded-2xl bg-black svelte-lyjzxy"><div class="relative h-full w-full rounded-2xl bg-black"><!> <div><div class="flex items-center"><!> <!></div> <div><!></div></div> <!> <!> <div class="absolute start-8 top-4 text-sm font-medium text-white"><p> </p> <p><!></p></div></div></div> <div><button type="button" class="relative h-full w-full rounded-2xl"><!> <!></button></div></div></section>',1),Ba=f('<section class="bg-immich-dark-gray p-4"><div><!></div> <div id="gallery-memory"><!></div></section>'),Na=f('<!> <section id="memory-viewer" class="w-full bg-immich-dark-gray"><!></section> <!>',1);function Ua(c,l){Xe(l,!0);const w=()=>Y(Pe,"$isViewing",D),_=()=>Y(sr,"$preferences",D),s=()=>Y(nr,"$t",D),I=()=>Y(pt,"$videoViewerMuted",D),O=()=>Y(Hr,"$memoryLaneTitle",D),C=()=>Y(Nr,"$locale",D),R=()=>Y(Ur,"$videoViewerVolume",D),[D,U]=Ye();let T=L(void 0),S=L(void 0),A=L(!1),G=L(!0),oe=L(!1),x=L(!1),t=L(void 0),se=b(async()=>e(t)?.asset?await Wr({...na.params,id:e(t).asset.id}):void 0),ke=b(()=>e(t)?.memory.assets||[]),pe=b(()=>e(t)?.memory.isSaved),ie=L(0);const{isViewing:Pe}=da,fe=lr({width:0,height:0}),At=b(()=>({height:fe.height,width:fe.width-32})),J=new la;let z=L(void 0),Z=L(void 0);const Je=r=>`?${mt.ID}=${r.id}`,Ve=async r=>{if(w())return r;r&&await Le(Je(r))},Mt=r=>{if(r.isVideo){const m=r.duration.split(":").map(Number),y=(m[0]*3600+m[1]*60+m[2])*1e3;$(z,new gt(0,{duration:(Q,ne)=>ne?y*(ne-Q):0}),!0)}else $(z,new gt(0,{duration:(m,y)=>y?_().memories.duration*1e3*(y-m):0}),!0)},Ie=()=>Ve(e(t)?.next?.asset),Ee=()=>Ve(e(t)?.previous?.asset),kt=()=>Ve(e(t)?.nextMemory?.assets[0]),Pt=()=>Ve(e(t)?.previousMemory?.assets[0]),Vt=async()=>Le(Oe.photos()),It=()=>J.selectAssets(e(t)?.memory.assets.map(r=>Qr(r))||[]),ee=async(r,m)=>{if(e(z))switch(m){case"play":{try{$(x,!1),await e(Z)?.play(),await e(z).set(1)}catch(y){console.error(`handleAction[${r}] videoPlayer play problem: ${y}`),$(x,!0),await e(z).set(0)}break}case"pause":{$(x,!0),e(Z)?.pause(),await e(z).set(e(z).current);break}case"reset":{$(x,!1),e(Z)?.pause(),await e(z).set(0);break}}},St=async r=>{e(z)&&r===1&&!e(x)&&await(e(t)?.next?Ie():H(ee("handleProgressLast","pause")))},Ct=r=>!e(z)||e(t)?.assetIndex===void 0?0:r<e(t)?.assetIndex?100:r>e(t)?.assetIndex?0:e(z).current*100,Ze=r=>{e(t)&&(me.hideAssetsFromMemory(r),ge(Me))},Dt=async()=>{e(t)&&(await me.deleteAssetFromMemory(e(t).asset.id),ge(Me))},Lt=async()=>{e(t)&&(await me.deleteMemory(e(t).memory.id),ut.success(s()("removed_memory")),ge(Me))},Ot=async()=>{if(!e(t))return;const r=!e(t).memory.isSaved;await me.updateMemorySaved(e(t).memory.id,r),ut.success(r?s()("added_to_favorites"):s()("removed_from_favorites")),ge(Me)},Tt=()=>{$(A,!0),H(ee("galleryInView","pause"))},zt=()=>{$(A,!1),e(G)||H(ee("galleryOutOfView","play")),$(G,!1)},Ft=r=>{const m=r?.params?.assetId??r?.url.searchParams.get(mt.ID)??void 0;return me.getMemoryAsset(m)},ge=r=>{if(me.memories.length===0)return H(Le(Oe.photos()));$(t,Ft(r),!0),e(t)&&Mt(e(t).asset),$(oe,!1)},et=()=>{H(ee("resetAndPlay","reset")),H(ee("resetAndPlay","play"))},tt=()=>{const r=e(t)&&e(t).asset.isVideo,m=r&&!e(Z);e(oe)||m||(w()?H(ee("initPlayer[AssetViewOpen]","pause")):r&&et(),$(oe,!0))};Tr(({from:r,to:m})=>{me.ready().then(()=>{let y=null;m?.params?.assetId?y=m:r?.params?.assetId?y=r:y=Me,ge(y),tt()},y=>{console.error(`Error loading memories: ${y}`)})}),ct(()=>{e(z)&&H(St(e(z).current))}),ct(()=>{e(Z)&&(e(Z).muted=I(),tt())});var rt=Na();qe(dr,(r,m)=>Fr?.(r,m),()=>w()?[]:[{shortcut:{key:"ArrowRight"},onShortcut:()=>Ie()},{shortcut:{key:"d"},onShortcut:()=>Ie()},{shortcut:{key:"ArrowLeft"},onShortcut:()=>Ee()},{shortcut:{key:"a"},onShortcut:()=>Ee()},{shortcut:{key:"Escape"},onShortcut:()=>Vt()}]);var at=N(rt);{var jt=r=>{var m=Aa(),y=i(m);ia(y,{forceDark:!0,get assets(){return J.selectedAssets},clearSelect:()=>Br(J),children:(Q,ne)=>{var j=$a(),le=N(j);Yr(le,{});var F=d(le,2);{let de=b(()=>s()("select_all"));K(F,{shape:"round",color:"secondary",variant:"ghost",get"aria-label"(){return e(de)},get icon(){return pr},onclick:It})}var q=d(F,2);{let de=b(()=>s()("add_to"));We(q,{get icon(){return fr},get title(){return e(de)},children:(be,Ne)=>{var W=wa(),te=N(W);_t(te,{});var ce=d(te,2);_t(ce,{shared:!0}),p(be,W)},$$slots:{default:!0}})}var ye=d(q,2);Jr(ye,{get removeFavorite(){return J.isAllFavorite}});var Be=d(ye,2);{let de=b(()=>s()("menu"));We(Be,{get icon(){return vt},get title(){return e(de)},children:(be,Ne)=>{var W=xa(),te=N(W);sa(te,{menuItem:!0});var ce=d(te,2);ea(ce,{menuItem:!0});var ve=d(ce,2);ra(ve,{menuItem:!0});var we=d(ve,2);ta(we,{menuItem:!0});var _e=d(we,2);Zr(_e,{menuItem:!0,get unarchive(){return J.isAllArchived},onArchive:Ze});var xe=d(_e,2);{var Ue=$e=>{aa($e,{menuItem:!0})};k(xe,$e=>{_().tags.enabled&&J.isAllUserOwned&&$e(Ue)})}var Se=d(xe,2);oa(Se,{menuItem:!0,onAssetDelete:Ze}),p(be,W)},$$slots:{default:!0}})}p(Q,j)},$$slots:{default:!0}}),n(m),p(r,m)};k(at,r=>{J.selectionActive&&r(jt)})}var he=d(at,2),Et=i(he);{var Bt=r=>{var m=Ea(),y=N(m);Xr(y,{onClose:()=>Le(Oe.photos()),forceDark:!0,multiRow:!0,leading:a=>{var v=Te(),u=N(v);{var g=h=>{var P=Ma(),X=i(P,!0);n(P),V(De=>re(X,De),[()=>O()(e(t).memory)]),p(h,P)};k(u,h=>{e(t)&&h(g)})}p(a,v)},children:(a,v)=>{var u=Va(),g=i(u),h=i(g);{let E=b(()=>e(x)?s()("play_memories"):s()("pause_memories")),B=b(()=>e(x)?gr:hr);K(h,{shape:"round",variant:"ghost",color:"secondary",get"aria-label"(){return e(E)},get icon(){return e(B)},onclick:()=>H(ee("PlayPauseButtonClick",e(x)?"play":"pause"))})}n(g);var P=d(g,2);Cr(P,19,()=>e(t).memory.assets,E=>E.id,(E,B,Ge)=>{var ue=ka(),Qe=d(i(ue),2);let dt;n(ue),V((er,tr,rr)=>{M(ue,"href",er),M(ue,"aria-label",tr),dt=_r(Qe,"",dt,rr)},[()=>Je(e(B)),()=>s()("view"),()=>({width:`${Ct(e(Ge))}%`})]),p(E,ue)});var X=d(P,2),De=i(X),Yt=i(De);n(De),n(X);var Jt=d(X,2);{var Zt=E=>{var B=Pa(),Ge=i(B);{let ue=b(()=>I()?s()("unmute_memories"):s()("mute_memories")),Qe=b(()=>I()?Ar:Mr);K(Ge,{shape:"round",variant:"ghost",color:"secondary",get"aria-label"(){return e(ue)},get icon(){return e(Qe)},onclick:()=>Or(pt,!I())})}n(B),p(E,B)};k(Jt,E=>{e(ke).some(B=>B.type===qr.Video)&&E(Zt)})}n(u),V((E,B)=>re(Yt,`${E??""}/${B??""}`),[()=>(e(t).assetIndex+1).toLocaleString(C()),()=>e(t).memory.assets.length.toLocaleString(C())]),p(a,u)},$$slots:{leading:!0,default:!0}});var Q=d(y,2);{var ne=o=>{var a=Ia();let v;var u=i(a);u.__click=()=>e(S)?.scrollIntoView({behavior:"smooth"});var g=i(u);{let h=b(()=>s()("hide_gallery"));K(g,{shape:"round",color:"secondary",get"aria-label"(){return e(h)},get icon(){return Vr},onclick:()=>{}})}n(u),n(a),V(()=>{v=Ae(a,1,"fixed top-10 start-1/2 -translate-x-1/2 transition-opacity dark z-1",null,v,{"opacity-0":!e(A),"opacity-100":e(A)}),u.disabled=!e(A)}),p(o,a)};k(Q,o=>{e(A)&&o(ne)})}var j=d(Q,2),le=i(j),F=i(le),q=i(F);q.__click=Pt;var ye=i(q);{var Be=o=>{var a=Sa();V((v,u)=>{M(a,"src",v),M(a,"alt",u)},[()=>Fe({id:e(t).previousMemory.assets[0].id,size:je.Preview}),()=>s()("previous_memory")]),p(o,a)},de=o=>{var a=Ca(),v=i(a);M(v,"srcset","/_app/immutable/assets/no-thumbnail.N5o339_p.avif 271w");var u=d(v);M(u,"srcset","/_app/immutable/assets/no-thumbnail.CuO55w5X.webp 271w");var g=d(u);M(g,"src","/_app/immutable/assets/no-thumbnail.BE_9d36v.png"),n(a),V(h=>M(g,"alt",h),[()=>s()("previous_memory")]),p(o,a)};k(ye,o=>{e(t).previousMemory&&e(t).previousMemory.assets.length>0?o(Be):o(de,!1)})}var be=d(ye,2);{var Ne=o=>{var a=Da(),v=i(a),u=i(v,!0);n(v);var g=d(v,2),h=i(g,!0);n(g),n(a),V((P,X)=>{re(u,P),re(h,X)},[()=>s()("previous"),()=>O()(e(t).previousMemory)]),p(o,a)};k(be,o=>{e(t).previousMemory&&o(Ne)})}n(q),n(F);var W=d(F,2),te=i(W),ce=i(te);yr(ce,()=>e(t).asset.id,o=>{var a=Te(),v=N(a);{var u=h=>{ba(h,{get asset(){return e(t).asset},get videoViewerMuted(){return I()},get videoViewerVolume(){return R()},get videoPlayer(){return e(Z)},set videoPlayer(P){$(Z,P,!0)}})},g=h=>{ha(h,{get asset(){return e(t).asset},onImageLoad:et})};k(v,h=>{e(t).asset.isVideo?h(u):h(g,!1)})}p(o,a)});var ve=d(ce,2);let we;var _e=i(ve),xe=i(_e);{let o=b(()=>e(pe)?kr:Pr),a=b(()=>e(pe)?s()("unfavorite"):s()("favorite"));K(xe,{get icon(){return e(o)},shape:"round",variant:"ghost",color:"secondary",get"aria-label"(){return e(a)},onclick:()=>Ot(),class:"w-12 h-12"})}var Ue=d(xe,2);{let o=b(()=>s()("menu"));We(Ue,{get icon(){return vt},get title(){return e(o)},onclick:()=>H(ee("ContextMenuClick","pause")),direction:"left",size:"medium",align:"bottom-right",children:(a,v)=>{var u=La(),g=N(u);{let P=b(()=>s()("remove_memory"));ft(g,{onClick:()=>Lt(),get text(){return e(P)},get icon(){return br}})}var h=d(g,2);{let P=b(()=>s()("remove_photo_from_memory"));ft(h,{onClick:()=>Dt(),get text(){return e(P)},get icon(){return wr}})}p(a,u)},$$slots:{default:!0}})}n(_e);var Se=d(_e,2),$e=i(Se);{let o=b(()=>Oe.photos({at:e(t).asset.id})),a=b(()=>s()("view_in_timeline"));K($e,{get href(){return e(o)},get icon(){return xr},get"aria-label"(){return e(a)},color:"secondary",variant:"ghost",shape:"round"})}n(Se),n(ve);var ot=d(ve,2);{var Ht=o=>{var a=Oa(),v=i(a);{let u=b(()=>s()("previous_memory"));K(v,{shape:"round",get"aria-label"(){return e(u)},get icon(){return Ir},variant:"ghost",color:"secondary",size:"giant",onclick:Ee})}n(a),p(o,a)};k(ot,o=>{e(t).previous&&o(Ht)})}var st=d(ot,2);{var Rt=o=>{var a=Ta(),v=i(a);{let u=b(()=>s()("next_memory"));K(v,{shape:"round",get"aria-label"(){return e(u)},get icon(){return Sr},variant:"ghost",color:"secondary",size:"giant",onclick:Ie})}n(a),p(o,a)};k(st,o=>{e(t).next&&o(Rt)})}var it=d(st,2),He=i(it),Gt=i(He,!0);n(He);var nt=d(He,2),Qt=i(nt);ur(Qt,()=>e(se),null,(o,a)=>{var v=vr();V(()=>re(v,`${(e(a)?.exifInfo?.city||"")??""}
                  ${(e(a)?.exifInfo?.country||"")??""}`)),p(o,v)}),n(nt),n(it),n(te),n(W);var Re=d(W,2),Ce=i(Re);Ce.__click=kt;var lt=i(Ce);{var qt=o=>{var a=za();V((v,u)=>{M(a,"src",v),M(a,"alt",u)},[()=>Fe({id:e(t).nextMemory.assets[0].id,size:je.Preview}),()=>s()("next_memory")]),p(o,a)},Wt=o=>{var a=Fa(),v=i(a);M(v,"srcset","/_app/immutable/assets/no-thumbnail.N5o339_p.avif 271w");var u=d(v);M(u,"srcset","/_app/immutable/assets/no-thumbnail.CuO55w5X.webp 271w");var g=d(u);M(g,"src","/_app/immutable/assets/no-thumbnail.BE_9d36v.png"),n(a),V(h=>M(g,"alt",h),[()=>s()("next_memory")]),p(o,a)};k(lt,o=>{e(t).nextMemory&&e(t).nextMemory.assets.length>0?o(qt):o(Wt,!1)})}var Xt=d(lt,2);{var Kt=o=>{var a=ja(),v=i(a),u=i(v,!0);n(v);var g=d(v,2),h=i(g,!0);n(g),n(a),V((P,X)=>{re(u,P),re(h,X)},[()=>s()("up_next"),()=>O()(e(t).nextMemory)]),p(o,a)};k(Xt,o=>{e(t).nextMemory&&o(Kt)})}n(Ce),n(Re),n(le),n(j),V(o=>{Ae(F,1,`h-1/2 w-[20vw] rounded-2xl ${e(t).previousMemory?"opacity-25 hover:opacity-70":"opacity-0"}`),q.disabled=!e(t).previousMemory,we=Ae(ve,1,"absolute bottom-0 end-0 p-2 transition-all flex h-full justify-between flex-col items-end gap-2 dark",null,we,{"opacity-0":e(A),"opacity-100":!e(A)}),re(Gt,o),Ae(Re,1,`h-1/2 w-[20vw] rounded-2xl ${e(t).nextMemory?"opacity-25 hover:opacity-70":"opacity-0"}`),Ce.disabled=!e(t).nextMemory},[()=>Gr(e(t).memory.assets[0].localDateTime).toLocaleString(or.DATE_FULL,{locale:C()})]),Dr(j,"clientHeight",o=>$(ie,o)),p(r,m)};k(Et,r=>{e(t)&&r(Bt)})}n(he),ze(he,r=>$(S,r),()=>e(S)),qe(he,(r,m)=>zr?.(r,m),()=>({height:r,width:m})=>(fe.height=r,fe.width=m));var Nt=d(he,2);{var Ut=r=>{var m=Ba(),y=i(m);let Q;var ne=i(y);{let F=b(()=>s()("show_gallery"));K(ne,{shape:"round",color:"secondary",get"aria-label"(){return e(F)},get icon(){return $r},onclick:()=>e(T)?.scrollIntoView({behavior:"smooth"})})}n(y);var j=d(y,2),le=i(j);Kr(le,{get assets(){return e(ke)},get viewport(){return e(At)},get assetInteraction(){return J},get slidingWindowOffset(){return e(ie)},arrowNavigation:!1}),n(j),qe(j,(F,q)=>ma?.(F,q),()=>({onIntersect:Tt,onSeparate:zt,bottom:"-200px"})),ze(j,F=>$(T,F),()=>e(T)),n(m),V(()=>Q=Ae(y,1,"sticky mb-10 flex place-content-center place-items-center transition-all dark",null,Q,{"opacity-0":e(A),"opacity-100":!e(A)})),p(r,m)};k(Nt,r=>{e(t)&&r(Ut)})}p(c,rt),Ke(),U()}cr(["click"]);function So(c){Ua(c,{})}export{So as component,Io as universal};
