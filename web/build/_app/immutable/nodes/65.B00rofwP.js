import{s as R}from"../chunks/D1613R3V.js";import{r as J,R as U}from"../chunks/gegweU97.js";import{g as K,$ as N}from"../chunks/DWQ0JXRY.js";import"../chunks/DsnmJJEf.js";import{p as Q,a as V,t as F,s as u,j as s,g as e,c as X,u as l,h as p,n as M,r as Y}from"../chunks/D0CSSuTl.js";import{s as T,e as Z}from"../chunks/C8vxa4mj.js";import{t as B,a as P,f as ee}from"../chunks/Bd1JH_Ov.js";import{i as te}from"../chunks/D8NIUdeB.js";import{s as re,a as ae}from"../chunks/zonMEKN6.js";import{g as oe}from"../chunks/gvLJu3l0.js";import{A as se}from"../chunks/aAP1iED5.js";import{h as le}from"../chunks/DLePdI2u.js";import{_ as ie}from"../chunks/BP6NvnZ7.js";import{A as C}from"../chunks/B2XNhc0s.js";import{T as ne,B as ue}from"../chunks/D-UYCH9y.js";import{F as g}from"../chunks/BgQCgJ0_.js";import{I as D}from"../chunks/s_2UW97Q.js";import{P as O}from"../chunks/BzOEcAd-.js";const me=(async({parent:_})=>(await _(),R.value.isInitialized&&J(307,U.login()),{meta:{title:(await K())("admin.registration")}})),je=Object.freeze(Object.defineProperty({__proto__:null,load:me},Symbol.toStringTag,{value:"Module"}));var de=ee('<form method="post" class="flex flex-col gap-4"><!> <!> <!> <!> <!> <!> <!></form>');function Fe(_,v){Q(v,!0);const o=()=>ae(N,"$t",k),[k,E]=re();let h=p(""),m=p(""),i=p(""),b=p(""),d=p(!1),f=l(()=>e(m)===e(i)||e(i).length===0?"":o()("password_does_not_match"));const y=l(()=>e(m)===e(i)&&e(i).length>0),L=async w=>{if(w.preventDefault(),!(!e(y)||e(d))){s(d,!0),s(f,"");try{await ie({signUpDto:{email:e(h),password:e(m),name:e(b)}}),await R.loadServerConfig(),await oe(U.login())}catch(x){le(x,o()("errors.unable_to_create_admin_account")),s(f,o()("errors.unable_to_create_admin_account"))}finally{s(d,!1)}}};se(_,{get title(){return v.data.meta.title},children:(w,x)=>{var c=de(),A=X(c);C(A,{color:"primary",class:"mb-2",children:(t,a)=>{ne(t,{children:(n,r)=>{M();var $=B();F(H=>T($,H),[()=>o()("admin.registration_description")]),P(n,$)},$$slots:{default:!0}})},$$slots:{default:!0}});var q=u(A,2);{let t=l(()=>o()("admin_email"));g(q,{get label(){return e(t)},required:!0,children:(a,n)=>{D(a,{type:"email",autocomplete:"email",get value(){return e(h)},set value(r){s(h,r,!0)}})},$$slots:{default:!0}})}var z=u(q,2);{let t=l(()=>o()("admin_password"));g(z,{get label(){return e(t)},required:!0,children:(a,n)=>{O(a,{autocomplete:"new-password",get value(){return e(m)},set value(r){s(m,r,!0)}})},$$slots:{default:!0}})}var I=u(z,2);{let t=l(()=>o()("confirm_admin_password"));g(I,{get label(){return e(t)},required:!0,children:(a,n)=>{O(a,{autocomplete:"new-password",get value(){return e(i)},set value(r){s(i,r,!0)}})},$$slots:{default:!0}})}var S=u(I,2);{let t=l(()=>o()("name"));g(S,{get label(){return e(t)},required:!0,children:(a,n)=>{D(a,{type:"text",autocomplete:"name",get value(){return e(b)},set value(r){s(b,r,!0)}})},$$slots:{default:!0}})}var j=u(S,2);{var W=t=>{C(t,{color:"danger",get title(){return e(f)},size:"medium",class:"mt-4"})};te(j,t=>{e(f)&&t(W)})}var G=u(j,2);{let t=l(()=>!e(y)||e(d));ue(G,{class:"mt-4",type:"submit",size:"giant",shape:"round",fullWidth:!0,get disabled(){return e(t)},get loading(){return e(d)},children:(a,n)=>{M();var r=B();F($=>T(r,$),[()=>o()("sign_up")]),P(a,r)},$$slots:{default:!0}})}Y(c),Z("submit",c,L),P(w,c)},$$slots:{default:!0}}),V(),E()}export{Fe as component,je as universal};
