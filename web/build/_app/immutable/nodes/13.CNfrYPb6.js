import{a as Ae}from"../chunks/CJGyQpNN.js";import{g as Se,$ as ue}from"../chunks/DWQ0JXRY.js";import{a2 as re}from"../chunks/BP6NvnZ7.js";import"../chunks/DsnmJJEf.js";import{p as ce,f as me,g as t,s as b,t as q,a as pe,W as l,u as s,c as u,r as c,n as ae,h as se,i as xe,j as Y}from"../chunks/D0CSSuTl.js";import{a as y,t as oe,f as j}from"../chunks/Bd1JH_Ov.js";import{p as ke,a as L,s as ge,f as v}from"../chunks/zonMEKN6.js";import{s as Be}from"../chunks/Bu1B-y_V.js";import{s as Z}from"../chunks/C8vxa4mj.js";import{i as le}from"../chunks/D8NIUdeB.js";import{B as J,aZ as Ge,I as ne,a_ as Fe,a$ as Me,F as Ce,T as ie,b0 as De,b1 as Ie,b2 as Pe,b3 as je,b4 as Ve,b5 as Le,b6 as Te,G as ze}from"../chunks/D-UYCH9y.js";import{D as de}from"../chunks/GyRE5G4-.js";import{G as ve}from"../chunks/B8xO085N.js";import{S as be}from"../chunks/C0GZEybY.js";import{E as P,C as D,V,D as d,S as I,B as S}from"../chunks/DUXNbmIP.js";import{c as _e,g as Ne,e as Qe,a as Ue,f as Re,b as Ee,d as He,s as We,h as qe}from"../chunks/B9MV_P2E.js";import{A as Ye}from"../chunks/CB4RQAE3.js";import{U as Ze}from"../chunks/tK_U6--f.js";import{E as Je}from"../chunks/BcC-f0mZ.js";import{R as Ke}from"../chunks/gegweU97.js";const Xe=(async({url:x})=>{await Ae(x);const m=await re({shared:!0}),e=await re({}),r=await Se();return{albums:e,sharedAlbums:m,meta:{title:r("albums")}}}),xt=Object.freeze(Object.defineProperty({__proto__:null,load:Xe},Symbol.toStringTag,{value:"Module"}));var et=j('<p class="hidden md:block"> </p>'),tt=j('<span><div class="hidden xl:flex gap-0"><div class="block"><!></div> <div class="block"><!></div></div></span>'),rt=j('<div class="hidden xl:block h-10"><!></div> <div class="hidden xl:block h-10 xl:w-60 2xl:w-80"><!></div> <!> <!> <!> <!> <!>',1);function at(x,m){ce(m,!0);const e=()=>L(d,"$albumViewSettings",k),r=()=>L(ue,"$t",k),[k,T]=ge();let _=ke(m,"searchQuery",15);const O=a=>a===I.Asc?I.Desc:I.Asc,z=(a,o)=>{v(d,l(e).filter=Object.keys(t(p)).find(n=>t(p)[n]===a)??o,l(e))},N=({id:a,defaultOrder:o})=>{e().groupBy===a?v(d,l(e).groupOrder=O(e().groupOrder),l(e)):(v(d,l(e).groupBy=a,l(e)),v(d,l(e).groupOrder=o,l(e)))},B=({id:a,defaultOrder:o})=>{e().sortBy===a?v(d,l(e).sortOrder=O(e().sortOrder),l(e)):(v(d,l(e).sortBy=a,l(e)),v(d,l(e).sortOrder=o,l(e)))},h=()=>{v(d,l(e).view=e().view===V.Cover?V.List:V.Cover,l(e))};let w=s(()=>t(F)?.id===D.None?Pe:e().groupOrder===I.Desc?je:Ve),p=s(()=>({[P.All]:r()("all"),[P.Owned]:r()("owned"),[P.Shared]:r()("shared")})),G=s(()=>t(p)[Re(e().filter)]),Q=s(()=>Ee(e().sortBy)),F=s(()=>He(e().groupBy)),U=s(()=>e().sortOrder===I.Desc?Le:Te),R=s(()=>({[S.Title]:r()("sort_title"),[S.ItemCount]:r()("sort_items"),[S.DateModified]:r()("sort_modified"),[S.DateCreated]:r()("sort_created"),[S.MostRecentPhoto]:r()("sort_recent"),[S.OldestPhoto]:r()("sort_oldest")})),A=s(()=>({[D.None]:r()("group_no"),[D.Owner]:r()("group_owner"),[D.Year]:r()("group_year")}));var g=rt(),$=me(g),fe=u($);{let a=s(()=>r()("show_albums")),o=s(()=>Object.values(t(p)));ve(fe,{get label(){return t(a)},get filters(){return t(o)},get selected(){return t(G)},onSelect:n=>z(n,P.All)})}c($);var E=b($,2),he=u(E);{let a=s(()=>r()("search_albums"));be(he,{get placeholder(){return t(a)},showLoadingSpinner:!1,get name(){return _()},set name(o){_(o)}})}c(E);var K=b(E,2);J(K,{get leadingIcon(){return Ge},onclick:()=>_e(),size:"small",variant:"ghost",color:"secondary",children:(a,o)=>{var n=et(),i=u(n,!0);c(n),q(M=>Z(i,M),[()=>r()("create_album")]),y(a,n)},$$slots:{default:!0}});var X=b(K,2);{let a=s(()=>r()("sort_albums_by")),o=s(()=>Object.values(We));de(X,{get title(){return t(a)},get options(){return t(o)},get selectedOption(){return t(Q)},onSelect:B,render:({id:n})=>({title:t(R)[n],icon:t(U)})})}var ee=b(X,2);{let a=s(()=>r()("group_albums_by")),o=s(()=>Object.values(qe));de(ee,{get title(){return t(a)},get options(){return t(o)},get selectedOption(){return t(F)},onSelect:N,render:({id:n,isDisabled:i})=>({title:t(A)[n],icon:t(w),disabled:i()})})}var te=b(ee,2);{var $e=a=>{var o=tt(),n=u(o),i=u(n),M=u(i);{let H=s(()=>r()("expand_all")),W=s(()=>r()("expand_all"));ne(M,{get title(){return t(H)},onclick:()=>Qe(),variant:"ghost",color:"secondary",shape:"round",get icon(){return Fe},get"aria-label"(){return t(W)}})}c(i);var f=b(i,2),C=u(f);{let H=s(()=>r()("collapse_all")),W=s(()=>r()("collapse_all"));ne(C,{get title(){return t(H)},onclick:()=>Ue(m.albumGroups),variant:"ghost",color:"secondary",shape:"round",get icon(){return Me},get"aria-label"(){return t(W)}})}c(f),c(n),c(o),Ce(1,o,()=>ze,()=>({x:-50,duration:250})),y(a,o)};le(te,a=>{Ne(e())!==D.None&&a($e)})}var ye=b(te,2);{var Oe=a=>{J(a,{get leadingIcon(){return De},onclick:()=>h(),size:"small",variant:"ghost",color:"secondary",children:(o,n)=>{ie(o,{class:"hidden md:block",children:(i,M)=>{ae();var f=oe();q(C=>Z(f,C),[()=>r()("covers")]),y(i,f)},$$slots:{default:!0}})},$$slots:{default:!0}})},we=a=>{J(a,{get leadingIcon(){return Ie},onclick:()=>h(),size:"small",variant:"ghost",color:"secondary",children:(o,n)=>{ie(o,{class:"hidden md:block",children:(i,M)=>{ae();var f=oe();q(C=>Z(f,C),[()=>r()("list")]),y(i,f)},$$slots:{default:!0}})},$$slots:{default:!0}})};le(ye,a=>{e().view===V.List?a(Oe):a(we,!1)})}y(x,g),pe(),T()}var st=j('<div class="flex place-items-center gap-2"><!></div>'),ot=j('<div class="xl:hidden"><div class="w-fit h-14 dark:text-immich-dark-fg py-2"><!></div> <div class="w-60"><!></div></div> <!>',1);function kt(x,m){ce(m,!0);const e=()=>L(ue,"$t",k),r=()=>L(d,"$albumViewSettings",k),[k,T]=ge();let _=se(""),O=se(xe([]));{const z=B=>{var h=st(),w=u(h);at(w,{get albumGroups(){return t(O)},get searchQuery(){return t(_)},set searchQuery(p){Y(_,p,!0)}}),c(h),y(B,h)};let N=s(()=>[[Be,{routeStartsWith:Ke.albums()}]]);Ze(x,{get title(){return m.data.meta.title},get use(){return t(N)},buttons:z,children:(B,h)=>{var w=ot(),p=me(w),G=u(p),Q=u(G);{let A=s(()=>e()("show_albums")),g=s(()=>Object.keys(P));ve(Q,{get label(){return t(A)},get filters(){return t(g)},get selected(){return r().filter},onSelect:$=>v(d,l(r).filter=$,l(r))})}c(G);var F=b(G,2),U=u(F);{let A=s(()=>e()("search_albums"));be(U,{get placeholder(){return t(A)},showLoadingSpinner:!1,get name(){return t(_)},set name(g){Y(_,g,!0)}})}c(F),c(p);var R=b(p,2);Ye(R,{get ownedAlbums(){return m.data.albums},get sharedAlbums(){return m.data.sharedAlbums},get userSettings(){return r()},allowEdit:!0,get searchQuery(){return t(_)},get albumGroupIds(){return t(O)},set albumGroupIds(g){Y(O,g,!0)},empty:g=>{{let $=s(()=>e()("no_albums_message"));Je(g,{get text(){return t($)},onClick:()=>_e(),class:"mt-10 mx-auto"})}},$$slots:{empty:!0}}),y(B,w)},$$slots:{buttons:!0,default:!0}})}pe(),T()}export{kt as component,xt as universal};
